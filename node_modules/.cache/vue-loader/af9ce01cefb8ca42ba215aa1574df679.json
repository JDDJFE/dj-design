{"remainingRequest":"/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangjunxia/work-github/dj-design/packages/pagination/src/pagination.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangjunxia/work-github/dj-design/packages/pagination/src/pagination.vue","mtime":1673509764343},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnZGpQYWdpbmF0aW9uJywKICBkYXRhKCl7CiAgICByZXR1cm4gewogICAgICBsaXN0OiBbXSwKICAgICAgbnVtOiAxLAogICAgICBjdXJOdW06ICcnLAogICAgICBob3dtYW55OiAnJywKICAgICAgaXNndDc6IGZhbHNlLAogICAgICBpc1FpYW46IGZhbHNlLAogICAgICBpc0hvdTogdHJ1ZSwKICAgICAgU1BhZ2luYXRpb25WYWx1ZTogMQogICAgfTsKICB9LAogIHByb3BzOiB7CiAgICBib3JkZXI6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBwYWdlU2l6ZTogewogICAgICB0eXBlOiBbU3RyaW5nLE51bWJlcl0sCiAgICAgIGRlZmF1bHQ6IDEwCiAgICB9LAogICAgdG90YWw6IHsKICAgICAgdHlwZTogW1N0cmluZyxOdW1iZXJdLAogICAgICBkZWZhdWx0OiAwCiAgICB9LAogICAgY3VycmVudFBhZ2U6IHsKICAgICAgdHlwZTogW1N0cmluZyxOdW1iZXJdLAogICAgICBkZWZhdWx0OiAxCiAgICB9LAogICAgcGFnZVNpemVzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0KCkge30KICAgIH0sCiAgICBzaXplOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ25vcm1hbCcKICAgIH0KICB9LAogIGNyZWF0ZWQoKXsKICAgIHRoaXMuZ2V0VG90YWwodGhpcy5wYWdlU2l6ZSk7CiAgICB0aGlzLmNob29zZVBhZ2luYXRpb24odGhpcy5jdXJyZW50UGFnZSwgLTEpOwogIH0sCiAgbWV0aG9kczogewogICAgY2hvb3NlSXRlbSh2YWwpewogICAgICB0aGlzLmdldFRvdGFsKE51bWJlcih2YWwpKTsKICAgICAgdGhpcy5jaG9vc2VQYWdpbmF0aW9uKDEsIC0yKTsKICAgICAgdGhpcy4kZW1pdCgnc2l6ZS1jaGFuZ2UnLHZhbCk7CiAgICB9LAogICAgYmx1clNQYWdpbmF0aW9uKCl7CiAgICAgIGlmICh0aGlzLlNQYWdpbmF0aW9uVmFsdWUhPScnKXsKICAgICAgICBsZXQgc3AgPSBOdW1iZXIodGhpcy5TUGFnaW5hdGlvblZhbHVlKTsKICAgICAgICBpZiAoc3A+IHRoaXMubnVtKXsKICAgICAgICAgIHRoaXMuY2hvb3NlUGFnaW5hdGlvbih0aGlzLm51bSk7CiAgICAgICAgfSBlbHNlIGlmIChzcCA8IDEpewogICAgICAgICAgdGhpcy5jaG9vc2VQYWdpbmF0aW9uKDEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmNob29zZVBhZ2luYXRpb24oc3ApOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHZlcklucHV0KHN0cil7CiAgICAgIGlmIChzdHImJnN0ciE9JycpewogICAgICAgIGxldCBudW09IHN0ci5yZXBsYWNlKC9bXjAtOV0vaWcsJycpOwogICAgICAgIGlmIChzdHIubGVuZ3RoPjEpewogICAgICAgICAgcmV0dXJuIG51bS5yZXBsYWNlKC9cYigwKykvZ2ksJycpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbnVtOwogICAgICB9CiAgICAgIHJldHVybiAnJzsKICAgIH0sCiAgICByZWR1Y2VOKCl7CiAgICAgIGxldCBuPXRoaXMuY3VyTnVtOwogICAgICBuLS07CiAgICAgIGlmIChuPjApewogICAgICAgIHRoaXMuY2hvb3NlUGFnaW5hdGlvbihuKTsKICAgICAgfQogICAgfSwKICAgIHBsdXNOKCl7CiAgICAgIGxldCBuPXRoaXMuY3VyTnVtOwogICAgICBuKys7CiAgICAgIGlmIChuPD10aGlzLm51bSl7CiAgICAgICAgdGhpcy5jaG9vc2VQYWdpbmF0aW9uKG4pOwogICAgICB9CiAgICB9LAogICAgY2hvb3NlUGFnaW5hdGlvbihuLCBibyl7CiAgICAgIGlmIChuID09PSAnLi4uJykgcmV0dXJuIGZhbHNlOwogICAgICB0aGlzLmlzSG91PXRydWU7CiAgICAgIHRoaXMuaXNRaWFuPXRydWU7CiAgICAgIGxldCBhcnIgPSBbbi01LCBuLTQsIG4tMywgbi0yLCBuLTEsIG4sIG4rMSwgbisyLCBuKzMsIG4rNCwgbis1XSwKICAgICAgICBpbmRleCA9IDEsCiAgICAgICAgbGVudCA9IGFyci5sZW5ndGg7CiAgICAgICAgLy8g5LyY5YyWCiAgICAgIGlmICh0aGlzLm51bT43KSB7CiAgICAgICAgaWYgKG4+PTUmJnRoaXMuaXNndDcpewogICAgICAgICAgaWYgKG48PXRoaXMubnVtLTEpewogICAgICAgICAgICBpbmRleCA9IDQ7CiAgICAgICAgICAgIGlmIChuPT10aGlzLm51bS0zKXsKICAgICAgICAgICAgICB0aGlzLmlzSG91PWZhbHNlOwogICAgICAgICAgICB9IGVsc2UgaWYgKG49PXRoaXMubnVtLTIpewogICAgICAgICAgICAgIGluZGV4ID0gNTsKICAgICAgICAgICAgICB0aGlzLmlzSG91PWZhbHNlOwogICAgICAgICAgICB9IGVsc2UgaWYgKG49PXRoaXMubnVtLTEpewogICAgICAgICAgICAgIGluZGV4ID0gNjsKICAgICAgICAgICAgICB0aGlzLmlzSG91PWZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpbmRleCA9IDc7CiAgICAgICAgICAgIHRoaXMuaXNIb3U9ZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChuPDUmJnRoaXMuaXNndDcpewogICAgICAgICAgdGhpcy5pc1FpYW49ZmFsc2U7CiAgICAgICAgICBpbmRleCA9IG47CiAgICAgICAgfQogICAgICAgIHRoaXMubGlzdCA9IFsxLCAnLi4uJywgLi4uYXJyLnNsaWNlKGxlbnQtKDUrKGluZGV4LTEpKSwgbGVudC0oaW5kZXgtMSkpLCAnLi4uJywgdGhpcy5udW1dOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMubGlzdD1bXTsKICAgICAgICBmb3IgKGxldCBpPTA7IGk8dGhpcy5udW07aSsrICl7CiAgICAgICAgICB0aGlzLmxpc3QucHVzaChpKzEpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoYm8gPT0gLTIgfHwgYm8gIT0gLTEgJiYgdGhpcy5jdXJOdW0hPT1uKSB7CiAgICAgICAgdGhpcy4kZW1pdCgnY3VycmVudC1jaGFuZ2UnLG4sIHRoaXMuaG93bWFueSk7CiAgICAgIH0KICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOmN1cnJlbnRQYWdlJywgbik7CiAgICAgIGlmIChuIT0nLi4uJykgdGhpcy5jdXJOdW09bjsKICAgIH0sCiAgICBnZXRUb3RhbChwYWdlU2l6ZSl7CiAgICAgIHRoaXMuaG93bWFueT1wYWdlU2l6ZTsKICAgICAgdGhpcy5udW09TWF0aC5jZWlsKHRoaXMudG90YWwvcGFnZVNpemUpOwogICAgICB0aGlzLmlzZ3Q3ID0gdGhpcy5udW0+NzsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBjdXJyZW50UGFnZSh2YWwpewogICAgICB0aGlzLmNob29zZVBhZ2luYXRpb24odGhpcy5jdXJyZW50UGFnZSk7CiAgICB9LAogICAgdG90YWwoKXsKICAgICAgdGhpcy5nZXRUb3RhbCh0aGlzLnBhZ2VTaXplKTsKICAgICAgdGhpcy5jaG9vc2VQYWdpbmF0aW9uKHRoaXMuY3VycmVudFBhZ2UsIC0xKTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["pagination.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"pagination.vue","sourceRoot":"packages/pagination/src","sourcesContent":["<template>\n    <div class=\"dj-pagination\" :class=\"[border && 'dj-paginationB', size == 'small' && 'dj-pagination-small']\">\n        <span :style=\"{padding:  '10px'}\">共 {{total}}  条</span>\n        <ul class=\"dj-pagination-box\" >\n          <li class=\"dj-pagination-left\" @click=\"reduceN\"><dj-icon icon=\"arrow-left\"></dj-icon></li>\n          <li class=\"dj-pagination-num\"\n          :class=\"{'is-active':curNum==item}\"\n          :style=\"[(isQian&&index==1)||(isHou&&index==list.length-2) ? {border: 'none'} : {}]\"\n            @click=\"choosePagination(item,index)\"\n            v-for=\"(item,index) in list\"\n            :key=\"index\"\n            v-if=\"item!='...'||(isQian&&index==1)||(isHou&&index==list.length-2)\"\n            >{{item}}</li>\n          <li class=\"dj-pagination-left\" @click=\"plusN\"><dj-icon icon=\"arrow-right\"></dj-icon></li>\n        </ul>\n        <span class=\"dj-pagination-ye\">\n          <span v-if=\"!border\">前往 </span>\n          <span :class=\"border && 'dj-page-inner'\">\n            <input\n              type=\"text\"\n              class=\"dj-pagination-ye-input\"\n              v-model=\"SPaginationValue\"\n              @blur=\"blurSPagination\"\n              @keydown.enter.prevent=\"blurSPagination\"\n              @input=\"SPaginationValue=verInput(SPaginationValue)\">\n            <i v-if=\"border\" class=\"iconfont search2\"/>\n            <span v-if=\"!border\"> 页</span>\n          </span>\n          <dj-select v-model=\"howmany\" class=\"lt dj-pagination-page-size\" @change=\"chooseItem\" v-if=\"pageSizes && pageSizes.length\" :style=\"`width: ${size == 'small' ? '90px' : '100px'}`\" :height=\"`${size == 'small' ? '22px' : '30px'}`\">\n            <dj-option :value=\"item\" :label=\"item+' 条/页'\" v-for=\"(item,index) in pageSizes\" :key=\"index\"></dj-option>\n          </dj-select>\n        </span>\n    </div>\n</template>\n<script>\nexport default {\n  name: 'djPagination',\n  data(){\n    return {\n      list: [],\n      num: 1,\n      curNum: '',\n      howmany: '',\n      isgt7: false,\n      isQian: false,\n      isHou: true,\n      SPaginationValue: 1\n    };\n  },\n  props: {\n    border: {\n      type: Boolean,\n      default: false\n    },\n    pageSize: {\n      type: [String,Number],\n      default: 10\n    },\n    total: {\n      type: [String,Number],\n      default: 0\n    },\n    currentPage: {\n      type: [String,Number],\n      default: 1\n    },\n    pageSizes: {\n      type: Array,\n      default() {}\n    },\n    size: {\n      type: String,\n      default: 'normal'\n    }\n  },\n  created(){\n    this.getTotal(this.pageSize);\n    this.choosePagination(this.currentPage, -1);\n  },\n  methods: {\n    chooseItem(val){\n      this.getTotal(Number(val));\n      this.choosePagination(1, -2);\n      this.$emit('size-change',val);\n    },\n    blurSPagination(){\n      if (this.SPaginationValue!=''){\n        let sp = Number(this.SPaginationValue);\n        if (sp> this.num){\n          this.choosePagination(this.num);\n        } else if (sp < 1){\n          this.choosePagination(1);\n        } else {\n          this.choosePagination(sp);\n        }\n      }\n    },\n    verInput(str){\n      if (str&&str!=''){\n        let num= str.replace(/[^0-9]/ig,'');\n        if (str.length>1){\n          return num.replace(/\\b(0+)/gi,'');\n        }\n        return num;\n      }\n      return '';\n    },\n    reduceN(){\n      let n=this.curNum;\n      n--;\n      if (n>0){\n        this.choosePagination(n);\n      }\n    },\n    plusN(){\n      let n=this.curNum;\n      n++;\n      if (n<=this.num){\n        this.choosePagination(n);\n      }\n    },\n    choosePagination(n, bo){\n      if (n === '...') return false;\n      this.isHou=true;\n      this.isQian=true;\n      let arr = [n-5, n-4, n-3, n-2, n-1, n, n+1, n+2, n+3, n+4, n+5],\n        index = 1,\n        lent = arr.length;\n        // 优化\n      if (this.num>7) {\n        if (n>=5&&this.isgt7){\n          if (n<=this.num-1){\n            index = 4;\n            if (n==this.num-3){\n              this.isHou=false;\n            } else if (n==this.num-2){\n              index = 5;\n              this.isHou=false;\n            } else if (n==this.num-1){\n              index = 6;\n              this.isHou=false;\n            }\n          } else {\n            index = 7;\n            this.isHou=false;\n          }\n        } else if (n<5&&this.isgt7){\n          this.isQian=false;\n          index = n;\n        }\n        this.list = [1, '...', ...arr.slice(lent-(5+(index-1)), lent-(index-1)), '...', this.num];\n      } else {\n        this.list=[];\n        for (let i=0; i<this.num;i++ ){\n          this.list.push(i+1);\n        }\n      }\n      if (bo == -2 || bo != -1 && this.curNum!==n) {\n        this.$emit('current-change',n, this.howmany);\n      }\n      this.$emit('update:currentPage', n);\n      if (n!='...') this.curNum=n;\n    },\n    getTotal(pageSize){\n      this.howmany=pageSize;\n      this.num=Math.ceil(this.total/pageSize);\n      this.isgt7 = this.num>7;\n    }\n  },\n  watch: {\n    currentPage(val){\n      this.choosePagination(this.currentPage);\n    },\n    total(){\n      this.getTotal(this.pageSize);\n      this.choosePagination(this.currentPage, -1);\n    }\n  }\n};\n</script>\n"]}]}
{"remainingRequest":"/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangjunxia/work-github/dj-design/packages/input/src/options.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangjunxia/work-github/dj-design/packages/input/src/options.vue","mtime":1673509764332},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGltcG9ydCAnQC9kaXJlY3RpdmUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2RqT3B0aW9ucycsCiAgcHJvcHM6IHsKICAgIHZhbHVlOiBbU3RyaW5nLCBOdW1iZXIsIEFycmF5XSwKICAgIHZhbHVlS2V5OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ3ZhbHVlJwogICAgfSwKICAgIGZ1bnF1ZXJ5OiBGdW5jdGlvbiwKICAgIHNlYXJjaDogQm9vbGVhbiwKICAgIG11bHRpcGxlOiBCb29sZWFuLAogICAgbm9kYXRhOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ+acquWMuemFjeWIsOaVsOaNricKICAgIH0sCiAgICBwbGFjZWhvbGRlcjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlYWZ1bHQ6ICdzZWFyY2guLi4nCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAga2V5d29yZDogJycsCiAgICAgIGl0ZW1zOiBbXSwKICAgICAgdGltZW91dDogbnVsbCwKICAgICAgb2xkVmFsdWU6ICcnCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGdldEl0ZW1zKCkgewogICAgICBpZiAoIXRoaXMua2V5d29yZCkgewogICAgICAgIHJldHVybiB0aGlzLml0ZW1zOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLml0ZW1zLmZpbHRlcihpdGVtID0+IGl0ZW1bdGhpcy52YWx1ZUtleV0uc2VhcmNoKHRoaXMua2V5d29yZCkgPiAtMSk7CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5vblF1ZXJ5KCk7CiAgfSwKICB3YXRjaDogewogICAgLy8gdmFsdWU6IGZ1bmN0aW9uKG8sIG4pIHsKICAgIC8vICAgdGhpcy5vblF1ZXJ5KCk7CiAgICAvLyB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBvblF1ZXJ5KCkgewogICAgICBpZiAodGhpcy52YWx1ZSAmJiB0aGlzLnZhbHVlID09IHRoaXMub2xkVmFsdWUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMudGltZW91dCkgewogICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpOwogICAgICAgIHRoaXMudGltZW91dCA9IG51bGw7CiAgICAgIH0KICAgICAgdGhpcy50aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5mdW5xdWVyeSAmJiB0aGlzLmZ1bnF1ZXJ5KHRoaXMudmFsdWUsIChsaXN0KSA9PiB7CiAgICAgICAgICB0aGlzLm9sZFZhbHVlID0gdGhpcy52YWx1ZTsKICAgICAgICAgIHRoaXMuaXRlbXMgPSBsaXN0OwogICAgICAgIH0pOwogICAgICB9LCAzMDApOwogICAgfSwKICAgIG9uU2VsZWN0KGl0ZW0pIHsKICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCBpdGVtW3RoaXMudmFsdWVLZXldKTsKICAgICAgdGhpcy4kZW1pdCgnc2VsZWN0JywgaXRlbVt0aGlzLnZhbHVlS2V5XSwgaXRlbSk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["options.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"options.vue","sourceRoot":"packages/input/src","sourcesContent":["<template>\n  <div class=\"dj-options\">\n    <div class=\"menu-panel\">\n      <div v-if=\"search\" class=\"item-search\">\n        <dj-input v-model=\"keyword\" :placeholder=\"placeholder\" style=\"width: 100%\" icon=\"search2\"/>\n      </div>\n      <ul v-if=\"getItems && getItems.length\">\n        <li v-for=\"(item, index) in getItems\" :key=\"index\" @click=\"onSelect(item)\">\n          <slot name=\"option\" v-bind=\"item\">\n            {{ item[valueKey] }}\n          </slot>\n        </li>\n      </ul>\n      <div v-else class=\"empty-panel\">{{nodata}}</div>\n      <div class=\"arrow\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\n// import '@/directive';\nexport default {\n  name: 'djOptions',\n  props: {\n    value: [String, Number, Array],\n    valueKey: {\n      type: String,\n      default: 'value'\n    },\n    funquery: Function,\n    search: Boolean,\n    multiple: Boolean,\n    nodata: {\n      type: String,\n      default: '未匹配到数据'\n    },\n    placeholder: {\n      type: String,\n      deafult: 'search...'\n    }\n  },\n  data() {\n    return {\n      keyword: '',\n      items: [],\n      timeout: null,\n      oldValue: ''\n    };\n  },\n  computed: {\n    getItems() {\n      if (!this.keyword) {\n        return this.items;\n      }\n      return this.items.filter(item => item[this.valueKey].search(this.keyword) > -1);\n    }\n  },\n  mounted() {\n    this.onQuery();\n  },\n  watch: {\n    // value: function(o, n) {\n    //   this.onQuery();\n    // }\n  },\n  methods: {\n    onQuery() {\n      if (this.value && this.value == this.oldValue) {\n        return;\n      }\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n        this.timeout = null;\n      }\n      this.timeout = setTimeout(() => {\n        this.funquery && this.funquery(this.value, (list) => {\n          this.oldValue = this.value;\n          this.items = list;\n        });\n      }, 300);\n    },\n    onSelect(item) {\n      this.$emit('input', item[this.valueKey]);\n      this.$emit('select', item[this.valueKey], item);\n    }\n  }\n};\n</script>\n\n"]}]}
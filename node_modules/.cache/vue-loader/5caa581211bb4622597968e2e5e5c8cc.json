{"remainingRequest":"/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangjunxia/work-github/dj-design/packages/select/src/option.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangjunxia/work-github/dj-design/packages/select/src/option.vue","mtime":1676257891926},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnZGpPcHRpb24nLAogIGluamVjdDogWydzZWxlY3QnXSwKICBkYXRhKCl7CiAgICByZXR1cm4gewogICAgICBpc1NlbGVsY3Q6IG51bGwsCiAgICAgIHZpc2libGU6IHRydWUsCiAgICAgIGVtcHR5OiB0cnVlCiAgICB9OwogIH0sCiAgcHJvcHM6IHsKICAgIHZhbHVlOiB7CiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAogICAgbGFiZWw6IHsKICAgICAgZGVmYXVsdDogJycKICAgIH0sCiAgICBkaXNhYmxlZDogQm9vbGVhbgogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGlzTXVsdGlwbGUoKSB7CiAgICAgIHJldHVybiB0aGlzLiRwYXJlbnQubXVsdGlwbGUgfHwgdGhpcy4kcGFyZW50LiRwYXJlbnQubXVsdGlwbGU7CiAgICB9LAogICAgaXNMaW1pdCgpIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0Lm11bHRpcGxlICYmIHRoaXMuc2VsZWN0LmxpbWl0KSB7CiAgICAgICAgcmV0dXJuICF0aGlzLmlzU2VsZWxjdCAmJiB0aGlzLnNlbGVjdC5zZWxlY3RlZC5sZW5ndGggPj0gdGhpcy5zZWxlY3QubGltaXQ7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIGlzRGlzYWJsZWQoKXsKICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWQgfHwgdGhpcy4kcGFyZW50LmRpc2FibGVkOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGxhYmVsOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uKG5ld1ZhbCxvbGRWYWwpIHsKICAgICAgICB0aGlzLiRwYXJlbnQuJHBhcmVudD8uc2xvdFVwZGF0ZUhvb2s/LigpOwogICAgICB9LAogICAgICBkZWVwOiB0cnVlLAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZUNob29zZUxpKCl7CiAgICAgIGlmICh0aGlzLmlzRGlzYWJsZWQgfHwgdGhpcy5pc0xpbWl0KSByZXR1cm47CiAgICAgIGxldCBwYXJlbnQgPSB0aGlzLiRwYXJlbnQuJHBhcmVudCwKICAgICAgICBwYXJlbnRzID0gdGhpcy4kcGFyZW50Lmdyb3VwID8gcGFyZW50LiRwYXJlbnQgOiBwYXJlbnQ7CiAgICAgIHBhcmVudHMuaXNGb2N1cyA9IHBhcmVudHMubXVsdGlwbGUgfHwgcGFyZW50cy5tdWx0aXBsZUFsbDsKICAgICAgcGFyZW50cy4kZW1pdCgnaGFuZGxlT3B0aW9uQ2xpY2snLCBbLi4ucGFyZW50cy5jaGVja0FyciwgLi4uW3RoaXMuJG9wdGlvbnMucHJvcHNEYXRhXV0sIHRoaXMuJG9wdGlvbnMucHJvcHNEYXRhKTsKICAgIH0sCiAgICBoYW5kbGVPcHRpb25TZWxlY3QoZGF0YSl7CiAgICAgIHRoaXMuaXNTZWxlbGN0ID0gQXJyYXkuaXNBcnJheShkYXRhKSA/IGRhdGEgOiBbZGF0YV0uaW5jbHVkZXModGhpcy52YWx1ZSkgOwogICAgfSwKICAgIHJlbW92ZUNsYXNzU2VsZWN0KCl7CiAgICAgIHRoaXMuaXNTZWxlbGN0PW51bGw7CiAgICB9LAogICAgcXVlcnlDaGFuZ2UocXVlcnkpIHsKICAgICAgdGhpcy52aXNpYmxlID0gcXVlcnkgPT09IG51bGwgPyB0cnVlIDogbmV3IFJlZ0V4cCh0aGlzLmVzY2FwZVJlZ2V4cFN0cmluZyhxdWVyeSksICdpJykudGVzdCh0aGlzLmxhYmVsKTsKICAgICAgaWYgKCF0aGlzLnZpc2libGUpIHsKICAgICAgICB0aGlzLnNlbGVjdC5maWx0ZXJDb3VudC0tOwogICAgICB9CiAgICAgIHRoaXMuJHBhcmVudD8ucXVlcnlHcm91cENoYW5nZT8uKCk7CiAgICB9LAogICAgZXNjYXBlUmVnZXhwU3RyaW5nKHZhbHVlID0gJycpIHsKICAgICAgcmV0dXJuIFN0cmluZyh2YWx1ZSkucmVwbGFjZSgvW3xcXHt9KClbXF1eJCsqPy5dL2csICdcXCQmJyk7CiAgICB9CiAgfSwKICBjcmVhdGVkKCl7CiAgICB0aGlzLnNlbGVjdC5maWx0ZXJDb3VudCsrOwogICAgdGhpcy5zZWxlY3Qub3B0aW9uc0NvdW50Kys7CiAgICB0aGlzLiRvbigncXVlcnlDaGFuZ2UnLCB0aGlzLnF1ZXJ5Q2hhbmdlKTsKICAgIHRoaXMuJG9uKCdjaG9vc2VPcHRpb24nLCB0aGlzLmhhbmRsZU9wdGlvblNlbGVjdCk7CiAgICB0aGlzLiRvbigncmVtb3ZlQ2xhc3MnLCB0aGlzLnJlbW92ZUNsYXNzU2VsZWN0KTsKICB9Cn07Cg=="},{"version":3,"sources":["option.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"option.vue","sourceRoot":"packages/select/src","sourcesContent":["<template>\n  <li @click=\"handleChooseLi\"\n    :class=\"{\n      'is-multiple':isMultiple,\n      'is-select':isSelelct,\n      'is-disabled-option':isDisabled || isLimit,\n      'is-visible': visible\n    }\"\n    v-show=\"visible\"\n  >\n  <slot>{{label}}</slot>\n  </li>\n</template>\n\n<script>\nexport default {\n  name: 'djOption',\n  inject: ['select'],\n  data(){\n    return {\n      isSelelct: null,\n      visible: true,\n      empty: true\n    };\n  },\n  props: {\n    value: {\n      default: ''\n    },\n    label: {\n      default: ''\n    },\n    disabled: Boolean\n  },\n  computed: {\n    isMultiple() {\n      return this.$parent.multiple || this.$parent.$parent.multiple;\n    },\n    isLimit() {\n      if (this.select.multiple && this.select.limit) {\n        return !this.isSelelct && this.select.selected.length >= this.select.limit;\n      }\n      return false;\n    },\n    isDisabled(){\n      return this.disabled || this.$parent.disabled;\n    }\n  },\n  watch: {\n    label: {\n      handler: function(newVal,oldVal) {\n        this.$parent.$parent?.slotUpdateHook?.();\n      },\n      deep: true,\n      immediate: true\n    }\n  },\n  methods: {\n    handleChooseLi(){\n      if (this.isDisabled || this.isLimit) return;\n      let parent = this.$parent.$parent,\n        parents = this.$parent.group ? parent.$parent : parent;\n      parents.isFocus = parents.multiple || parents.multipleAll;\n      parents.$emit('handleOptionClick', [...parents.checkArr, ...[this.$options.propsData]], this.$options.propsData);\n    },\n    handleOptionSelect(data){\n      this.isSelelct = Array.isArray(data) ? data : [data].includes(this.value) ;\n    },\n    removeClassSelect(){\n      this.isSelelct=null;\n    },\n    queryChange(query) {\n      this.visible = query === null ? true : new RegExp(this.escapeRegexpString(query), 'i').test(this.label);\n      if (!this.visible) {\n        this.select.filterCount--;\n      }\n      this.$parent?.queryGroupChange?.();\n    },\n    escapeRegexpString(value = '') {\n      return String(value).replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&');\n    }\n  },\n  created(){\n    this.select.filterCount++;\n    this.select.optionsCount++;\n    this.$on('queryChange', this.queryChange);\n    this.$on('chooseOption', this.handleOptionSelect);\n    this.$on('removeClass', this.removeClassSelect);\n  }\n};\n</script>\n"]}]}
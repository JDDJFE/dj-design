{"remainingRequest":"/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangjunxia/work-github/dj-design/packages/editor/src/editor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangjunxia/work-github/dj-design/packages/editor/src/editor.vue","mtime":1675737648892},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBXRWRpdG9yIGZyb20gJ3dhbmdlZGl0b3InOwpjb25zdCB7IEJ0bk1lbnUgfSA9IFdFZGl0b3I7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2RqRWRpdG9yJywKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKICAgIG5hbWU6IHsgLy8g5YWD57Sg5ZCN56ewKOagoemqjCkKICAgICAgdHlwZTogU3RyaW5nICwKICAgICAgZGVmYXVsdDogJycKICAgIH0sCiAgICBoZWlnaHQ6IHsgLy8g57yW6L6R5Zmo55qE6auY5bqmCiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMzAwCiAgICB9LAogICAgekluZGV4OiB7IC8vIOe8lui+keWZqOeahOWxgue6pwogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDEwCiAgICB9LAogICAgcGxhY2Vob2xkZXI6IHsgLy8g6Ieq5a6a5LmJcGxhY2Vob2xkZXLmj5DnpLrmloflrZcKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKICAgIGZvY3VzOiB7IC8vIOaYr+WQpuiHquWKqOiOt+WPlueEpueCuQogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIG1lbnVzOiB7IC8vIOmFjee9ruiPnOWNlQogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCk9PnsKICAgICAgICByZXR1cm4gWwogICAgICAgICAgJ2hlYWQnLAogICAgICAgICAgJ2JvbGQnLAogICAgICAgICAgJ2ZvbnRTaXplJywKICAgICAgICAgICdmb250TmFtZScsCiAgICAgICAgICAnaXRhbGljJywKICAgICAgICAgICd1bmRlcmxpbmUnLAogICAgICAgICAgJ3N0cmlrZVRocm91Z2gnLAogICAgICAgICAgJ2luZGVudCcsCiAgICAgICAgICAnbGluZUhlaWdodCcsCiAgICAgICAgICAnZm9yZUNvbG9yJywKICAgICAgICAgICdiYWNrQ29sb3InLAogICAgICAgICAgJ2xpbmsnLAogICAgICAgICAgJ2xpc3QnLAogICAgICAgICAgJ3RvZG8nLAogICAgICAgICAgJ2p1c3RpZnknLAogICAgICAgICAgJ3F1b3RlJywKICAgICAgICAgICdlbW90aWNvbicsCiAgICAgICAgICAnaW1hZ2UnLAogICAgICAgICAgJ3ZpZGVvJywKICAgICAgICAgICd0YWJsZScsCiAgICAgICAgICAnY29kZScsCiAgICAgICAgICAnc3BsaXRMaW5lJywKICAgICAgICAgICd1bmRvJywKICAgICAgICAgICdyZWRvJwogICAgICAgIF07CiAgICAgIH0KICAgIH0sCiAgICBjb2xvcnM6IHsvLyDphY3nva7popzoibIo5paH5a2X6aKc6Imy44CB6IOM5pmv6ImyKQogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gewogICAgICAgIHJldHVybiBbCiAgICAgICAgICAnIzRkODBiZicsJyNjMjRmNGEnLCcjOGJhYTRhJywnIzdiNWJhMScsJyM0NmFjYzgnLCcjZjk5NjNiJywnI2ZmZmZmZiddOwogICAgICB9CiAgICB9LAogICAgbGluZUhlaWdodHM6IHsgLy8g6KGM6auYCiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiAoKSA9PnsKICAgICAgICByZXR1cm4gWwogICAgICAgICAgJzEnLCAnMS4xNScsICcxLjYnLCAnMicsICcyLjUnLCAnMycKICAgICAgICBdOwogICAgICB9CiAgICB9LAogICAgZm9udE5hbWVzOiB7IC8vIOWtl+S9kwogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gewogICAgICAgIHJldHVybiBbCiAgICAgICAgICAn6buR5L2TJywKICAgICAgICAgICfku7/lrosnLAogICAgICAgICAgJ+alt+S9kycsCiAgICAgICAgICAn5qCH5qW35L2TJywKICAgICAgICAgICfljY7mlofku7/lrosnLAogICAgICAgICAgJ+WNjuaWh+alt+S9kycsCiAgICAgICAgICAn5a6L5L2TJywKICAgICAgICAgICflvq7ova/pm4Xpu5EnLAogICAgICAgICAgJ0FyaWFsJywKICAgICAgICAgICdUYWhvbWEnLAogICAgICAgICAgJ1ZlcmRhbmEnLAogICAgICAgICAgJ1RpbWVzIE5ldyBSb21hbicsCiAgICAgICAgICAnQ291cmllciBOZXcnCiAgICAgICAgXTsKICAgICAgfQogICAgfSwKICAgIHNob3dGdWxsU2NyZWVuOiB7IC8vIOWFqOWxj+aMiemSruaYr+WQpuWxleekugogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgZGlzYWJsZWQ6IHsgLy8g56aB55SoCiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgLy8g5Zu+54mH57G75Z6L6ZmQ5Yi2CiAgICB1cGxvYWRJbWdBY2NlcHQ6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6ICgpID0+IHsKICAgICAgICByZXR1cm4gWydqcGcnLCAnanBlZycsICdwbmcnLCAnZ2lmJywgJ2JtcCddIDsvLyDoi6XkuI3luIzmnJvpmZDliLbnsbvlnovvvIzliJnorr7nva7miJDnqbrmlbDnu4QKICAgICAgfQogICAgfSwKICAgIHVwbG9hZFVybDogeyAvLyDkuIrkvKB1cmwKICAgICAgdHlwZTogU3RyaW5nCiAgICB9LAogICAgZmlsZU5hbWU6IHsgLy8g5LiK5Lyg5paH5Lu25ZCN56ewCiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2ZpbGUnCiAgICB9LAogICAgdXBsb2FkUGFyYW1zOiB7IC8vIOS4iuS8oOihpeWFheWPguaVsAogICAgICB0eXBlOiBPYmplY3QKICAgIH0sCiAgICBpbWdXaWR0aDogeyAvLyDpmZDliLbkuIrkvKDlm77niYflrr3luqYKICAgICAgdHlwZTogTnVtYmVyCiAgICB9LAogICAgaW1nSGVpZ2h0OiB7IC8vIOmZkOWItuS4iuS8oOWbvueJh+mrmOW6pgogICAgICB0eXBlOiBOdW1iZXIKICAgIH0sCiAgICBmaWxlU2l6ZTogeyAvLyDpmZDliLbljZXkuKrmlofku7blpKflsI8g6buY6K6kNU1CCiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogNSAqIDEwMjQgKiAxMDI0CiAgICB9LAogICAgaW1nTWF4V2lkdGg6IHsgLy8g6ZmQ5Yi25LiK5Lyg5Zu+54mH5pyA5aSn5a69CiAgICAgIHR5cGU6IE51bWJlcgogICAgfSwKICAgIGltZ01pbldpZHRoOiB7IC8vIOmZkOWItuS4iuS8oOWbvueJh+acgOWwj+WuvQogICAgICB0eXBlOiBOdW1iZXIKICAgIH0sCiAgICBpbWdNYXhIZWlnaHQ6IHsgLy8g6ZmQ5Yi25LiK5Lyg5Zu+54mH5pyA5aSn6auYCiAgICAgIHR5cGU6IE51bWJlcgogICAgfSwKICAgIGltZ01pbkhlaWdodDogeyAvLyDpmZDliLbkuIrkvKDlm77niYfmnIDlsI/pq5gKICAgICAgdHlwZTogTnVtYmVyCiAgICB9LAogICAgZmlsZUNvdW50OiB7IC8vIOmZkOWItuacgOWkmuS4iuS8oOaWh+S7tuS4quaVsAogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDIwCiAgICB9LAogICAgdXBsb2FkSW1nOiB7IC8vIOWklumDqOiHquWumuS5ieS4iuS8oOWHveaVsAogICAgICB0eXBlOiBGdW5jdGlvbgogICAgfSwKICAgIHVwbG9hZEltZ0FmdGVyOiB7IC8vIOWklumDqOiHquWumuS5ieS4iuS8oOWHveaVsCzmoKHpqozlm77niYfplb/lrr3lkI7miafooYwKICAgICAgdHlwZTogRnVuY3Rpb24KICAgIH0sCiAgICBpbnNlcnRJbWc6IHsgLy8g5YaF6YOo5LiK5Lyg5Ye95pWw5ZCO5oqb5Yiw5aSW6YOo6I635Y+W57uT5p6c5o+S5YWl5Zue5pi+CiAgICAgIHR5cGU6IEZ1bmN0aW9uCiAgICB9LAogICAgY3VzdG9tTWVudTogewogICAgICB0eXBlOiBBcnJheQogICAgfSwKICAgIHNlcGFyYXRlOiB7IC8vIOaYr+WQpuWJjeWQjuerr+WIhuemuwogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgaW1nU29ydDogeyAvLyDmmK/lkKbmlK/mjIHlm77niYfmjpLluo/vvIzpu5jorqTlm77niYflkb3lkI3mlrnlvI/lpoLvvJpkajAwMV94eHgucG5nCiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgc29ydFJ1bGU6IHsgLy8g6Ieq5a6a5LmJ5o6S5bqP5pa55rOV77yM6K+l5pa55rOV6ZyA6KaB6L+U5Zue5o6S5bqP5LmL5ZCO55qE5pWw57uECiAgICAgIHR5cGU6IEZ1bmN0aW9uCiAgICB9LAogICAgdXBsb2FkSW1nU29ydDogeyAvLyDmmK/lkKbpobrluo/kuIrkvKDlm77niYcKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlZGl0b3I6IG51bGwsCiAgICAgIHRpbWVvdXQ6IG51bGwsCiAgICAgIHRpbWVpbjogbnVsbCwKICAgICAgaXNGdWxsU2NyZWVuOiBmYWxzZSwKICAgICAgdmFsOiAnJwogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICB2YWx1ZTogewogICAgICBoYW5kbGVyKCl7CiAgICAgICAgaWYgKHRoaXMuZWRpdG9yKSB7CiAgICAgICAgICBpZiAodGhpcy50aW1lb3V0KSB7CiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpOwogICAgICAgICAgfQogICAgICAgICAgbGV0IHZhbHVlMSA9IHRoaXMudmFsdWU7CiAgICAgICAgICBsZXQgdmFsdWUyID0gdGhpcy5lZGl0b3IudHh0Lmh0bWwoKTsKICAgICAgICAgIHRoaXMudGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBpZiAodmFsdWUxICE9IHZhbHVlMikgewogICAgICAgICAgICAgIHRoaXMuZWRpdG9yLnR4dC5odG1sKHRoaXMudmFsdWUucmVwbGFjZSgvPlxzKzwvZywgJz48JykpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2dldEh0bWwnLHRoaXMuZWRpdG9yLnR4dC5odG1sKCkpOyAvLyDojrflj5ZodG1sCiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2dldFRleHQnLHRoaXMuZWRpdG9yLnR4dC50ZXh0KCkpOyAvLyDojrflj5Z0ZXh0CiAgICAgICAgICB9LCA1MDApOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZQogICAgfSwKICAgIGRpc2FibGVkOiB7CiAgICAgIGhhbmRsZXIoKXsKICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCl7CiAgICAgICAgICB0aGlzLmVkaXRvci5kaXNhYmxlKCk7IC8vIOemgeeUqAogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmVkaXRvci5lbmFibGUoKTsgLy8g6Kej6Zmk56aB55SoCiAgICAgICAgfQogICAgICB9LAogICAgICBkZWVwOiB0cnVlCiAgICB9CiAgfSwKICBhc3luYyBtb3VudGVkKCkgewogICAgLy8gY29uc3QgJGVsZW0gPSBXRWRpdG9yLiQoCiAgICAvLyAgIGA8ZGl2IGNsYXNzPSJ3LWUtbWVudSI+CiAgICAvLyAgICAgICAgICAgICAgICAgICAgIDxidXR0b24+5bCP56iL5bqPPC9idXR0b24+CiAgICAvLyAgICAgICAgICAgICAgICAgPC9kaXY+YAogICAgLy8gKTsKICAgIHRoaXMuZWRpdG9yID0gbmV3IFdFZGl0b3IodGhpcy4kcmVmcy5lZGl0b3IpOwogICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICBpZiAodGhpcy52YWx1ZSAmJiB0aGlzLmVkaXRvciAmJiB0aGlzLmVkaXRvci50eHQgJiYgdGhpcy5lZGl0b3IudHh0Lmh0bWwoKSAhPSB0aGlzLnZhbHVlKSB7CiAgICAgICAgdGhpcy5lZGl0b3IudHh0Lmh0bWwodGhpcy52YWx1ZSk7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5lZGl0b3IuY29uZmlnLm9uY2hhbmdlID0gKGh0bWwpID0+IHsKICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCBodG1sLnRyaW0oKSk7CiAgICB9OwogICAgdGhpcy5lZGl0b3IuY29uZmlnLm9uYmx1ciA9IChuZXdIdG1sKSA9PiB7IC8vIOWkseWOu+eEpueCueS6i+S7tgogICAgICB0aGlzLiRlbWl0KCdvbkJsdXInLG5ld0h0bWwpOyAvLyDojrflj5bmnIDmlrDnmoQgaHRtbCDlhoXlrrkKICAgIH07CiAgICB0aGlzLmVkaXRvci5jb25maWcub25mb2N1cyA9IChuZXdIdG1sKSA9PiB7IC8vIOiOt+WPlueEpueCueS6i+S7tgogICAgICB0aGlzLiRlbWl0KCdvbkZvY3VzJyxuZXdIdG1sKTsgLy8g6I635Y+W5pyA5paw55qEIGh0bWwg5YaF5a65CiAgICB9OwoKICAgIC8vIOaPkuWFpee9kee7nOWbvueJh+aIluS4iuS8oOWbvueJh+eahOWbnuiwgyBzcmM65Zu+54mHc3JjICxhbHQ65Zu+54mH5paH5a2X6K+05piOICxocmVmOui3s+i9rOmTvuaOpQogICAgdGhpcy5lZGl0b3IuY29uZmlnLmxpbmtJbWdDYWxsYmFjayA9IChzcmMsYWx0LGhyZWYpID0+IHsKICAgICAgdGhpcy4kZW1pdCgnbGlua0ltZ0NhbGxiYWNrJywgc3JjLGFsdCxocmVmKTsKICAgIH07CiAgICB0aGlzLmVkaXRvci5jb25maWcuaGVpZ2h0PXRoaXMuaGVpZ2h0OyAvLyDorr7nva7pq5jluqYKICAgIHRoaXMuZWRpdG9yLmNvbmZpZy56SW5kZXggPSB0aGlzLnpJbmRleDsgLy8g6K6+572uaW5kZXgs57yW6L6R5Zmo55qE5bGC57qnCiAgICB0aGlzLmVkaXRvci5jb25maWcucGxhY2Vob2xkZXIgPSB0aGlzLnBsYWNlaG9sZGVyOyAvLyDoh6rlrprkuYkgcGxhY2Vob2xkZXIg5o+Q56S65paH5a2XCiAgICB0aGlzLmVkaXRvci5jb25maWcuZm9jdXM9dGhpcy5mb2N1czsgLy8g6buY6K6k6L+b5p2l5piv5ZCm6I635Y+W54Sm54K5CiAgICB0aGlzLmVkaXRvci5jb25maWcubWVudXM9dGhpcy5tZW51czsgLy8g6YWN572u6I+c5Y2VCiAgICB0aGlzLmVkaXRvci5jb25maWcuY29sb3JzPXRoaXMuY29sb3JzOyAvLyDphY3nva7popzoibLvvIjmloflrZfpopzoibLvvIzog4zmma/popzoibLvvIkKICAgIHRoaXMuZWRpdG9yLmNvbmZpZy5saW5lSGVpZ2h0cz10aGlzLmxpbmVIZWlnaHRzOyAvLyDooYzpq5gKICAgIHRoaXMuZWRpdG9yLmNvbmZpZy5mb250TmFtZXM9dGhpcy5mb250TmFtZXM7IC8vIOiuvue9ruWtl+S9kwogICAgdGhpcy5lZGl0b3IuY29uZmlnLnNob3dGdWxsU2NyZWVuID0gdGhpcy5zaG93RnVsbFNjcmVlbjsvLyDlhajlsY8KICAgIHRoaXMuZWRpdG9yLmNvbmZpZy51cGxvYWRJbWdBY2NlcHQ9dGhpcy51cGxvYWRJbWdBY2NlcHQ7IC8vIOmZkOWItuS4iuS8oOexu+WeiwogICAgdGhpcy5lZGl0b3IuY29uZmlnLnVwbG9hZEltZ01heFNpemUgPSB0aGlzLmZpbGVTaXplOwogICAgdGhpcy5lZGl0b3IuY29uZmlnLnVwbG9hZEltZ01heExlbmd0aCA9IHRoaXMuZmlsZUNvdW50OwogICAgdGhpcy5lZGl0b3IuY29uZmlnLmN1c3RvbVVwbG9hZEltZyA9IGFzeW5jKGZpbGVzLCBpbnNlcnQpID0+IHsKICAgICAgaWYgKHRoaXMudXBsb2FkSW1nKSB7CiAgICAgICAgdGhpcy51cGxvYWRJbWcoZmlsZXMsIGluc2VydCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICh0aGlzLmltZ1NvcnQpIHsKICAgICAgICBmaWxlcyA9IHRoaXNbdGhpcy5zb3J0UnVsZSA/ICdzb3J0UnVsZScgOiAnZ2V0U29ydEZpbGUnXShmaWxlcyk7CiAgICAgIH0KICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7CiAgICAgICAgaWYgKHRoaXMuaW1nU29ydCB8fCB0aGlzLnVwbG9hZEltZ1NvcnQgKSB7CiAgICAgICAgICBhd2FpdCB0aGlzLmltZ1Byb21pc2UoZmlsZSwgaW5zZXJ0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5pbWdQcm9taXNlKGZpbGUsIGluc2VydCk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwogICAgdGhpcy5lZGl0b3IuY29uZmlnLmN1c3RvbUFsZXJ0ID0gKGluZm8pID0+IHsgLy8g6Ieq5a6a5LmJ6ZSZ6K+v5o+Q56S677yM5LiN55So5Y6f5pys55qEYWxlcnQKICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihpbmZvKTsKICAgIH07CiAgICBpZiAodGhpcy5jdXN0b21NZW51KSB7CiAgICAgIHRoaXMuY3JlYXRlQ3VzdGltTWVudXMoKTsKICAgIH0KCgogICAgdGhpcy5lZGl0b3IuY3JlYXRlKCk7CiAgICBpZiAodGhpcy5kaXNhYmxlZCkgewogICAgICB0aGlzLmVkaXRvci5kaXNhYmxlKCk7IC8vIOemgeeUqAogICAgfSBlbHNlIHsKICAgICAgdGhpcy5lZGl0b3IuZW5hYmxlKCk7IC8vIOino+mZpOemgeeUqAogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5Zu+54mH5LiK5Lyg5aSE55CGCiAgICBhc3luYyBpbWdQcm9taXNlKGZpbGUsIGluc2VydCkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgbGV0IHIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgIHIucmVhZEFzRGF0YVVSTChmaWxlKTsKICAgICAgICByLm9ubG9hZCA9IGFzeW5jKHJlKSA9PiB7CiAgICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7CiAgICAgICAgICB2YXIgYmFzZTY0VXJsID0gcmUuY3VycmVudFRhcmdldC5yZXN1bHQ7CiAgICAgICAgICBpbWcuc3JjID0gYmFzZTY0VXJsOwogICAgICAgICAgaW1nLm9ubG9hZCA9IGFzeW5jKGllKSA9PiB7CiAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrSW1nKGllKSkgewogICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMudXBsb2FkKGZpbGUpOwogICAgICAgICAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgIHRoaXMuaW5zZXJ0SW1nKHJlc3VsdCxpbnNlcnQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXNvbHZlKHRydWUpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH07CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWbvueJh+WwuuWvuOagoemqjAogICAgY2hlY2tJbWcoaWUpIHsKICAgICAgdmFyIGltZ1dpZHRoID0gaWUuY3VycmVudFRhcmdldC53aWR0aDsKICAgICAgdmFyIGltZ0hlaWdodCA9IGllLmN1cnJlbnRUYXJnZXQuaGVpZ2h0OwogICAgICBpZiAodGhpcy5pbWdXaWR0aCAmJiB0aGlzLmltZ0hlaWdodCAmJiAoaW1nV2lkdGggIT0gdGhpcy5pbWdXaWR0aCB8fCBpbWdIZWlnaHQgIT0gdGhpcy5pbWdIZWlnaHQpKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihg5Zu+54mH5bqU5Li6JHt0aGlzLmltZ1dpZHRofSoke3RoaXMuaW1nSGVpZ2h0fSznjrDkuLoke2ltZ1dpZHRofSoke2ltZ0hlaWdodH1gKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuaW1nV2lkdGggJiYgaW1nV2lkdGggIT0gdGhpcy5pbWdXaWR0aCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoYOWbvueJh+WuveW6puW6lOS4uiR7dGhpcy5pbWdXaWR0aH1weCznjrDkuLoke2ltZ1dpZHRofXB4YCk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmICh0aGlzLmltZ0hlaWdodCAmJiBpbWdIZWlnaHQgIT0gdGhpcy5pbWdIZWlnaHQpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGDlm77niYfpq5jluqblupTkuLoke3RoaXMuaW1nSGVpZ2h0fXB4LOeOsOS4uiR7aW1nSGVpZ2h0fXB4YCk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICBpZiAoIXRoaXMuaW1nV2lkdGgpIHsKICAgICAgICBpZiAodGhpcy5pbWdNaW5XaWR0aCAmJiB0aGlzLmltZ01heFdpZHRoKSB7CiAgICAgICAgICBpZiAoaW1nV2lkdGggPCB0aGlzLmltZ01pbldpZHRoIHx8IGltZ1dpZHRoID4gdGhpcy5pbWdNYXhXaWR0aCkgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGDlm77niYflrr3luqbpmZDliLYke3RoaXMuaW1nTWluV2lkdGh9fiR7dGhpcy5pbWdNYXhXaWR0aH0s546w5Li6JHtpbWdXaWR0aH1gKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5pbWdNYXhXaWR0aCkgewogICAgICAgICAgaWYgKGltZ1dpZHRoID4gdGhpcy5pbWdNYXhXaWR0aCkgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGDlm77niYflrr3luqblupTlsI/kuo4ke3RoaXMuaW1nTWF4V2lkdGh9cHgs546w5Li6JHtpbWdXaWR0aH1weGApOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmltZ01pbldpZHRoKSB7CiAgICAgICAgICBpZiAoaW1nV2lkdGggPCB0aGlzLmltZ01pbldpZHRoKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoYOWbvueJh+WuveW6puW6lOWkp+S6jiR7dGhpcy5pbWdNaW5XaWR0aH1weCznjrDkuLoke2ltZ1dpZHRofXB4YCk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy5pbWdIZWlnaHQpIHsKICAgICAgICBpZiAoIHRoaXMuaW1nTWluSGVpZ2h0ICYmIHRoaXMuaW1nTWF4SGVpZ2h0KSB7CiAgICAgICAgICBpZiAoaW1nSGVpZ2h0IDwgdGhpcy5pbWdNaW5IZWlnaHQgfHwgaW1nSGVpZ2h0ID4gdGhpcy5pbWdNYXhIZWlnaHQpIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihg5Zu+54mH6auY5bqm6ZmQ5Yi2JHt0aGlzLmltZ01pbkhlaWdodH1+JHt0aGlzLmltZ01heEhlaWdodH0s546w5Li6JHtpbWdIZWlnaHR9YCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaW1nTWF4SGVpZ2h0KSB7CiAgICAgICAgICBpZiAoaW1nSGVpZ2h0ID4gdGhpcy5pbWdNYXhIZWlnaHQpIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihg5Zu+54mH6auY5bqm5bqU5bCP5LqOJHt0aGlzLmltZ01heEhlaWdodH1weCznjrDkuLoke2ltZ0hlaWdodH1weGApOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmltZ01pbkhlaWdodCkgewogICAgICAgICAgaWYgKGltZ0hlaWdodCA8IHRoaXMuaW1nTWluSGVpZ2h0KSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoYOWbvueJh+mrmOW6puW6lOWkp+S6jiR7dGhpcy5pbWdNaW5IZWlnaHR9cHgs546w5Li6JHtpbWdIZWlnaHR9cHhgKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHRoaXMudXBsb2FkSW1nQWZ0ZXIpIHsKICAgICAgICB0aGlzLnVwbG9hZEltZ0FmdGVyKGZpbGVzLCBpbnNlcnQpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0sCiAgICAvLyDmlofku7bkuIrkvKAKICAgIHVwbG9hZChmaWxlKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdGhpcy4kbG9hZGVyLnNob3coKTsKICAgICAgICBpZiAodGhpcy4kYXhpb3MpIHsKICAgICAgICAgIHRoaXMuJGF4aW9zLnVwbG9hZCgKICAgICAgICAgICAgdGhpcy51cGxvYWRVcmwsCiAgICAgICAgICAgIHRoaXMudXBsb2FkUGFyYW1zIHx8IHt9LAogICAgICAgICAgICBmaWxlCiAgICAgICAgICApLnRoZW4oKHJlc3VsdCkgPT4gewogICAgICAgICAgICB0aGlzLiRsb2FkZXIuaGlkZSgpOwogICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7CiAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuJGxvYWRlci5oaWRlKCk7CiAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJGFqYXgudXBsb2FkKHsKICAgICAgICAgICAgdXJsOiB0aGlzLnVwbG9hZFVybCwKICAgICAgICAgICAgZGF0YTogdGhpcy51cGxvYWRQYXJhbXMgfHwge30sCiAgICAgICAgICAgIHN1Y2Nlc3M6IChyZXN1bHQpID0+IHsKICAgICAgICAgICAgCXRoaXMuJGxvYWRlci5oaWRlKCk7CiAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBlcnJvcjogKCkgPT4gewogICAgICAgICAgICAJdGhpcy4kbG9hZGVyLmhpZGUoKTsKICAgICAgICAgICAgICByZXNvbHZlKGZhbHNlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgZmlsZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDpu5jorqTmjpLluo/mlrnms5UKICAgIGdldFNvcnRGaWxlKGZpbGVzKSB7CiAgICAgIGNvbnN0IG5ld2ZpbGVzID0gZmlsZXMuZmlsdGVyKHYgPT4gewogICAgICAgIHJldHVybiB0aGlzLmdldFNvcnROYW1lKHYubmFtZSk7CiAgICAgIH0pOwogICAgICBuZXdmaWxlcy5zb3J0KChhLGIpID0+IHsKICAgICAgICBjb25zdCBuYW1lQSA9IE51bWJlcih0aGlzLmdldFNvcnROYW1lKGEubmFtZSkpOwogICAgICAgIGNvbnN0IG5hbWVCID0gTnVtYmVyKHRoaXMuZ2V0U29ydE5hbWUoYi5uYW1lKSk7CiAgICAgICAgcmV0dXJuIG5hbWVBIC0gbmFtZUI7CiAgICAgIH0pOwogICAgICByZXR1cm4gbmV3ZmlsZXM7CiAgICB9LAogICAgLy8g5qCh6aqM5Zu+54mH5ZG95ZCNCiAgICBnZXRTb3J0TmFtZShuYW1lKSB7CiAgICAgIGlmICghbmFtZS5zdGFydHNXaXRoKCdkaicpIHx8IG5hbWUuaW5kZXhPZignXycpIDwgMCB8fCAhTnVtYmVyKG5hbWUuc2xpY2UoMiwgbmFtZS5sYXN0SW5kZXhPZignXycpKSkpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGAke25hbWV9IOS4jeespuWQiOWRveWQjeinhOiMg++8gWApOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICByZXR1cm4gbmFtZS5zbGljZSgyLCBuYW1lLmluZGV4T2YoJ18nKSk7CiAgICB9LAogICAgY3JlYXRlQ3VzdGltTWVudXMoKSB7CiAgICAgIGNvbnN0IHNlbGYgPSB0aGlzOwogICAgICB0aGlzLmN1c3RvbU1lbnUuZm9yRWFjaCgoZWwsaSkgPT4gewogICAgICAgIGNsYXNzIEluc2VydFhDWE1lbnUgZXh0ZW5kcyBCdG5NZW51IHsKICAgICAgICAgIGNvbnN0cnVjdG9yKGVkaXRvcikgewogICAgICAgICAgICBjb25zdCAkZWxlbSA9IFdFZGl0b3IuJCgKICAgICAgICAgICAgICBlbC5pbnNlcnRIdG1sCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHN1cGVyKCRlbGVtLCBlZGl0b3IpOwogICAgICAgICAgfQogICAgICAgICAgLy8g6I+c5Y2V54K55Ye75LqL5Lu2CiAgICAgICAgICBjbGlja0hhbmRsZXIoKSB7CiAgICAgICAgICAgIGVsLmluc2VydENhbGxiYWNrKGVsLHNlbGYpOwogICAgICAgICAgfQogICAgICAgICAgLy8g6I+c5Y2V5r+A5rS754q25oCBCiAgICAgICAgICB0cnlDaGFuZ2VBY3RpdmUoKSB7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIOazqOWGjOiPnOWNlQogICAgICAgIHRoaXMuZWRpdG9yLm1lbnVzLmV4dGVuZChlbC5pbnNlcnROYW1lLCBJbnNlcnRYQ1hNZW51KTsKCiAgICAgICAgLy8g6YeN5paw6YWN572uIGVkaXRvci5jb25maWcubWVudXMKICAgICAgICB0aGlzLmVkaXRvci5jb25maWcubWVudXMgPSB0aGlzLmVkaXRvci5jb25maWcubWVudXMuY29uY2F0KGVsLmluc2VydE5hbWUpOwogICAgICB9KTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["editor.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"editor.vue","sourceRoot":"packages/editor/src","sourcesContent":["<template>\n  <div :class=\"['dj-editor',{'dj-editor-disabled': disabled}]\">\n    <input type=\"hidden\" :name=\"name\" :value=\"value\"/>\n    <div ref=\"editor\"></div>\n  </div>\n</template>\n\n<script>\nimport WEditor from 'wangeditor';\nconst { BtnMenu } = WEditor;\n\nexport default {\n  name: 'djEditor',\n  props: {\n    value: {\n      type: String,\n      default: ''\n    },\n    name: { // 元素名称(校验)\n      type: String ,\n      default: ''\n    },\n    height: { // 编辑器的高度\n      type: Number,\n      default: 300\n    },\n    zIndex: { // 编辑器的层级\n      type: Number,\n      default: 10\n    },\n    placeholder: { // 自定义placeholder提示文字\n      type: String,\n      default: ''\n    },\n    focus: { // 是否自动获取焦点\n      type: Boolean,\n      default: false\n    },\n    menus: { // 配置菜单\n      type: Array,\n      default: ()=>{\n        return [\n          'head',\n          'bold',\n          'fontSize',\n          'fontName',\n          'italic',\n          'underline',\n          'strikeThrough',\n          'indent',\n          'lineHeight',\n          'foreColor',\n          'backColor',\n          'link',\n          'list',\n          'todo',\n          'justify',\n          'quote',\n          'emoticon',\n          'image',\n          'video',\n          'table',\n          'code',\n          'splitLine',\n          'undo',\n          'redo'\n        ];\n      }\n    },\n    colors: {// 配置颜色(文字颜色、背景色)\n      type: Array,\n      default: () => {\n        return [\n          '#4d80bf','#c24f4a','#8baa4a','#7b5ba1','#46acc8','#f9963b','#ffffff'];\n      }\n    },\n    lineHeights: { // 行高\n      type: Array,\n      default: () =>{\n        return [\n          '1', '1.15', '1.6', '2', '2.5', '3'\n        ];\n      }\n    },\n    fontNames: { // 字体\n      type: Array,\n      default: () => {\n        return [\n          '黑体',\n          '仿宋',\n          '楷体',\n          '标楷体',\n          '华文仿宋',\n          '华文楷体',\n          '宋体',\n          '微软雅黑',\n          'Arial',\n          'Tahoma',\n          'Verdana',\n          'Times New Roman',\n          'Courier New'\n        ];\n      }\n    },\n    showFullScreen: { // 全屏按钮是否展示\n      type: Boolean,\n      default: true\n    },\n    disabled: { // 禁用\n      type: Boolean,\n      default: false\n    },\n    // 图片类型限制\n    uploadImgAccept: {\n      type: Array,\n      default: () => {\n        return ['jpg', 'jpeg', 'png', 'gif', 'bmp'] ;// 若不希望限制类型，则设置成空数组\n      }\n    },\n    uploadUrl: { // 上传url\n      type: String\n    },\n    fileName: { // 上传文件名称\n      type: String,\n      default: 'file'\n    },\n    uploadParams: { // 上传补充参数\n      type: Object\n    },\n    imgWidth: { // 限制上传图片宽度\n      type: Number\n    },\n    imgHeight: { // 限制上传图片高度\n      type: Number\n    },\n    fileSize: { // 限制单个文件大小 默认5MB\n      type: Number,\n      default: 5 * 1024 * 1024\n    },\n    imgMaxWidth: { // 限制上传图片最大宽\n      type: Number\n    },\n    imgMinWidth: { // 限制上传图片最小宽\n      type: Number\n    },\n    imgMaxHeight: { // 限制上传图片最大高\n      type: Number\n    },\n    imgMinHeight: { // 限制上传图片最小高\n      type: Number\n    },\n    fileCount: { // 限制最多上传文件个数\n      type: Number,\n      default: 20\n    },\n    uploadImg: { // 外部自定义上传函数\n      type: Function\n    },\n    uploadImgAfter: { // 外部自定义上传函数,校验图片长宽后执行\n      type: Function\n    },\n    insertImg: { // 内部上传函数后抛到外部获取结果插入回显\n      type: Function\n    },\n    customMenu: {\n      type: Array\n    },\n    separate: { // 是否前后端分离\n      type: Boolean,\n      default: true\n    },\n    imgSort: { // 是否支持图片排序，默认图片命名方式如：dj001_xxx.png\n      type: Boolean,\n      default: false\n    },\n    sortRule: { // 自定义排序方法，该方法需要返回排序之后的数组\n      type: Function\n    },\n    uploadImgSort: { // 是否顺序上传图片\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      editor: null,\n      timeout: null,\n      timein: null,\n      isFullScreen: false,\n      val: ''\n    };\n  },\n  watch: {\n    value: {\n      handler(){\n        if (this.editor) {\n          if (this.timeout) {\n            clearTimeout(this.timeout);\n          }\n          let value1 = this.value;\n          let value2 = this.editor.txt.html();\n          this.timeout = setTimeout(() => {\n            if (value1 != value2) {\n              this.editor.txt.html(this.value.replace(/>\\s+</g, '><'));\n            }\n            this.$emit('getHtml',this.editor.txt.html()); // 获取html\n            this.$emit('getText',this.editor.txt.text()); // 获取text\n          }, 500);\n        }\n      },\n      deep: true\n    },\n    disabled: {\n      handler(){\n        if (this.disabled){\n          this.editor.disable(); // 禁用\n        } else {\n          this.editor.enable(); // 解除禁用\n        }\n      },\n      deep: true\n    }\n  },\n  async mounted() {\n    // const $elem = WEditor.$(\n    //   `<div class=\"w-e-menu\">\n    //                     <button>小程序</button>\n    //                 </div>`\n    // );\n    this.editor = new WEditor(this.$refs.editor);\n    this.$nextTick(() => {\n      if (this.value && this.editor && this.editor.txt && this.editor.txt.html() != this.value) {\n        this.editor.txt.html(this.value);\n      }\n    });\n    this.editor.config.onchange = (html) => {\n      this.$emit('input', html.trim());\n    };\n    this.editor.config.onblur = (newHtml) => { // 失去焦点事件\n      this.$emit('onBlur',newHtml); // 获取最新的 html 内容\n    };\n    this.editor.config.onfocus = (newHtml) => { // 获取焦点事件\n      this.$emit('onFocus',newHtml); // 获取最新的 html 内容\n    };\n\n    // 插入网络图片或上传图片的回调 src:图片src ,alt:图片文字说明 ,href:跳转链接\n    this.editor.config.linkImgCallback = (src,alt,href) => {\n      this.$emit('linkImgCallback', src,alt,href);\n    };\n    this.editor.config.height=this.height; // 设置高度\n    this.editor.config.zIndex = this.zIndex; // 设置index,编辑器的层级\n    this.editor.config.placeholder = this.placeholder; // 自定义 placeholder 提示文字\n    this.editor.config.focus=this.focus; // 默认进来是否获取焦点\n    this.editor.config.menus=this.menus; // 配置菜单\n    this.editor.config.colors=this.colors; // 配置颜色（文字颜色，背景颜色）\n    this.editor.config.lineHeights=this.lineHeights; // 行高\n    this.editor.config.fontNames=this.fontNames; // 设置字体\n    this.editor.config.showFullScreen = this.showFullScreen;// 全屏\n    this.editor.config.uploadImgAccept=this.uploadImgAccept; // 限制上传类型\n    this.editor.config.uploadImgMaxSize = this.fileSize;\n    this.editor.config.uploadImgMaxLength = this.fileCount;\n    this.editor.config.customUploadImg = async(files, insert) => {\n      if (this.uploadImg) {\n        this.uploadImg(files, insert);\n        return;\n      }\n      if (this.imgSort) {\n        files = this[this.sortRule ? 'sortRule' : 'getSortFile'](files);\n      }\n      for (const file of files) {\n        if (this.imgSort || this.uploadImgSort ) {\n          await this.imgPromise(file, insert);\n        } else {\n          this.imgPromise(file, insert);\n        }\n      }\n    };\n    this.editor.config.customAlert = (info) => { // 自定义错误提示，不用原本的alert\n      this.$message.error(info);\n    };\n    if (this.customMenu) {\n      this.createCustimMenus();\n    }\n\n\n    this.editor.create();\n    if (this.disabled) {\n      this.editor.disable(); // 禁用\n    } else {\n      this.editor.enable(); // 解除禁用\n    }\n  },\n  methods: {\n    // 图片上传处理\n    async imgPromise(file, insert) {\n      return new Promise(async(resolve, reject) => {\n        let r = new FileReader();\n        r.readAsDataURL(file);\n        r.onload = async(re) => {\n          var img = new Image();\n          var base64Url = re.currentTarget.result;\n          img.src = base64Url;\n          img.onload = async(ie) => {\n            if (this.checkImg(ie)) {\n              const result = await this.upload(file);\n              if (result) {\n                this.insertImg(result,insert);\n              }\n              resolve(true);\n            } else {\n              resolve(false);\n            }\n          };\n        };\n      });\n    },\n    // 图片尺寸校验\n    checkImg(ie) {\n      var imgWidth = ie.currentTarget.width;\n      var imgHeight = ie.currentTarget.height;\n      if (this.imgWidth && this.imgHeight && (imgWidth != this.imgWidth || imgHeight != this.imgHeight)) {\n        this.$message.error(`图片应为${this.imgWidth}*${this.imgHeight},现为${imgWidth}*${imgHeight}`);\n        return false;\n      }\n      if (this.imgWidth && imgWidth != this.imgWidth) {\n        this.$message.error(`图片宽度应为${this.imgWidth}px,现为${imgWidth}px`);\n        return false;\n      }\n      if (this.imgHeight && imgHeight != this.imgHeight) {\n        this.$message.error(`图片高度应为${this.imgHeight}px,现为${imgHeight}px`);\n        return false;\n      }\n\n      if (!this.imgWidth) {\n        if (this.imgMinWidth && this.imgMaxWidth) {\n          if (imgWidth < this.imgMinWidth || imgWidth > this.imgMaxWidth) {\n            this.$message.error(`图片宽度限制${this.imgMinWidth}~${this.imgMaxWidth},现为${imgWidth}`);\n            return;\n          }\n        } else if (this.imgMaxWidth) {\n          if (imgWidth > this.imgMaxWidth) {\n            this.$message.error(`图片宽度应小于${this.imgMaxWidth}px,现为${imgWidth}px`);\n            return false;\n          }\n        } else if (this.imgMinWidth) {\n          if (imgWidth < this.imgMinWidth) {\n            this.$message.error(`图片宽度应大于${this.imgMinWidth}px,现为${imgWidth}px`);\n            return false;\n          }\n        }\n      }\n\n      if (!this.imgHeight) {\n        if ( this.imgMinHeight && this.imgMaxHeight) {\n          if (imgHeight < this.imgMinHeight || imgHeight > this.imgMaxHeight) {\n            this.$message.error(`图片高度限制${this.imgMinHeight}~${this.imgMaxHeight},现为${imgHeight}`);\n            return;\n          }\n        } else if (this.imgMaxHeight) {\n          if (imgHeight > this.imgMaxHeight) {\n            this.$message.error(`图片高度应小于${this.imgMaxHeight}px,现为${imgHeight}px`);\n            return false;\n          }\n        } else if (this.imgMinHeight) {\n          if (imgHeight < this.imgMinHeight) {\n            this.$message.error(`图片高度应大于${this.imgMinHeight}px,现为${imgHeight}px`);\n            return false;\n          }\n        }\n      }\n\n      if (this.uploadImgAfter) {\n        this.uploadImgAfter(files, insert);\n        return false;\n      }\n      return true;\n    },\n    // 文件上传\n    upload(file) {\n      return new Promise((resolve, reject) => {\n        this.$loader.show();\n        if (this.$axios) {\n          this.$axios.upload(\n            this.uploadUrl,\n            this.uploadParams || {},\n            file\n          ).then((result) => {\n            this.$loader.hide();\n            resolve(result);\n          }).catch(() => {\n            this.$loader.hide();\n            resolve(false);\n          });\n        } else {\n          this.$ajax.upload({\n            url: this.uploadUrl,\n            data: this.uploadParams || {},\n            success: (result) => {\n            \tthis.$loader.hide();\n              resolve(result);\n            },\n            error: () => {\n            \tthis.$loader.hide();\n              resolve(false);\n            }\n          }, file);\n        }\n      });\n    },\n    // 默认排序方法\n    getSortFile(files) {\n      const newfiles = files.filter(v => {\n        return this.getSortName(v.name);\n      });\n      newfiles.sort((a,b) => {\n        const nameA = Number(this.getSortName(a.name));\n        const nameB = Number(this.getSortName(b.name));\n        return nameA - nameB;\n      });\n      return newfiles;\n    },\n    // 校验图片命名\n    getSortName(name) {\n      if (!name.startsWith('dj') || name.indexOf('_') < 0 || !Number(name.slice(2, name.lastIndexOf('_')))) {\n        this.$message.error(`${name} 不符合命名规范！`);\n        return false;\n      }\n      return name.slice(2, name.indexOf('_'));\n    },\n    createCustimMenus() {\n      const self = this;\n      this.customMenu.forEach((el,i) => {\n        class InsertXCXMenu extends BtnMenu {\n          constructor(editor) {\n            const $elem = WEditor.$(\n              el.insertHtml\n            );\n            super($elem, editor);\n          }\n          // 菜单点击事件\n          clickHandler() {\n            el.insertCallback(el,self);\n          }\n          // 菜单激活状态\n          tryChangeActive() {\n          }\n        }\n        // 注册菜单\n        this.editor.menus.extend(el.insertName, InsertXCXMenu);\n\n        // 重新配置 editor.config.menus\n        this.editor.config.menus = this.editor.config.menus.concat(el.insertName);\n      });\n    }\n  }\n};\n</script>\n"]}]}
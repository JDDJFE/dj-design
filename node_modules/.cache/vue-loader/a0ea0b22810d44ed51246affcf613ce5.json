{"remainingRequest":"/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangjunxia/work-github/dj-design/packages/steps/src/step.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangjunxia/work-github/dj-design/packages/steps/src/step.vue","mtime":1673509764349},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnZGpTdGVwJywKICBwcm9wczogewogICAgZGlyZWN0aW9uOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2hvcml6b250YWwnCiAgICB9LAogICAgdGl0bGU6IFN0cmluZywKICAgIHN1YlRpdGxlOiBTdHJpbmcsCiAgICBkZXNjcmlwdGlvbjogU3RyaW5nLAogICAgc3RhdHVzOiBTdHJpbmcsCiAgICBpY29uOiBTdHJpbmcKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbmRleDogLTEsCiAgICAgIGludGVybmFsU3RhdHVzOiAnJwogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBpc1NpbXBsZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHBhcmVudC5zaW1wbGU7CiAgICB9LAogICAgY3VycmVudFN0YXR1cygpIHsKICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzIHx8IHRoaXMuaW50ZXJuYWxTdGF0dXM7CiAgICB9LAogICAgcHJldlN0YXR1cygpIHsKICAgICAgY29uc3QgcHJldlN0ZXAgPSB0aGlzLiRwYXJlbnQuc3RlcHNbdGhpcy5pbmRleCAtIDFdOwogICAgICByZXR1cm4gcHJldlN0ZXAgPyBwcmV2U3RlcC5jdXJyZW50U3RhdHVzIDogJ3dhaXQnOwogICAgfQogIH0sCiAgYmVmb3JlQ3JlYXRlKCkgewogICAgdGhpcy4kcGFyZW50LnN0ZXBzLnB1c2godGhpcyk7CiAgfSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgY29uc3Qgc3RlcHMgPSB0aGlzLiRwYXJlbnQuc3RlcHM7CiAgICAvLyBjb25zb2xlLmxvZyhzdGVwcywnc3RlcHMnKTsKICAgIGNvbnN0IGluZGV4ID0gc3RlcHMuaW5kZXhPZih0aGlzKTsKICAgIGlmIChpbmRleCA+PSAwKSB7CiAgICAgIHN0ZXBzLnNwbGljZShpbmRleCwgMSk7CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgY29uc3QgdW53YXRjaCA9IHRoaXMuJHdhdGNoKCdpbmRleCcsIHZhbCA9PiB7CiAgICAgIHRoaXMuJHdhdGNoKCckcGFyZW50LmFjdGl2ZScsIHRoaXMudXBkYXRlU3RhdHVzLCB7aW1tZWRpYXRlOiB0cnVlfSk7CiAgICAgIHRoaXMuJHdhdGNoKCckcGFyZW50LnByb2Nlc3NTdGF0dXMnLCAoKSA9PiB7CiAgICAgICAgY29uc3QgYWN0aXZlSW5kZXggPSB0aGlzLiRwYXJlbnQuYWN0aXZlOwogICAgICAgIHRoaXMudXBkYXRlU3RhdHVzKGFjdGl2ZUluZGV4KTsKICAgICAgfSwge2ltbWVkaWF0ZTogdHJ1ZX0pOwogICAgICB1bndhdGNoKCk7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHVwZGF0ZVN0YXR1cyh2YWwpIHsKICAgICAgLy8gY29uc3QgcHJldkNoaWxkID0gdGhpcy4kcGFyZW50LiRjaGlsZHJlblt0aGlzLmluZGV4IC0gMV07CiAgICAgIGlmICh2YWwgPiB0aGlzLmluZGV4KSB7CiAgICAgICAgdGhpcy5pbnRlcm5hbFN0YXR1cyA9IHRoaXMuJHBhcmVudC5maW5pc2hTdGF0dXM7CiAgICAgIH0gZWxzZSBpZiAodmFsID09PSB0aGlzLmluZGV4ICYmIHRoaXMucHJldlN0YXR1cyAhPT0gJ2Vycm9yJykgewogICAgICAgIHRoaXMuaW50ZXJuYWxTdGF0dXMgPSB0aGlzLiRwYXJlbnQucHJvY2Vzc1N0YXR1czsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmludGVybmFsU3RhdHVzID0gJ3dhaXQnOwogICAgICB9CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuaW50ZXJuYWxTdGF0dXMsIHRoaXMuaW5kZXgsIHRoaXMuY3VycmVudFN0YXR1cywgJ3VwZGF0ZVN0YXR1cycpOwogICAgICAvLyBpZiAocHJldkNoaWxkKSBwcmV2Q2hpbGQuY2FsY1Byb2dyZXNzKHRoaXMuaW50ZXJuYWxTdGF0dXMpOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["step.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"step.vue","sourceRoot":"packages/steps/src","sourcesContent":["<template>\n  <div\n    class=\"dj-step-item\"\n    :class=\"[\n      `is-${$parent.direction}`,\n      isSimple && 'is-simple',\n      `is-${currentStatus}`,\n      icon && 'dj-step-item-custom'\n      // isLast && !space && !isCenter && 'is-flex',\n      // isCenter && !isVertical && !isSimple && 'is-center'\n     ]\">\n    <div class=\"dj-step-item-container\">\n      <div class=\"dj-step-item-tail\"></div>\n      <div class=\"dj-step-item-icon\">\n        <slot\n          v-if=\"(currentStatus !== 'success' && currentStatus !== 'finish' && currentStatus !== 'error') || icon\"\n          name=\"icon\">\n          <i v-if=\"icon && !isSimple\" class=\"iconfont\" :class=\"[icon]\"></i>\n          <div class=\"dj-step-icon\" v-if=\"!icon && !isSimple\">{{ index + 1 }}</div>\n        </slot>\n        <i\n          v-else-if=\"!isSimple\"\n          :class=\"[((currentStatus === 'success'||currentStatus === 'finish') ? 'check' : 'close')]\"\n          class=\"iconfont is-status\"\n        ></i>\n        <span v-if=\"isSimple\" class=\"dj-step-icon-dot\"></span>\n      </div>\n      <div class=\"dj-step-item-content\">\n        <div class=\"dj-step-item-title\">\n          {{title}}\n          <div v-if=\"subTitle\" :title=\"subTitle\" class=\"dj-step-item-subtitle\">{{subTitle}}</div>\n        </div>\n        <div class=\"dj-step-item-des\">{{description}}</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'djStep',\n  props: {\n    direction: {\n      type: String,\n      default: 'horizontal'\n    },\n    title: String,\n    subTitle: String,\n    description: String,\n    status: String,\n    icon: String\n  },\n  data() {\n    return {\n      index: -1,\n      internalStatus: ''\n    };\n  },\n  computed: {\n    isSimple() {\n      return this.$parent.simple;\n    },\n    currentStatus() {\n      return this.status || this.internalStatus;\n    },\n    prevStatus() {\n      const prevStep = this.$parent.steps[this.index - 1];\n      return prevStep ? prevStep.currentStatus : 'wait';\n    }\n  },\n  beforeCreate() {\n    this.$parent.steps.push(this);\n  },\n  beforeDestroy() {\n    const steps = this.$parent.steps;\n    // console.log(steps,'steps');\n    const index = steps.indexOf(this);\n    if (index >= 0) {\n      steps.splice(index, 1);\n    }\n  },\n  mounted() {\n    const unwatch = this.$watch('index', val => {\n      this.$watch('$parent.active', this.updateStatus, {immediate: true});\n      this.$watch('$parent.processStatus', () => {\n        const activeIndex = this.$parent.active;\n        this.updateStatus(activeIndex);\n      }, {immediate: true});\n      unwatch();\n    });\n  },\n  methods: {\n    updateStatus(val) {\n      // const prevChild = this.$parent.$children[this.index - 1];\n      if (val > this.index) {\n        this.internalStatus = this.$parent.finishStatus;\n      } else if (val === this.index && this.prevStatus !== 'error') {\n        this.internalStatus = this.$parent.processStatus;\n      } else {\n        this.internalStatus = 'wait';\n      }\n      // console.log(this.internalStatus, this.index, this.currentStatus, 'updateStatus');\n      // if (prevChild) prevChild.calcProgress(this.internalStatus);\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n</style>\n"]}]}
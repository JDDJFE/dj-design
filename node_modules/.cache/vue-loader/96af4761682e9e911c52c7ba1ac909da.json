{"remainingRequest":"/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangjunxia/work-github/dj-design/packages/textarea/src/textarea.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangjunxia/work-github/dj-design/packages/textarea/src/textarea.vue","mtime":1673509764360},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2RqVGV4dGFyZWEnLAogIGNvbXBvbmVudHM6IHt9LAogIHByb3BzOiB7CiAgICB2YWx1ZTogU3RyaW5nLAogICAgbmFtZTogU3RyaW5nLAogICAgcm93czogTnVtYmVyLAogICAgY29sczogTnVtYmVyLAogICAgcGxhY2Vob2xkZXI6IFN0cmluZywKICAgIGRpc2FibGVkOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgcmVhZG9ubHk6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBhdXRvZm9jdXM6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBtYXhsZW5ndGg6IE51bWJlciwKICAgIGJ5dGVsZW5ndGg6IE51bWJlciwKICAgIHNob3dtYXhsZW5ndGg6IEJvb2xlYW4sCiAgICBmdW5pbnB1dDogRnVuY3Rpb24KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB2YWw6IHRoaXMudmFsdWUgfHwgJycKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogIH0sCiAgd2F0Y2g6IHsKICAgIHZhbHVlOiBmdW5jdGlvbihuLCBvKSB7CiAgICAgIGlmICh0aGlzLnZhbHVlICE9IHRoaXMudmFsKSB7CiAgICAgICAgdGhpcy52YWwgPSB0aGlzLnZhbHVlOwogICAgICB9CiAgICB9LAogICAgdmFsOiBmdW5jdGlvbihuLCBvKSB7CiAgICAgIHRoaXMuJGVtaXQodGhpcy52YWwpOwogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICB9LAogIG1ldGhvZHM6IHsKICAgIGZvY3VzKCkgewogICAgICB0aGlzLiRyZWZzLnRleHRhcmVhLmZvY3VzKCk7CiAgICB9LAogICAgYmx1cigpIHsKICAgICAgdGhpcy4kcmVmcy50ZXh0YXJlYS5ibHVyKCk7CiAgICB9LAogICAgc2VsZWN0KCkgewogICAgICB0aGlzLiRyZWZzLnRleHRhcmVhLnNlbGVjdCgpOwogICAgfSwKICAgIGhhbmRFdmVudCh0eXBlLCAkZXZlbnQpewogICAgICBpZiAodHlwZSA9PSAnaW5wdXQnKSB7CiAgICAgICAgaWYgKHRoaXMuYnl0ZWxlbmd0aCkgewogICAgICAgICAgdGhpcy52YWwgPSAkZXZlbnQudGFyZ2V0LnZhbHVlID0gdGhpcy5nZXRCeXRlTGVuZ3RoKCRldmVudC50YXJnZXQudmFsdWUsIHRoaXMuYnl0ZWxlbmd0aCk7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmZ1bmlucHV0KSB7CiAgICAgICAgICB0aGlzLnZhbCA9ICRldmVudC50YXJnZXQudmFsdWUgPSB0aGlzLmZ1bmlucHV0KCRldmVudC50YXJnZXQudmFsdWUpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAodHlwZSA9PSAnaW5wdXQnIHx8IHR5cGUgPT0gJ2NoYW5nZScpIHsKICAgICAgICB0aGlzLiRlbWl0KHR5cGUsIHRoaXMudmFsLCAkZXZlbnQpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJGVtaXQodHlwZSwgJGV2ZW50KTsKICAgICAgfQogICAgfSwKICAgIGdldEJ5dGVMZW5ndGgoc3RyLCBsZW5ndGgpIHsKICAgICAgbGV0IGJ5dGVMZW5ndGggPSAwOwogICAgICBsZXQgYnl0ZVN0ciA9ICcnOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykgewogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4CiAgICAgICAgaWYgKHN0cltpXS5tYXRjaChuZXcgUmVnRXhwKCdbXlx4MDAtXHhmZl0nLCAnaWcnKSkpIHsKICAgICAgICAgIGJ5dGVMZW5ndGggKz0gMjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYnl0ZUxlbmd0aCArPSAxOwogICAgICAgIH0KICAgICAgICBpZiAoYnl0ZUxlbmd0aCA8PSBsZW5ndGgpIHsKICAgICAgICAgIGJ5dGVTdHIgKz0gc3RyW2ldOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGJ5dGVTdHI7CiAgICB9LAogICAgZ2V0TGVuZ3RoKHN0cikgewogICAgICBsZXQgYnl0ZUxlbmd0aCA9IDA7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXgKICAgICAgICBpZiAoc3RyW2ldLm1hdGNoKG5ldyBSZWdFeHAoJ1teXHgwMC1ceGZmXScsICdpZycpKSkgewogICAgICAgICAgYnl0ZUxlbmd0aCArPSAyOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBieXRlTGVuZ3RoICs9IDE7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBieXRlTGVuZ3RoOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["textarea.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"textarea.vue","sourceRoot":"packages/textarea/src","sourcesContent":["<template>\n  <div :class=\"['dj-textarea']\">\n    <textarea v-model=\"val\" ref=\"textarea\" :class=\"[{'disabled': disabled}]\" :name=\"name\" :rows=\"rows\" :cols=\"cols\" :readonly=\"readonly\" :autofocus=\"autofocus\" :disabled=\"disabled\" :placeholder=\"placeholder\" :maxlength=\"maxlength\"\n    @input=\"handEvent('input', $event)\" @change=\"handEvent('change', $event)\" @focus=\"handEvent('focus', $event)\" @blur=\"handEvent('blur', $event)\"></textarea>\n    <span v-if=\"showmaxlength\" class=\"textarea-length\">\n      <template v-if=\"bytelength\">{{getLength(val)}}/{{bytelength}}</template>\n      <template v-else-if=\"maxlength\">{{val.length}}/{{maxlength}}</template>\n    </span>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: 'djTextarea',\n  components: {},\n  props: {\n    value: String,\n    name: String,\n    rows: Number,\n    cols: Number,\n    placeholder: String,\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    readonly: {\n      type: Boolean,\n      default: false\n    },\n    autofocus: {\n      type: Boolean,\n      default: false\n    },\n    maxlength: Number,\n    bytelength: Number,\n    showmaxlength: Boolean,\n    funinput: Function\n  },\n  data() {\n    return {\n      val: this.value || ''\n    };\n  },\n  computed: {\n  },\n  watch: {\n    value: function(n, o) {\n      if (this.value != this.val) {\n        this.val = this.value;\n      }\n    },\n    val: function(n, o) {\n      this.$emit(this.val);\n    }\n  },\n  mounted() {\n  },\n  methods: {\n    focus() {\n      this.$refs.textarea.focus();\n    },\n    blur() {\n      this.$refs.textarea.blur();\n    },\n    select() {\n      this.$refs.textarea.select();\n    },\n    handEvent(type, $event){\n      if (type == 'input') {\n        if (this.bytelength) {\n          this.val = $event.target.value = this.getByteLength($event.target.value, this.bytelength);\n        }\n        if (this.funinput) {\n          this.val = $event.target.value = this.funinput($event.target.value);\n        }\n      }\n      if (type == 'input' || type == 'change') {\n        this.$emit(type, this.val, $event);\n      } else {\n        this.$emit(type, $event);\n      }\n    },\n    getByteLength(str, length) {\n      let byteLength = 0;\n      let byteStr = '';\n      for (var i = 0; i < str.length; i++) {\n        // eslint-disable-next-line no-control-regex\n        if (str[i].match(new RegExp('[^\\x00-\\xff]', 'ig'))) {\n          byteLength += 2;\n        } else {\n          byteLength += 1;\n        }\n        if (byteLength <= length) {\n          byteStr += str[i];\n        } else {\n          break;\n        }\n      }\n      return byteStr;\n    },\n    getLength(str) {\n      let byteLength = 0;\n      for (var i = 0; i < str.length; i++) {\n        // eslint-disable-next-line no-control-regex\n        if (str[i].match(new RegExp('[^\\x00-\\xff]', 'ig'))) {\n          byteLength += 2;\n        } else {\n          byteLength += 1;\n        }\n      }\n      return byteLength;\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n</style>\n"]}]}
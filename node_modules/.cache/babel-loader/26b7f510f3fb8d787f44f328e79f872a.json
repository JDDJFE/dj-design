{"remainingRequest":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js!/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangjunxia/work-github/dj-design/packages/messageBox/src/messageBox.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangjunxia/work-github/dj-design/packages/messageBox/src/messageBox.vue","mtime":1676537858398},{"path":"/Users/wangjunxia/work-github/dj-design/babel.config.js","mtime":1660011372032},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0ICogYXMgZG9tIGZyb20gJ0AvdXRpbHMvZG9tJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB2aXNpYmxlOiBmYWxzZSwKICAgICAgdGl0bGU6IG51bGwsCiAgICAgIG1lc3NhZ2U6ICcnLAogICAgICBiZWZvcmVDbG9zZTogbnVsbCwKICAgICAgY2FuY2VsdGV4dDogJ+WPlua2iCcsCiAgICAgIG9rdGV4dDogJ+ehruWumicsCiAgICAgIGNhbmNlbEJ1dHRvblNob3c6IHRydWUsCiAgICAgIHZub2RlOiBmYWxzZSwKICAgICAgYmFja2dyb3VuZDogJ2JsYWNrJywKICAgICAgY2xvc2FibGU6IGZhbHNlLAogICAgICBzaG93Y2xvc2U6IHRydWUsCiAgICAgIHNpemU6ICdtaW5pJywKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgdHlwZTogbnVsbCwKICAgICAgY2xhc3NOYW1lOiAnJwogICAgfTsKICB9LAoKICBjb21wdXRlZDogewogICAgdHlwZUJhY2tncm91bmQoKSB7CiAgICAgIGxldCBuYW1lID0gJ2RqLW1vZGFsLWJhY2tncm91bmQtJzsKICAgICAgcmV0dXJuIHRoaXMuYmFja2dyb3VuZCA9PT0gJ3doaXRlJyA/IGAke25hbWV9d2hpdGVgIDogYCR7bmFtZX1ibGFja2A7CiAgICB9LAoKICAgIHR5cGVJY29uKCkgewogICAgICBjb25zdCB7CiAgICAgICAgdHlwZQogICAgICB9ID0gdGhpczsKICAgICAgcmV0dXJuIHR5cGUgPT09ICdzdWNjZXNzJyAmJiAnY2hlY2stZmlsbGVkJyB8fCB0eXBlID09PSAnZXJyb3InICYmICdjbG9zZS1maWxsZWQnIHx8IHR5cGUgPT09ICd3YXJuaW5nJyAmJiAnY2F1dGlvbi1maWxsZWQnIHx8IHR5cGUgPT09ICdoZWxwJyAmJiAnaGVscC1maWxsZWQnOwogICAgfQoKICB9LAoKICBjcmVhdGVkKCkgewogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5wb3BzdGF0ZSwgZmFsc2UpOwogIH0sCgogIG1vdW50ZWQoKSB7fSwKCiAgbWV0aG9kczogewogICAgZG9DbG9zZSgpIHsKICAgICAgdGhpcy5jcmVhdGVNc2coKTsKICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMucG9wc3RhdGUoKTsKICAgIH0sCgogICAgaGFuZGxlQWN0aW9uKGFjdGlvbikgewogICAgICBjb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpOwogICAgICBsZXQgbW9kYWwgPSB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcuZGotbW9kYWwnKTsKICAgICAgdGhpcy5hY3Rpb24gPSBhY3Rpb247CgogICAgICBpZiAodHlwZW9mIHRoaXMuYmVmb3JlQ2xvc2UgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICB0aGlzLmJlZm9yZUNsb3NlKGFjdGlvbiwgdGhpcywgKCkgPT4gewogICAgICAgICAgaWYgKGFjdGlvbikgewogICAgICAgICAgICB0aGlzLm9rICYmIHRoaXMub2soKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuY2xvc2UgJiYgdGhpcy5jbG9zZSgpOwogICAgICAgICAgfQoKICAgICAgICAgIGRvbS5hZGRDbGFzcyhtb2RhbCwgJ2RqLW1vZGFsLWhpZGUnKTsKCiAgICAgICAgICBpZiAoYm9keS5xdWVyeVNlbGVjdG9yQWxsKCcuZGotbW9kYWwtYmFja2dyb3VuZC5kai1tb2RhbC12aXNpYmxlJykubGVuZ3RoIDw9IDEpIHsKICAgICAgICAgICAgZG9tLmFkZENsYXNzKHRoaXMuJGVsLCAnZGotbW9kYWwtaGlkZScpOwogICAgICAgICAgfSAvLyB0aGlzLmJlZm9yZSA9IG51bGw7CiAgICAgICAgICAvLyB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKCgogICAgICAgICAgdGhpcy50aW1lckZuKCk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGFjdGlvbikgewogICAgICAgICAgdGhpcy5vayAmJiB0aGlzLm9rKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuY2xvc2UgJiYgdGhpcy5jbG9zZSgpOwogICAgICAgIH0KCiAgICAgICAgZG9tLmFkZENsYXNzKG1vZGFsLCAnZGotbW9kYWwtaGlkZScpOwoKICAgICAgICBpZiAoYm9keS5xdWVyeVNlbGVjdG9yQWxsKCcuZGotbW9kYWwtYmFja2dyb3VuZC5kai1tb2RhbC12aXNpYmxlJykubGVuZ3RoIDw9IDEpIHsKICAgICAgICAgIGRvbS5hZGRDbGFzcyh0aGlzLiRlbCwgJ2RqLW1vZGFsLWhpZGUnKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuY2FsbGJhY2soYWN0aW9uLCB0aGlzKTsKICAgICAgICB0aGlzLnRpbWVyRm4oKTsKICAgICAgfQogICAgfSwKCiAgICB0aW1lckZuKCkgewogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLmNyZWF0ZU1zZygpOwogICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlOwogICAgICAgIGxldCB0aW1lciA9IG51bGw7CiAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuJGVsLnBhcmVudE5vZGUgIT09IG51bGwgJiYgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLiRlbCk7CiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpOwogICAgICAgICAgdGltZXIgPSBudWxsOwogICAgICAgIH0sIDEpOwogICAgICB9LCAzMDApOwogICAgfSwKCiAgICBwb3BzdGF0ZSgpIHsKICAgICAgbGV0IGVscyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2RqLW1vZGFsLWJhY2tncm91bmQnKTsKCiAgICAgIGlmIChlbHMpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVscy5sZW5ndGg7IGkrKykgewogICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbHNbaV0pOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;EACAA;IACA;MACAC,cADA;MAEAC,WAFA;MAGAC,WAHA;MAIAC,iBAJA;MAKAC,gBALA;MAMAC,YANA;MAOAC,sBAPA;MAQAC,YARA;MASAC,mBATA;MAUAC,eAVA;MAWAC,eAXA;MAYAC,YAZA;MAaAC,cAbA;MAcAC,eAdA;MAeAC,UAfA;MAgBAC;IAhBA;EAkBA,CApBA;;EAqBAC;IACAC;MACA;MACA;IACA,CAJA;;IAKAC;MACA;QAAAJ;MAAA;MACA,+CACAA,kCADA,IAEAA,sCAFA,IAGAA,gCAHA;IAIA;;EAXA,CArBA;;EAkCAK;IACAC;EACA,CApCA;;EAqCAC,WACA,CAtCA;;EAuCAC;IACAC;MACA;MACA;MACA;IACA,CALA;;IAMAC;MACA;MACA;MAEA;;MACA;QACA;UACA;YACA;UACA,CAFA,MAEA;YACA;UACA;;UACAC;;UACA;YACAA;UACA,CATA,CAUA;UACA;;;UACA;QACA,CAbA;MAcA,CAfA,MAeA;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;;QACAA;;QACA;UACAA;QACA;;QACA;QACA;MACA;IACA,CAvCA;;IAwCAC;MACAC;QACA;QACA;QACA;QACAC;UACA;UACAC;UACAD;QACA,CAJA,EAIA,CAJA;MAKA,CATA,EASA,GATA;IAUA,CAnDA;;IAoDAE;MACA;;MACA;QACA;UACAC;QACA;MACA;IACA;;EA3DA;AAvCA","names":["data","visible","title","message","beforeClose","canceltext","oktext","cancelButtonShow","vnode","background","closable","showclose","size","loading","disabled","type","className","computed","typeBackground","typeIcon","created","window","mounted","methods","doClose","handleAction","dom","timerFn","setTimeout","timer","clearTimeout","popstate","document"],"sourceRoot":"packages/messageBox/src","sources":["messageBox.vue"],"sourcesContent":["<template>\n  <div class=\"dj-modal-background dj-message-box\" :class=\"(visible && 'dj-modal-visible ' || '') + typeBackground + ' ' + className\" v-show=\"visible\" @click=\"(closable && handleAction(false))\">\n    <transition>\n      <div class=\"dj-modal\" :class=\"'dj-modal-' + size\" @click.stop>\n        <div class=\"dj-modal-header\">\n          <slot>\n            <span v-if=\"!vnode\">{{ title }}</span>\n            <span v-else v-html=\"title\"></span>\n          </slot>\n          <i class=\"iconfont close dj-modal-close\"  @click.stop=\"handleAction(null)\"  v-if=\"showclose\"></i>\n        </div>\n        <div class=\"dj-modal-content\">\n          <dj-icon :icon=\"typeIcon\" class=\"dj-message-type\" v-if=\"type\"></dj-icon>\n          <slot>\n            <div class=\"dj-message-inin\">\n              <span v-if=\"!vnode\">{{ message }}</span>\n              <span v-else v-html=\"message\"></span>\n            </div>\n          </slot>\n        </div>\n        <div class=\"dj-modal-footer\">\n          <dj-button @click.stop=\"handleAction(false)\" v-if=\"cancelButtonShow\">{{canceltext}}</dj-button>\n          <span class=\"spacing\"></span>\n          <dj-button type=\"primary\" :loading=\"loading\" :disabled=\"disabled\" @click.stop=\"handleAction(true)\">{{oktext}}</dj-button>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\nimport * as dom from '@/utils/dom';\nexport default {\n  data() {\n    return {\n      visible: false,\n      title: null,\n      message: '',\n      beforeClose: null,\n      canceltext: '取消',\n      oktext: '确定',\n      cancelButtonShow: true,\n      vnode: false,\n      background: 'black',\n      closable: false,\n      showclose: true,\n      size: 'mini',\n      loading: false,\n      disabled: false,\n      type: null,\n      className: ''\n    };\n  },\n  computed: {\n    typeBackground() {\n      let name = 'dj-modal-background-';\n      return this.background === 'white' ? `${name}white` : `${name}black`;\n    },\n    typeIcon() {\n      const { type } = this;\n      return type === 'success' && 'check-filled' ||\n      type === 'error' && 'close-filled' ||\n      type === 'warning' && 'caution-filled' ||\n      type === 'help' && 'help-filled';\n    }\n  },\n  created(){\n    window.addEventListener('popstate', this.popstate, false);\n  },\n  mounted(){\n  },\n  methods: {\n    doClose() {\n      this.createMsg();\n      this.visible = false;\n      this.popstate();\n    },\n    handleAction(action) {\n      const body = document.querySelector('body');\n      let modal = this.$el.querySelector('.dj-modal');\n\n      this.action = action;\n      if (typeof this.beforeClose === 'function') {\n        this.beforeClose(action, this, ()=>{\n          if (action){\n            this.ok && this.ok();\n          } else {\n            this.close && this.close();\n          }\n          dom.addClass(modal, 'dj-modal-hide');\n          if (body.querySelectorAll('.dj-modal-background.dj-modal-visible').length <= 1) {\n            dom.addClass(this.$el, 'dj-modal-hide');\n          }\n          // this.before = null;\n          // this.loading = false;\n          this.timerFn();\n        });\n      } else {\n        if (action){\n          this.ok && this.ok();\n        } else {\n          this.close && this.close();\n        }\n        dom.addClass(modal, 'dj-modal-hide');\n        if (body.querySelectorAll('.dj-modal-background.dj-modal-visible').length <= 1) {\n          dom.addClass(this.$el, 'dj-modal-hide');\n        }\n        this.callback(action, this);\n        this.timerFn();\n      }\n    },\n    timerFn(){\n      setTimeout(() => {\n        this.createMsg();\n        this.visible = false;\n        let timer = null;\n        timer = setTimeout(() => {\n          this.$el.parentNode !== null && document.body.removeChild(this.$el);\n          clearTimeout(timer);\n          timer = null;\n        }, 1);\n      }, 300);\n    },\n    popstate() {\n      let els=document.getElementsByClassName('dj-modal-background');\n      if (els){\n        for (let i=0;i<els.length;i++){\n          document.body.removeChild(els[i]);\n        }\n      }\n    }\n  }\n};\n</script>\n\n<style scoped lang=\"less\"></style>\n"]}]}
{"remainingRequest":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js!/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangjunxia/work-github/dj-design/packages/editor/src/editor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangjunxia/work-github/dj-design/packages/editor/src/editor.vue","mtime":1675737648892},{"path":"/Users/wangjunxia/work-github/dj-design/babel.config.js","mtime":1660011372032},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFdFZGl0b3IgZnJvbSAnd2FuZ2VkaXRvcic7CmNvbnN0IHsKICBCdG5NZW51Cn0gPSBXRWRpdG9yOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2RqRWRpdG9yJywKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKICAgIG5hbWU6IHsKICAgICAgLy8g5YWD57Sg5ZCN56ewKOagoemqjCkKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKICAgIGhlaWdodDogewogICAgICAvLyDnvJbovpHlmajnmoTpq5jluqYKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAzMDAKICAgIH0sCiAgICB6SW5kZXg6IHsKICAgICAgLy8g57yW6L6R5Zmo55qE5bGC57qnCiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMTAKICAgIH0sCiAgICBwbGFjZWhvbGRlcjogewogICAgICAvLyDoh6rlrprkuYlwbGFjZWhvbGRlcuaPkOekuuaWh+WtlwogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAogICAgZm9jdXM6IHsKICAgICAgLy8g5piv5ZCm6Ieq5Yqo6I635Y+W54Sm54K5CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgbWVudXM6IHsKICAgICAgLy8g6YWN572u6I+c5Y2VCiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiAoKSA9PiB7CiAgICAgICAgcmV0dXJuIFsnaGVhZCcsICdib2xkJywgJ2ZvbnRTaXplJywgJ2ZvbnROYW1lJywgJ2l0YWxpYycsICd1bmRlcmxpbmUnLCAnc3RyaWtlVGhyb3VnaCcsICdpbmRlbnQnLCAnbGluZUhlaWdodCcsICdmb3JlQ29sb3InLCAnYmFja0NvbG9yJywgJ2xpbmsnLCAnbGlzdCcsICd0b2RvJywgJ2p1c3RpZnknLCAncXVvdGUnLCAnZW1vdGljb24nLCAnaW1hZ2UnLCAndmlkZW8nLCAndGFibGUnLCAnY29kZScsICdzcGxpdExpbmUnLCAndW5kbycsICdyZWRvJ107CiAgICAgIH0KICAgIH0sCiAgICBjb2xvcnM6IHsKICAgICAgLy8g6YWN572u6aKc6ImyKOaWh+Wtl+minOiJsuOAgeiDjOaZr+iJsikKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6ICgpID0+IHsKICAgICAgICByZXR1cm4gWycjNGQ4MGJmJywgJyNjMjRmNGEnLCAnIzhiYWE0YScsICcjN2I1YmExJywgJyM0NmFjYzgnLCAnI2Y5OTYzYicsICcjZmZmZmZmJ107CiAgICAgIH0KICAgIH0sCiAgICBsaW5lSGVpZ2h0czogewogICAgICAvLyDooYzpq5gKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6ICgpID0+IHsKICAgICAgICByZXR1cm4gWycxJywgJzEuMTUnLCAnMS42JywgJzInLCAnMi41JywgJzMnXTsKICAgICAgfQogICAgfSwKICAgIGZvbnROYW1lczogewogICAgICAvLyDlrZfkvZMKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6ICgpID0+IHsKICAgICAgICByZXR1cm4gWyfpu5HkvZMnLCAn5Lu/5a6LJywgJ+alt+S9kycsICfmoIfmpbfkvZMnLCAn5Y2O5paH5Lu/5a6LJywgJ+WNjuaWh+alt+S9kycsICflrovkvZMnLCAn5b6u6L2v6ZuF6buRJywgJ0FyaWFsJywgJ1RhaG9tYScsICdWZXJkYW5hJywgJ1RpbWVzIE5ldyBSb21hbicsICdDb3VyaWVyIE5ldyddOwogICAgICB9CiAgICB9LAogICAgc2hvd0Z1bGxTY3JlZW46IHsKICAgICAgLy8g5YWo5bGP5oyJ6ZKu5piv5ZCm5bGV56S6CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBkaXNhYmxlZDogewogICAgICAvLyDnpoHnlKgKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICAvLyDlm77niYfnsbvlnovpmZDliLYKICAgIHVwbG9hZEltZ0FjY2VwdDogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gewogICAgICAgIHJldHVybiBbJ2pwZycsICdqcGVnJywgJ3BuZycsICdnaWYnLCAnYm1wJ107IC8vIOiLpeS4jeW4jOacm+mZkOWItuexu+Wei++8jOWImeiuvue9ruaIkOepuuaVsOe7hAogICAgICB9CiAgICB9LAogICAgdXBsb2FkVXJsOiB7CiAgICAgIC8vIOS4iuS8oHVybAogICAgICB0eXBlOiBTdHJpbmcKICAgIH0sCiAgICBmaWxlTmFtZTogewogICAgICAvLyDkuIrkvKDmlofku7blkI3np7AKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnZmlsZScKICAgIH0sCiAgICB1cGxvYWRQYXJhbXM6IHsKICAgICAgLy8g5LiK5Lyg6KGl5YWF5Y+C5pWwCiAgICAgIHR5cGU6IE9iamVjdAogICAgfSwKICAgIGltZ1dpZHRoOiB7CiAgICAgIC8vIOmZkOWItuS4iuS8oOWbvueJh+WuveW6pgogICAgICB0eXBlOiBOdW1iZXIKICAgIH0sCiAgICBpbWdIZWlnaHQ6IHsKICAgICAgLy8g6ZmQ5Yi25LiK5Lyg5Zu+54mH6auY5bqmCiAgICAgIHR5cGU6IE51bWJlcgogICAgfSwKICAgIGZpbGVTaXplOiB7CiAgICAgIC8vIOmZkOWItuWNleS4quaWh+S7tuWkp+WwjyDpu5jorqQ1TUIKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiA1ICogMTAyNCAqIDEwMjQKICAgIH0sCiAgICBpbWdNYXhXaWR0aDogewogICAgICAvLyDpmZDliLbkuIrkvKDlm77niYfmnIDlpKflrr0KICAgICAgdHlwZTogTnVtYmVyCiAgICB9LAogICAgaW1nTWluV2lkdGg6IHsKICAgICAgLy8g6ZmQ5Yi25LiK5Lyg5Zu+54mH5pyA5bCP5a69CiAgICAgIHR5cGU6IE51bWJlcgogICAgfSwKICAgIGltZ01heEhlaWdodDogewogICAgICAvLyDpmZDliLbkuIrkvKDlm77niYfmnIDlpKfpq5gKICAgICAgdHlwZTogTnVtYmVyCiAgICB9LAogICAgaW1nTWluSGVpZ2h0OiB7CiAgICAgIC8vIOmZkOWItuS4iuS8oOWbvueJh+acgOWwj+mrmAogICAgICB0eXBlOiBOdW1iZXIKICAgIH0sCiAgICBmaWxlQ291bnQ6IHsKICAgICAgLy8g6ZmQ5Yi25pyA5aSa5LiK5Lyg5paH5Lu25Liq5pWwCiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMjAKICAgIH0sCiAgICB1cGxvYWRJbWc6IHsKICAgICAgLy8g5aSW6YOo6Ieq5a6a5LmJ5LiK5Lyg5Ye95pWwCiAgICAgIHR5cGU6IEZ1bmN0aW9uCiAgICB9LAogICAgdXBsb2FkSW1nQWZ0ZXI6IHsKICAgICAgLy8g5aSW6YOo6Ieq5a6a5LmJ5LiK5Lyg5Ye95pWwLOagoemqjOWbvueJh+mVv+WuveWQjuaJp+ihjAogICAgICB0eXBlOiBGdW5jdGlvbgogICAgfSwKICAgIGluc2VydEltZzogewogICAgICAvLyDlhoXpg6jkuIrkvKDlh73mlbDlkI7mipvliLDlpJbpg6jojrflj5bnu5Pmnpzmj5LlhaXlm57mmL4KICAgICAgdHlwZTogRnVuY3Rpb24KICAgIH0sCiAgICBjdXN0b21NZW51OiB7CiAgICAgIHR5cGU6IEFycmF5CiAgICB9LAogICAgc2VwYXJhdGU6IHsKICAgICAgLy8g5piv5ZCm5YmN5ZCO56uv5YiG56a7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBpbWdTb3J0OiB7CiAgICAgIC8vIOaYr+WQpuaUr+aMgeWbvueJh+aOkuW6j++8jOm7mOiupOWbvueJh+WRveWQjeaWueW8j+Wmgu+8mmRqMDAxX3h4eC5wbmcKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBzb3J0UnVsZTogewogICAgICAvLyDoh6rlrprkuYnmjpLluo/mlrnms5XvvIzor6Xmlrnms5XpnIDopoHov5Tlm57mjpLluo/kuYvlkI7nmoTmlbDnu4QKICAgICAgdHlwZTogRnVuY3Rpb24KICAgIH0sCiAgICB1cGxvYWRJbWdTb3J0OiB7CiAgICAgIC8vIOaYr+WQpumhuuW6j+S4iuS8oOWbvueJhwogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlZGl0b3I6IG51bGwsCiAgICAgIHRpbWVvdXQ6IG51bGwsCiAgICAgIHRpbWVpbjogbnVsbCwKICAgICAgaXNGdWxsU2NyZWVuOiBmYWxzZSwKICAgICAgdmFsOiAnJwogICAgfTsKICB9LAoKICB3YXRjaDogewogICAgdmFsdWU6IHsKICAgICAgaGFuZGxlcigpIHsKICAgICAgICBpZiAodGhpcy5lZGl0b3IpIHsKICAgICAgICAgIGlmICh0aGlzLnRpbWVvdXQpIHsKICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7CiAgICAgICAgICB9CgogICAgICAgICAgbGV0IHZhbHVlMSA9IHRoaXMudmFsdWU7CiAgICAgICAgICBsZXQgdmFsdWUyID0gdGhpcy5lZGl0b3IudHh0Lmh0bWwoKTsKICAgICAgICAgIHRoaXMudGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBpZiAodmFsdWUxICE9IHZhbHVlMikgewogICAgICAgICAgICAgIHRoaXMuZWRpdG9yLnR4dC5odG1sKHRoaXMudmFsdWUucmVwbGFjZSgvPlxzKzwvZywgJz48JykpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLiRlbWl0KCdnZXRIdG1sJywgdGhpcy5lZGl0b3IudHh0Lmh0bWwoKSk7IC8vIOiOt+WPlmh0bWwKCiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2dldFRleHQnLCB0aGlzLmVkaXRvci50eHQudGV4dCgpKTsgLy8g6I635Y+WdGV4dAogICAgICAgICAgfSwgNTAwKTsKICAgICAgICB9CiAgICAgIH0sCgogICAgICBkZWVwOiB0cnVlCiAgICB9LAogICAgZGlzYWJsZWQ6IHsKICAgICAgaGFuZGxlcigpIHsKICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkgewogICAgICAgICAgdGhpcy5lZGl0b3IuZGlzYWJsZSgpOyAvLyDnpoHnlKgKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5lZGl0b3IuZW5hYmxlKCk7IC8vIOino+mZpOemgeeUqAogICAgICAgIH0KICAgICAgfSwKCiAgICAgIGRlZXA6IHRydWUKICAgIH0KICB9LAoKICBhc3luYyBtb3VudGVkKCkgewogICAgLy8gY29uc3QgJGVsZW0gPSBXRWRpdG9yLiQoCiAgICAvLyAgIGA8ZGl2IGNsYXNzPSJ3LWUtbWVudSI+CiAgICAvLyAgICAgICAgICAgICAgICAgICAgIDxidXR0b24+5bCP56iL5bqPPC9idXR0b24+CiAgICAvLyAgICAgICAgICAgICAgICAgPC9kaXY+YAogICAgLy8gKTsKICAgIHRoaXMuZWRpdG9yID0gbmV3IFdFZGl0b3IodGhpcy4kcmVmcy5lZGl0b3IpOwogICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICBpZiAodGhpcy52YWx1ZSAmJiB0aGlzLmVkaXRvciAmJiB0aGlzLmVkaXRvci50eHQgJiYgdGhpcy5lZGl0b3IudHh0Lmh0bWwoKSAhPSB0aGlzLnZhbHVlKSB7CiAgICAgICAgdGhpcy5lZGl0b3IudHh0Lmh0bWwodGhpcy52YWx1ZSk7CiAgICAgIH0KICAgIH0pOwoKICAgIHRoaXMuZWRpdG9yLmNvbmZpZy5vbmNoYW5nZSA9IGh0bWwgPT4gewogICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIGh0bWwudHJpbSgpKTsKICAgIH07CgogICAgdGhpcy5lZGl0b3IuY29uZmlnLm9uYmx1ciA9IG5ld0h0bWwgPT4gewogICAgICAvLyDlpLHljrvnhKbngrnkuovku7YKICAgICAgdGhpcy4kZW1pdCgnb25CbHVyJywgbmV3SHRtbCk7IC8vIOiOt+WPluacgOaWsOeahCBodG1sIOWGheWuuQogICAgfTsKCiAgICB0aGlzLmVkaXRvci5jb25maWcub25mb2N1cyA9IG5ld0h0bWwgPT4gewogICAgICAvLyDojrflj5bnhKbngrnkuovku7YKICAgICAgdGhpcy4kZW1pdCgnb25Gb2N1cycsIG5ld0h0bWwpOyAvLyDojrflj5bmnIDmlrDnmoQgaHRtbCDlhoXlrrkKICAgIH07IC8vIOaPkuWFpee9kee7nOWbvueJh+aIluS4iuS8oOWbvueJh+eahOWbnuiwgyBzcmM65Zu+54mHc3JjICxhbHQ65Zu+54mH5paH5a2X6K+05piOICxocmVmOui3s+i9rOmTvuaOpQoKCiAgICB0aGlzLmVkaXRvci5jb25maWcubGlua0ltZ0NhbGxiYWNrID0gKHNyYywgYWx0LCBocmVmKSA9PiB7CiAgICAgIHRoaXMuJGVtaXQoJ2xpbmtJbWdDYWxsYmFjaycsIHNyYywgYWx0LCBocmVmKTsKICAgIH07CgogICAgdGhpcy5lZGl0b3IuY29uZmlnLmhlaWdodCA9IHRoaXMuaGVpZ2h0OyAvLyDorr7nva7pq5jluqYKCiAgICB0aGlzLmVkaXRvci5jb25maWcuekluZGV4ID0gdGhpcy56SW5kZXg7IC8vIOiuvue9rmluZGV4LOe8lui+keWZqOeahOWxgue6pwoKICAgIHRoaXMuZWRpdG9yLmNvbmZpZy5wbGFjZWhvbGRlciA9IHRoaXMucGxhY2Vob2xkZXI7IC8vIOiHquWumuS5iSBwbGFjZWhvbGRlciDmj5DnpLrmloflrZcKCiAgICB0aGlzLmVkaXRvci5jb25maWcuZm9jdXMgPSB0aGlzLmZvY3VzOyAvLyDpu5jorqTov5vmnaXmmK/lkKbojrflj5bnhKbngrkKCiAgICB0aGlzLmVkaXRvci5jb25maWcubWVudXMgPSB0aGlzLm1lbnVzOyAvLyDphY3nva7oj5zljZUKCiAgICB0aGlzLmVkaXRvci5jb25maWcuY29sb3JzID0gdGhpcy5jb2xvcnM7IC8vIOmFjee9ruminOiJsu+8iOaWh+Wtl+minOiJsu+8jOiDjOaZr+minOiJsu+8iQoKICAgIHRoaXMuZWRpdG9yLmNvbmZpZy5saW5lSGVpZ2h0cyA9IHRoaXMubGluZUhlaWdodHM7IC8vIOihjOmrmAoKICAgIHRoaXMuZWRpdG9yLmNvbmZpZy5mb250TmFtZXMgPSB0aGlzLmZvbnROYW1lczsgLy8g6K6+572u5a2X5L2TCgogICAgdGhpcy5lZGl0b3IuY29uZmlnLnNob3dGdWxsU2NyZWVuID0gdGhpcy5zaG93RnVsbFNjcmVlbjsgLy8g5YWo5bGPCgogICAgdGhpcy5lZGl0b3IuY29uZmlnLnVwbG9hZEltZ0FjY2VwdCA9IHRoaXMudXBsb2FkSW1nQWNjZXB0OyAvLyDpmZDliLbkuIrkvKDnsbvlnosKCiAgICB0aGlzLmVkaXRvci5jb25maWcudXBsb2FkSW1nTWF4U2l6ZSA9IHRoaXMuZmlsZVNpemU7CiAgICB0aGlzLmVkaXRvci5jb25maWcudXBsb2FkSW1nTWF4TGVuZ3RoID0gdGhpcy5maWxlQ291bnQ7CgogICAgdGhpcy5lZGl0b3IuY29uZmlnLmN1c3RvbVVwbG9hZEltZyA9IGFzeW5jIChmaWxlcywgaW5zZXJ0KSA9PiB7CiAgICAgIGlmICh0aGlzLnVwbG9hZEltZykgewogICAgICAgIHRoaXMudXBsb2FkSW1nKGZpbGVzLCBpbnNlcnQpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuaW1nU29ydCkgewogICAgICAgIGZpbGVzID0gdGhpc1t0aGlzLnNvcnRSdWxlID8gJ3NvcnRSdWxlJyA6ICdnZXRTb3J0RmlsZSddKGZpbGVzKTsKICAgICAgfQoKICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7CiAgICAgICAgaWYgKHRoaXMuaW1nU29ydCB8fCB0aGlzLnVwbG9hZEltZ1NvcnQpIHsKICAgICAgICAgIGF3YWl0IHRoaXMuaW1nUHJvbWlzZShmaWxlLCBpbnNlcnQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmltZ1Byb21pc2UoZmlsZSwgaW5zZXJ0KTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgdGhpcy5lZGl0b3IuY29uZmlnLmN1c3RvbUFsZXJ0ID0gaW5mbyA9PiB7CiAgICAgIC8vIOiHquWumuS5iemUmeivr+aPkOekuu+8jOS4jeeUqOWOn+acrOeahGFsZXJ0CiAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoaW5mbyk7CiAgICB9OwoKICAgIGlmICh0aGlzLmN1c3RvbU1lbnUpIHsKICAgICAgdGhpcy5jcmVhdGVDdXN0aW1NZW51cygpOwogICAgfQoKICAgIHRoaXMuZWRpdG9yLmNyZWF0ZSgpOwoKICAgIGlmICh0aGlzLmRpc2FibGVkKSB7CiAgICAgIHRoaXMuZWRpdG9yLmRpc2FibGUoKTsgLy8g56aB55SoCiAgICB9IGVsc2UgewogICAgICB0aGlzLmVkaXRvci5lbmFibGUoKTsgLy8g6Kej6Zmk56aB55SoCiAgICB9CiAgfSwKCiAgbWV0aG9kczogewogICAgLy8g5Zu+54mH5LiK5Lyg5aSE55CGCiAgICBhc3luYyBpbWdQcm9taXNlKGZpbGUsIGluc2VydCkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIGxldCByID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICByLnJlYWRBc0RhdGFVUkwoZmlsZSk7CgogICAgICAgIHIub25sb2FkID0gYXN5bmMgcmUgPT4gewogICAgICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpOwogICAgICAgICAgdmFyIGJhc2U2NFVybCA9IHJlLmN1cnJlbnRUYXJnZXQucmVzdWx0OwogICAgICAgICAgaW1nLnNyYyA9IGJhc2U2NFVybDsKCiAgICAgICAgICBpbWcub25sb2FkID0gYXN5bmMgaWUgPT4gewogICAgICAgICAgICBpZiAodGhpcy5jaGVja0ltZyhpZSkpIHsKICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnVwbG9hZChmaWxlKTsKCiAgICAgICAgICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgICAgICAgICAgdGhpcy5pbnNlcnRJbWcocmVzdWx0LCBpbnNlcnQpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXNvbHZlKGZhbHNlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICB9OwogICAgICB9KTsKICAgIH0sCgogICAgLy8g5Zu+54mH5bC65a+45qCh6aqMCiAgICBjaGVja0ltZyhpZSkgewogICAgICB2YXIgaW1nV2lkdGggPSBpZS5jdXJyZW50VGFyZ2V0LndpZHRoOwogICAgICB2YXIgaW1nSGVpZ2h0ID0gaWUuY3VycmVudFRhcmdldC5oZWlnaHQ7CgogICAgICBpZiAodGhpcy5pbWdXaWR0aCAmJiB0aGlzLmltZ0hlaWdodCAmJiAoaW1nV2lkdGggIT0gdGhpcy5pbWdXaWR0aCB8fCBpbWdIZWlnaHQgIT0gdGhpcy5pbWdIZWlnaHQpKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihg5Zu+54mH5bqU5Li6JHt0aGlzLmltZ1dpZHRofSoke3RoaXMuaW1nSGVpZ2h0fSznjrDkuLoke2ltZ1dpZHRofSoke2ltZ0hlaWdodH1gKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmltZ1dpZHRoICYmIGltZ1dpZHRoICE9IHRoaXMuaW1nV2lkdGgpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGDlm77niYflrr3luqblupTkuLoke3RoaXMuaW1nV2lkdGh9cHgs546w5Li6JHtpbWdXaWR0aH1weGApOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuaW1nSGVpZ2h0ICYmIGltZ0hlaWdodCAhPSB0aGlzLmltZ0hlaWdodCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoYOWbvueJh+mrmOW6puW6lOS4uiR7dGhpcy5pbWdIZWlnaHR9cHgs546w5Li6JHtpbWdIZWlnaHR9cHhgKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy5pbWdXaWR0aCkgewogICAgICAgIGlmICh0aGlzLmltZ01pbldpZHRoICYmIHRoaXMuaW1nTWF4V2lkdGgpIHsKICAgICAgICAgIGlmIChpbWdXaWR0aCA8IHRoaXMuaW1nTWluV2lkdGggfHwgaW1nV2lkdGggPiB0aGlzLmltZ01heFdpZHRoKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoYOWbvueJh+WuveW6pumZkOWItiR7dGhpcy5pbWdNaW5XaWR0aH1+JHt0aGlzLmltZ01heFdpZHRofSznjrDkuLoke2ltZ1dpZHRofWApOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmltZ01heFdpZHRoKSB7CiAgICAgICAgICBpZiAoaW1nV2lkdGggPiB0aGlzLmltZ01heFdpZHRoKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoYOWbvueJh+WuveW6puW6lOWwj+S6jiR7dGhpcy5pbWdNYXhXaWR0aH1weCznjrDkuLoke2ltZ1dpZHRofXB4YCk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaW1nTWluV2lkdGgpIHsKICAgICAgICAgIGlmIChpbWdXaWR0aCA8IHRoaXMuaW1nTWluV2lkdGgpIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihg5Zu+54mH5a695bqm5bqU5aSn5LqOJHt0aGlzLmltZ01pbldpZHRofXB4LOeOsOS4uiR7aW1nV2lkdGh9cHhgKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKCF0aGlzLmltZ0hlaWdodCkgewogICAgICAgIGlmICh0aGlzLmltZ01pbkhlaWdodCAmJiB0aGlzLmltZ01heEhlaWdodCkgewogICAgICAgICAgaWYgKGltZ0hlaWdodCA8IHRoaXMuaW1nTWluSGVpZ2h0IHx8IGltZ0hlaWdodCA+IHRoaXMuaW1nTWF4SGVpZ2h0KSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoYOWbvueJh+mrmOW6pumZkOWItiR7dGhpcy5pbWdNaW5IZWlnaHR9fiR7dGhpcy5pbWdNYXhIZWlnaHR9LOeOsOS4uiR7aW1nSGVpZ2h0fWApOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmltZ01heEhlaWdodCkgewogICAgICAgICAgaWYgKGltZ0hlaWdodCA+IHRoaXMuaW1nTWF4SGVpZ2h0KSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoYOWbvueJh+mrmOW6puW6lOWwj+S6jiR7dGhpcy5pbWdNYXhIZWlnaHR9cHgs546w5Li6JHtpbWdIZWlnaHR9cHhgKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5pbWdNaW5IZWlnaHQpIHsKICAgICAgICAgIGlmIChpbWdIZWlnaHQgPCB0aGlzLmltZ01pbkhlaWdodCkgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGDlm77niYfpq5jluqblupTlpKfkuo4ke3RoaXMuaW1nTWluSGVpZ2h0fXB4LOeOsOS4uiR7aW1nSGVpZ2h0fXB4YCk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnVwbG9hZEltZ0FmdGVyKSB7CiAgICAgICAgdGhpcy51cGxvYWRJbWdBZnRlcihmaWxlcywgaW5zZXJ0KTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKCiAgICAvLyDmlofku7bkuIrkvKAKICAgIHVwbG9hZChmaWxlKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgdGhpcy4kbG9hZGVyLnNob3coKTsKCiAgICAgICAgaWYgKHRoaXMuJGF4aW9zKSB7CiAgICAgICAgICB0aGlzLiRheGlvcy51cGxvYWQodGhpcy51cGxvYWRVcmwsIHRoaXMudXBsb2FkUGFyYW1zIHx8IHt9LCBmaWxlKS50aGVuKHJlc3VsdCA9PiB7CiAgICAgICAgICAgIHRoaXMuJGxvYWRlci5oaWRlKCk7CiAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTsKICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgdGhpcy4kbG9hZGVyLmhpZGUoKTsKICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kYWpheC51cGxvYWQoewogICAgICAgICAgICB1cmw6IHRoaXMudXBsb2FkVXJsLAogICAgICAgICAgICBkYXRhOiB0aGlzLnVwbG9hZFBhcmFtcyB8fCB7fSwKICAgICAgICAgICAgc3VjY2VzczogcmVzdWx0ID0+IHsKICAgICAgICAgICAgICB0aGlzLiRsb2FkZXIuaGlkZSgpOwogICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXJyb3I6ICgpID0+IHsKICAgICAgICAgICAgICB0aGlzLiRsb2FkZXIuaGlkZSgpOwogICAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCBmaWxlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICAvLyDpu5jorqTmjpLluo/mlrnms5UKICAgIGdldFNvcnRGaWxlKGZpbGVzKSB7CiAgICAgIGNvbnN0IG5ld2ZpbGVzID0gZmlsZXMuZmlsdGVyKHYgPT4gewogICAgICAgIHJldHVybiB0aGlzLmdldFNvcnROYW1lKHYubmFtZSk7CiAgICAgIH0pOwogICAgICBuZXdmaWxlcy5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgY29uc3QgbmFtZUEgPSBOdW1iZXIodGhpcy5nZXRTb3J0TmFtZShhLm5hbWUpKTsKICAgICAgICBjb25zdCBuYW1lQiA9IE51bWJlcih0aGlzLmdldFNvcnROYW1lKGIubmFtZSkpOwogICAgICAgIHJldHVybiBuYW1lQSAtIG5hbWVCOwogICAgICB9KTsKICAgICAgcmV0dXJuIG5ld2ZpbGVzOwogICAgfSwKCiAgICAvLyDmoKHpqozlm77niYflkb3lkI0KICAgIGdldFNvcnROYW1lKG5hbWUpIHsKICAgICAgaWYgKCFuYW1lLnN0YXJ0c1dpdGgoJ2RqJykgfHwgbmFtZS5pbmRleE9mKCdfJykgPCAwIHx8ICFOdW1iZXIobmFtZS5zbGljZSgyLCBuYW1lLmxhc3RJbmRleE9mKCdfJykpKSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoYCR7bmFtZX0g5LiN56ym5ZCI5ZG95ZCN6KeE6IyD77yBYCk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gbmFtZS5zbGljZSgyLCBuYW1lLmluZGV4T2YoJ18nKSk7CiAgICB9LAoKICAgIGNyZWF0ZUN1c3RpbU1lbnVzKCkgewogICAgICBjb25zdCBzZWxmID0gdGhpczsKICAgICAgdGhpcy5jdXN0b21NZW51LmZvckVhY2goKGVsLCBpKSA9PiB7CiAgICAgICAgY2xhc3MgSW5zZXJ0WENYTWVudSBleHRlbmRzIEJ0bk1lbnUgewogICAgICAgICAgY29uc3RydWN0b3IoZWRpdG9yKSB7CiAgICAgICAgICAgIGNvbnN0ICRlbGVtID0gV0VkaXRvci4kKGVsLmluc2VydEh0bWwpOwogICAgICAgICAgICBzdXBlcigkZWxlbSwgZWRpdG9yKTsKICAgICAgICAgIH0gLy8g6I+c5Y2V54K55Ye75LqL5Lu2CgoKICAgICAgICAgIGNsaWNrSGFuZGxlcigpIHsKICAgICAgICAgICAgZWwuaW5zZXJ0Q2FsbGJhY2soZWwsIHNlbGYpOwogICAgICAgICAgfSAvLyDoj5zljZXmv4DmtLvnirbmgIEKCgogICAgICAgICAgdHJ5Q2hhbmdlQWN0aXZlKCkge30KCiAgICAgICAgfSAvLyDms6jlhozoj5zljZUKCgogICAgICAgIHRoaXMuZWRpdG9yLm1lbnVzLmV4dGVuZChlbC5pbnNlcnROYW1lLCBJbnNlcnRYQ1hNZW51KTsgLy8g6YeN5paw6YWN572uIGVkaXRvci5jb25maWcubWVudXMKCiAgICAgICAgdGhpcy5lZGl0b3IuY29uZmlnLm1lbnVzID0gdGhpcy5lZGl0b3IuY29uZmlnLm1lbnVzLmNvbmNhdChlbC5pbnNlcnROYW1lKTsKICAgICAgfSk7CiAgICB9CgogIH0KfTs="},{"version":3,"mappings":"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CA7BA,CA6BA;;IACA,sCA9BA,CA8BA;;IACA,wCA/BA,CA+BA;;IACA,kDAhCA,CAgCA;;IACA,8CAjCA,CAiCA;;IACA,wDAlCA,CAkCA;;IACA,0DAnCA,CAmCA;;IACA;IACA;;IACA;MACA;QACA;QACA;MACA;;MACA;QACAC;MACA;;MACA;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA;IACA,CAfA;;IAgBA;MAAA;MACA;IACA,CAFA;;IAGA;MACA;IACA;;IAGA;;IACA;MACA,sBADA,CACA;IACA,CAFA,MAEA;MACA,qBADA,CACA;IACA;EACA,CAxRA;;EAyRAC;IACA;IACA;MACA;QACA;QACAC;;QACAA;UACA;UACA;UACAC;;UACAA;YACA;cACA;;cACA;gBACA;cACA;;cACAC;YACA,CANA,MAMA;cACAA;YACA;UACA,CAVA;QAWA,CAfA;MAgBA,CAnBA;IAoBA,CAvBA;;IAwBA;IACAC;MACA;MACA;;MACA;QACA;QACA;MACA;;MACA;QACA;QACA;MACA;;MACA;QACA;QACA;MACA;;MAEA;QACA;UACA;YACA;YACA;UACA;QACA,CALA,MAKA;UACA;YACA;YACA;UACA;QACA,CALA,MAKA;UACA;YACA;YACA;UACA;QACA;MACA;;MAEA;QACA;UACA;YACA;YACA;UACA;QACA,CALA,MAKA;UACA;YACA;YACA;UACA;QACA,CALA,MAKA;UACA;YACA;YACA;UACA;QACA;MACA;;MAEA;QACA;QACA;MACA;;MACA;IACA,CApFA;;IAqFA;IACAC;MACA;QACA;;QACA;UACA,mBACA,cADA,EAEA,uBAFA,EAGAC,IAHA,EAIAC,IAJA,CAIAC;YACA;YACAL;UACA,CAPA,EAOAM,KAPA,CAOA;YACA;YACAN;UACA,CAVA;QAWA,CAZA,MAYA;UACA;YACAO,mBADA;YAEArB,6BAFA;YAGAsB;cACA;cACAR;YACA,CANA;YAOAS;cACA;cACAT;YACA;UAVA,GAWAG,IAXA;QAYA;MACA,CA5BA;IA6BA,CApHA;;IAqHA;IACAO;MACA;QACA;MACA,CAFA;MAGAC;QACA;QACA;QACA;MACA,CAJA;MAKA;IACA,CAhIA;;IAiIA;IACAC;MACA;QACA;QACA;MACA;;MACA;IACA,CAxIA;;IAyIAC;MACA;MACA;QACA;UACAC;YACA,wBACAC,aADA;YAGA;UACA,CANA,CAOA;;;UACAC;YACAD;UACA,CAVA,CAWA;;;UACAE,mBACA;;QAbA,CADA,CAgBA;;;QACA,uDAjBA,CAmBA;;QACA;MACA,CArBA;IAsBA;;EAjKA;AAzRA","names":["BtnMenu","name","props","value","type","default","height","zIndex","placeholder","focus","menus","colors","lineHeights","fontNames","showFullScreen","disabled","uploadImgAccept","uploadUrl","fileName","uploadParams","imgWidth","imgHeight","fileSize","imgMaxWidth","imgMinWidth","imgMaxHeight","imgMinHeight","fileCount","uploadImg","uploadImgAfter","insertImg","customMenu","separate","imgSort","sortRule","uploadImgSort","data","editor","timeout","timein","isFullScreen","val","watch","handler","clearTimeout","deep","files","methods","r","img","resolve","checkImg","upload","file","then","result","catch","url","success","error","getSortFile","newfiles","getSortName","createCustimMenus","constructor","el","clickHandler","tryChangeActive"],"sourceRoot":"packages/editor/src","sources":["editor.vue"],"sourcesContent":["<template>\n  <div :class=\"['dj-editor',{'dj-editor-disabled': disabled}]\">\n    <input type=\"hidden\" :name=\"name\" :value=\"value\"/>\n    <div ref=\"editor\"></div>\n  </div>\n</template>\n\n<script>\nimport WEditor from 'wangeditor';\nconst { BtnMenu } = WEditor;\n\nexport default {\n  name: 'djEditor',\n  props: {\n    value: {\n      type: String,\n      default: ''\n    },\n    name: { // 元素名称(校验)\n      type: String ,\n      default: ''\n    },\n    height: { // 编辑器的高度\n      type: Number,\n      default: 300\n    },\n    zIndex: { // 编辑器的层级\n      type: Number,\n      default: 10\n    },\n    placeholder: { // 自定义placeholder提示文字\n      type: String,\n      default: ''\n    },\n    focus: { // 是否自动获取焦点\n      type: Boolean,\n      default: false\n    },\n    menus: { // 配置菜单\n      type: Array,\n      default: ()=>{\n        return [\n          'head',\n          'bold',\n          'fontSize',\n          'fontName',\n          'italic',\n          'underline',\n          'strikeThrough',\n          'indent',\n          'lineHeight',\n          'foreColor',\n          'backColor',\n          'link',\n          'list',\n          'todo',\n          'justify',\n          'quote',\n          'emoticon',\n          'image',\n          'video',\n          'table',\n          'code',\n          'splitLine',\n          'undo',\n          'redo'\n        ];\n      }\n    },\n    colors: {// 配置颜色(文字颜色、背景色)\n      type: Array,\n      default: () => {\n        return [\n          '#4d80bf','#c24f4a','#8baa4a','#7b5ba1','#46acc8','#f9963b','#ffffff'];\n      }\n    },\n    lineHeights: { // 行高\n      type: Array,\n      default: () =>{\n        return [\n          '1', '1.15', '1.6', '2', '2.5', '3'\n        ];\n      }\n    },\n    fontNames: { // 字体\n      type: Array,\n      default: () => {\n        return [\n          '黑体',\n          '仿宋',\n          '楷体',\n          '标楷体',\n          '华文仿宋',\n          '华文楷体',\n          '宋体',\n          '微软雅黑',\n          'Arial',\n          'Tahoma',\n          'Verdana',\n          'Times New Roman',\n          'Courier New'\n        ];\n      }\n    },\n    showFullScreen: { // 全屏按钮是否展示\n      type: Boolean,\n      default: true\n    },\n    disabled: { // 禁用\n      type: Boolean,\n      default: false\n    },\n    // 图片类型限制\n    uploadImgAccept: {\n      type: Array,\n      default: () => {\n        return ['jpg', 'jpeg', 'png', 'gif', 'bmp'] ;// 若不希望限制类型，则设置成空数组\n      }\n    },\n    uploadUrl: { // 上传url\n      type: String\n    },\n    fileName: { // 上传文件名称\n      type: String,\n      default: 'file'\n    },\n    uploadParams: { // 上传补充参数\n      type: Object\n    },\n    imgWidth: { // 限制上传图片宽度\n      type: Number\n    },\n    imgHeight: { // 限制上传图片高度\n      type: Number\n    },\n    fileSize: { // 限制单个文件大小 默认5MB\n      type: Number,\n      default: 5 * 1024 * 1024\n    },\n    imgMaxWidth: { // 限制上传图片最大宽\n      type: Number\n    },\n    imgMinWidth: { // 限制上传图片最小宽\n      type: Number\n    },\n    imgMaxHeight: { // 限制上传图片最大高\n      type: Number\n    },\n    imgMinHeight: { // 限制上传图片最小高\n      type: Number\n    },\n    fileCount: { // 限制最多上传文件个数\n      type: Number,\n      default: 20\n    },\n    uploadImg: { // 外部自定义上传函数\n      type: Function\n    },\n    uploadImgAfter: { // 外部自定义上传函数,校验图片长宽后执行\n      type: Function\n    },\n    insertImg: { // 内部上传函数后抛到外部获取结果插入回显\n      type: Function\n    },\n    customMenu: {\n      type: Array\n    },\n    separate: { // 是否前后端分离\n      type: Boolean,\n      default: true\n    },\n    imgSort: { // 是否支持图片排序，默认图片命名方式如：dj001_xxx.png\n      type: Boolean,\n      default: false\n    },\n    sortRule: { // 自定义排序方法，该方法需要返回排序之后的数组\n      type: Function\n    },\n    uploadImgSort: { // 是否顺序上传图片\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      editor: null,\n      timeout: null,\n      timein: null,\n      isFullScreen: false,\n      val: ''\n    };\n  },\n  watch: {\n    value: {\n      handler(){\n        if (this.editor) {\n          if (this.timeout) {\n            clearTimeout(this.timeout);\n          }\n          let value1 = this.value;\n          let value2 = this.editor.txt.html();\n          this.timeout = setTimeout(() => {\n            if (value1 != value2) {\n              this.editor.txt.html(this.value.replace(/>\\s+</g, '><'));\n            }\n            this.$emit('getHtml',this.editor.txt.html()); // 获取html\n            this.$emit('getText',this.editor.txt.text()); // 获取text\n          }, 500);\n        }\n      },\n      deep: true\n    },\n    disabled: {\n      handler(){\n        if (this.disabled){\n          this.editor.disable(); // 禁用\n        } else {\n          this.editor.enable(); // 解除禁用\n        }\n      },\n      deep: true\n    }\n  },\n  async mounted() {\n    // const $elem = WEditor.$(\n    //   `<div class=\"w-e-menu\">\n    //                     <button>小程序</button>\n    //                 </div>`\n    // );\n    this.editor = new WEditor(this.$refs.editor);\n    this.$nextTick(() => {\n      if (this.value && this.editor && this.editor.txt && this.editor.txt.html() != this.value) {\n        this.editor.txt.html(this.value);\n      }\n    });\n    this.editor.config.onchange = (html) => {\n      this.$emit('input', html.trim());\n    };\n    this.editor.config.onblur = (newHtml) => { // 失去焦点事件\n      this.$emit('onBlur',newHtml); // 获取最新的 html 内容\n    };\n    this.editor.config.onfocus = (newHtml) => { // 获取焦点事件\n      this.$emit('onFocus',newHtml); // 获取最新的 html 内容\n    };\n\n    // 插入网络图片或上传图片的回调 src:图片src ,alt:图片文字说明 ,href:跳转链接\n    this.editor.config.linkImgCallback = (src,alt,href) => {\n      this.$emit('linkImgCallback', src,alt,href);\n    };\n    this.editor.config.height=this.height; // 设置高度\n    this.editor.config.zIndex = this.zIndex; // 设置index,编辑器的层级\n    this.editor.config.placeholder = this.placeholder; // 自定义 placeholder 提示文字\n    this.editor.config.focus=this.focus; // 默认进来是否获取焦点\n    this.editor.config.menus=this.menus; // 配置菜单\n    this.editor.config.colors=this.colors; // 配置颜色（文字颜色，背景颜色）\n    this.editor.config.lineHeights=this.lineHeights; // 行高\n    this.editor.config.fontNames=this.fontNames; // 设置字体\n    this.editor.config.showFullScreen = this.showFullScreen;// 全屏\n    this.editor.config.uploadImgAccept=this.uploadImgAccept; // 限制上传类型\n    this.editor.config.uploadImgMaxSize = this.fileSize;\n    this.editor.config.uploadImgMaxLength = this.fileCount;\n    this.editor.config.customUploadImg = async(files, insert) => {\n      if (this.uploadImg) {\n        this.uploadImg(files, insert);\n        return;\n      }\n      if (this.imgSort) {\n        files = this[this.sortRule ? 'sortRule' : 'getSortFile'](files);\n      }\n      for (const file of files) {\n        if (this.imgSort || this.uploadImgSort ) {\n          await this.imgPromise(file, insert);\n        } else {\n          this.imgPromise(file, insert);\n        }\n      }\n    };\n    this.editor.config.customAlert = (info) => { // 自定义错误提示，不用原本的alert\n      this.$message.error(info);\n    };\n    if (this.customMenu) {\n      this.createCustimMenus();\n    }\n\n\n    this.editor.create();\n    if (this.disabled) {\n      this.editor.disable(); // 禁用\n    } else {\n      this.editor.enable(); // 解除禁用\n    }\n  },\n  methods: {\n    // 图片上传处理\n    async imgPromise(file, insert) {\n      return new Promise(async(resolve, reject) => {\n        let r = new FileReader();\n        r.readAsDataURL(file);\n        r.onload = async(re) => {\n          var img = new Image();\n          var base64Url = re.currentTarget.result;\n          img.src = base64Url;\n          img.onload = async(ie) => {\n            if (this.checkImg(ie)) {\n              const result = await this.upload(file);\n              if (result) {\n                this.insertImg(result,insert);\n              }\n              resolve(true);\n            } else {\n              resolve(false);\n            }\n          };\n        };\n      });\n    },\n    // 图片尺寸校验\n    checkImg(ie) {\n      var imgWidth = ie.currentTarget.width;\n      var imgHeight = ie.currentTarget.height;\n      if (this.imgWidth && this.imgHeight && (imgWidth != this.imgWidth || imgHeight != this.imgHeight)) {\n        this.$message.error(`图片应为${this.imgWidth}*${this.imgHeight},现为${imgWidth}*${imgHeight}`);\n        return false;\n      }\n      if (this.imgWidth && imgWidth != this.imgWidth) {\n        this.$message.error(`图片宽度应为${this.imgWidth}px,现为${imgWidth}px`);\n        return false;\n      }\n      if (this.imgHeight && imgHeight != this.imgHeight) {\n        this.$message.error(`图片高度应为${this.imgHeight}px,现为${imgHeight}px`);\n        return false;\n      }\n\n      if (!this.imgWidth) {\n        if (this.imgMinWidth && this.imgMaxWidth) {\n          if (imgWidth < this.imgMinWidth || imgWidth > this.imgMaxWidth) {\n            this.$message.error(`图片宽度限制${this.imgMinWidth}~${this.imgMaxWidth},现为${imgWidth}`);\n            return;\n          }\n        } else if (this.imgMaxWidth) {\n          if (imgWidth > this.imgMaxWidth) {\n            this.$message.error(`图片宽度应小于${this.imgMaxWidth}px,现为${imgWidth}px`);\n            return false;\n          }\n        } else if (this.imgMinWidth) {\n          if (imgWidth < this.imgMinWidth) {\n            this.$message.error(`图片宽度应大于${this.imgMinWidth}px,现为${imgWidth}px`);\n            return false;\n          }\n        }\n      }\n\n      if (!this.imgHeight) {\n        if ( this.imgMinHeight && this.imgMaxHeight) {\n          if (imgHeight < this.imgMinHeight || imgHeight > this.imgMaxHeight) {\n            this.$message.error(`图片高度限制${this.imgMinHeight}~${this.imgMaxHeight},现为${imgHeight}`);\n            return;\n          }\n        } else if (this.imgMaxHeight) {\n          if (imgHeight > this.imgMaxHeight) {\n            this.$message.error(`图片高度应小于${this.imgMaxHeight}px,现为${imgHeight}px`);\n            return false;\n          }\n        } else if (this.imgMinHeight) {\n          if (imgHeight < this.imgMinHeight) {\n            this.$message.error(`图片高度应大于${this.imgMinHeight}px,现为${imgHeight}px`);\n            return false;\n          }\n        }\n      }\n\n      if (this.uploadImgAfter) {\n        this.uploadImgAfter(files, insert);\n        return false;\n      }\n      return true;\n    },\n    // 文件上传\n    upload(file) {\n      return new Promise((resolve, reject) => {\n        this.$loader.show();\n        if (this.$axios) {\n          this.$axios.upload(\n            this.uploadUrl,\n            this.uploadParams || {},\n            file\n          ).then((result) => {\n            this.$loader.hide();\n            resolve(result);\n          }).catch(() => {\n            this.$loader.hide();\n            resolve(false);\n          });\n        } else {\n          this.$ajax.upload({\n            url: this.uploadUrl,\n            data: this.uploadParams || {},\n            success: (result) => {\n            \tthis.$loader.hide();\n              resolve(result);\n            },\n            error: () => {\n            \tthis.$loader.hide();\n              resolve(false);\n            }\n          }, file);\n        }\n      });\n    },\n    // 默认排序方法\n    getSortFile(files) {\n      const newfiles = files.filter(v => {\n        return this.getSortName(v.name);\n      });\n      newfiles.sort((a,b) => {\n        const nameA = Number(this.getSortName(a.name));\n        const nameB = Number(this.getSortName(b.name));\n        return nameA - nameB;\n      });\n      return newfiles;\n    },\n    // 校验图片命名\n    getSortName(name) {\n      if (!name.startsWith('dj') || name.indexOf('_') < 0 || !Number(name.slice(2, name.lastIndexOf('_')))) {\n        this.$message.error(`${name} 不符合命名规范！`);\n        return false;\n      }\n      return name.slice(2, name.indexOf('_'));\n    },\n    createCustimMenus() {\n      const self = this;\n      this.customMenu.forEach((el,i) => {\n        class InsertXCXMenu extends BtnMenu {\n          constructor(editor) {\n            const $elem = WEditor.$(\n              el.insertHtml\n            );\n            super($elem, editor);\n          }\n          // 菜单点击事件\n          clickHandler() {\n            el.insertCallback(el,self);\n          }\n          // 菜单激活状态\n          tryChangeActive() {\n          }\n        }\n        // 注册菜单\n        this.editor.menus.extend(el.insertName, InsertXCXMenu);\n\n        // 重新配置 editor.config.menus\n        this.editor.config.menus = this.editor.config.menus.concat(el.insertName);\n      });\n    }\n  }\n};\n</script>\n"]}]}
{"remainingRequest":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js!/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangjunxia/work-github/dj-design/packages/select/src/option.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangjunxia/work-github/dj-design/packages/select/src/option.vue","mtime":1676257891926},{"path":"/Users/wangjunxia/work-github/dj-design/babel.config.js","mtime":1660011372032},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdkak9wdGlvbicsCiAgaW5qZWN0OiBbJ3NlbGVjdCddLAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNTZWxlbGN0OiBudWxsLAogICAgICB2aXNpYmxlOiB0cnVlLAogICAgICBlbXB0eTogdHJ1ZQogICAgfTsKICB9LAoKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgZGVmYXVsdDogJycKICAgIH0sCiAgICBsYWJlbDogewogICAgICBkZWZhdWx0OiAnJwogICAgfSwKICAgIGRpc2FibGVkOiBCb29sZWFuCiAgfSwKICBjb21wdXRlZDogewogICAgaXNNdWx0aXBsZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHBhcmVudC5tdWx0aXBsZSB8fCB0aGlzLiRwYXJlbnQuJHBhcmVudC5tdWx0aXBsZTsKICAgIH0sCgogICAgaXNMaW1pdCgpIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0Lm11bHRpcGxlICYmIHRoaXMuc2VsZWN0LmxpbWl0KSB7CiAgICAgICAgcmV0dXJuICF0aGlzLmlzU2VsZWxjdCAmJiB0aGlzLnNlbGVjdC5zZWxlY3RlZC5sZW5ndGggPj0gdGhpcy5zZWxlY3QubGltaXQ7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCgogICAgaXNEaXNhYmxlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWQgfHwgdGhpcy4kcGFyZW50LmRpc2FibGVkOwogICAgfQoKICB9LAogIHdhdGNoOiB7CiAgICBsYWJlbDogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiAobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgICB2YXIgX3RoaXMkJHBhcmVudCQkcGFyZW50LCBfdGhpcyQkcGFyZW50JCRwYXJlbnQyOwoKICAgICAgICAoX3RoaXMkJHBhcmVudCQkcGFyZW50ID0gdGhpcy4kcGFyZW50LiRwYXJlbnQpID09PSBudWxsIHx8IF90aGlzJCRwYXJlbnQkJHBhcmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90aGlzJCRwYXJlbnQkJHBhcmVudDIgPSBfdGhpcyQkcGFyZW50JCRwYXJlbnQuc2xvdFVwZGF0ZUhvb2spID09PSBudWxsIHx8IF90aGlzJCRwYXJlbnQkJHBhcmVudDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJCRwYXJlbnQkJHBhcmVudDIuY2FsbChfdGhpcyQkcGFyZW50JCRwYXJlbnQpOwogICAgICB9LAogICAgICBkZWVwOiB0cnVlLAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZUNob29zZUxpKCkgewogICAgICBpZiAodGhpcy5pc0Rpc2FibGVkIHx8IHRoaXMuaXNMaW1pdCkgcmV0dXJuOwogICAgICBsZXQgcGFyZW50ID0gdGhpcy4kcGFyZW50LiRwYXJlbnQsCiAgICAgICAgICBwYXJlbnRzID0gdGhpcy4kcGFyZW50Lmdyb3VwID8gcGFyZW50LiRwYXJlbnQgOiBwYXJlbnQ7CiAgICAgIHBhcmVudHMuaXNGb2N1cyA9IHBhcmVudHMubXVsdGlwbGUgfHwgcGFyZW50cy5tdWx0aXBsZUFsbDsKICAgICAgcGFyZW50cy4kZW1pdCgnaGFuZGxlT3B0aW9uQ2xpY2snLCBbLi4ucGFyZW50cy5jaGVja0FyciwgLi4uW3RoaXMuJG9wdGlvbnMucHJvcHNEYXRhXV0sIHRoaXMuJG9wdGlvbnMucHJvcHNEYXRhKTsKICAgIH0sCgogICAgaGFuZGxlT3B0aW9uU2VsZWN0KGRhdGEpIHsKICAgICAgdGhpcy5pc1NlbGVsY3QgPSBBcnJheS5pc0FycmF5KGRhdGEpID8gZGF0YSA6IFtkYXRhXS5pbmNsdWRlcyh0aGlzLnZhbHVlKTsKICAgIH0sCgogICAgcmVtb3ZlQ2xhc3NTZWxlY3QoKSB7CiAgICAgIHRoaXMuaXNTZWxlbGN0ID0gbnVsbDsKICAgIH0sCgogICAgcXVlcnlDaGFuZ2UocXVlcnkpIHsKICAgICAgdmFyIF90aGlzJCRwYXJlbnQsIF90aGlzJCRwYXJlbnQkcXVlcnlHcjsKCiAgICAgIHRoaXMudmlzaWJsZSA9IHF1ZXJ5ID09PSBudWxsID8gdHJ1ZSA6IG5ldyBSZWdFeHAodGhpcy5lc2NhcGVSZWdleHBTdHJpbmcocXVlcnkpLCAnaScpLnRlc3QodGhpcy5sYWJlbCk7CgogICAgICBpZiAoIXRoaXMudmlzaWJsZSkgewogICAgICAgIHRoaXMuc2VsZWN0LmZpbHRlckNvdW50LS07CiAgICAgIH0KCiAgICAgIChfdGhpcyQkcGFyZW50ID0gdGhpcy4kcGFyZW50KSA9PT0gbnVsbCB8fCBfdGhpcyQkcGFyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMkJHBhcmVudCRxdWVyeUdyID0gX3RoaXMkJHBhcmVudC5xdWVyeUdyb3VwQ2hhbmdlKSA9PT0gbnVsbCB8fCBfdGhpcyQkcGFyZW50JHF1ZXJ5R3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJCRwYXJlbnQkcXVlcnlHci5jYWxsKF90aGlzJCRwYXJlbnQpOwogICAgfSwKCiAgICBlc2NhcGVSZWdleHBTdHJpbmcodmFsdWUgPSAnJykgewogICAgICByZXR1cm4gU3RyaW5nKHZhbHVlKS5yZXBsYWNlKC9bfFxce30oKVtcXV4kKyo/Ll0vZywgJ1xcJCYnKTsKICAgIH0KCiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuc2VsZWN0LmZpbHRlckNvdW50Kys7CiAgICB0aGlzLnNlbGVjdC5vcHRpb25zQ291bnQrKzsKICAgIHRoaXMuJG9uKCdxdWVyeUNoYW5nZScsIHRoaXMucXVlcnlDaGFuZ2UpOwogICAgdGhpcy4kb24oJ2Nob29zZU9wdGlvbicsIHRoaXMuaGFuZGxlT3B0aW9uU2VsZWN0KTsKICAgIHRoaXMuJG9uKCdyZW1vdmVDbGFzcycsIHRoaXMucmVtb3ZlQ2xhc3NTZWxlY3QpOwogIH0KCn07"},{"version":3,"mappings":";;;;;;;;;;;;;;AAeA;EACAA,gBADA;EAEAC,kBAFA;;EAGAC;IACA;MACAC,eADA;MAEAC,aAFA;MAGAC;IAHA;EAKA,CATA;;EAUAC;IACAC;MACAC;IADA,CADA;IAIAC;MACAD;IADA,CAJA;IAOAE;EAPA,CAVA;EAmBAC;IACAC;MACA;IACA,CAHA;;IAIAC;MACA;QACA;MACA;;MACA;IACA,CATA;;IAUAC;MACA;IACA;;EAZA,CAnBA;EAiCAC;IACAN;MACAO;QAAA;;QACA;MACA,CAHA;MAIAC,UAJA;MAKAC;IALA;EADA,CAjCA;EA0CAC;IACAC;MACA;MACA;MAAA,IACAC,sDADA;MAEAA;MACAA;IACA,CAPA;;IAQAC;MACA;IACA,CAVA;;IAWAC;MACA;IACA,CAbA;;IAcAC;MAAA;;MACA;;MACA;QACA;MACA;;MACA;IACA,CApBA;;IAqBAC;MACA;IACA;;EAvBA,CA1CA;;EAmEAC;IACA;IACA;IACA;IACA;IACA;EACA;;AAzEA","names":["name","inject","data","isSelelct","visible","empty","props","value","default","label","disabled","computed","isMultiple","isLimit","isDisabled","watch","handler","deep","immediate","methods","handleChooseLi","parents","handleOptionSelect","removeClassSelect","queryChange","escapeRegexpString","created"],"sourceRoot":"packages/select/src","sources":["option.vue"],"sourcesContent":["<template>\n  <li @click=\"handleChooseLi\"\n    :class=\"{\n      'is-multiple':isMultiple,\n      'is-select':isSelelct,\n      'is-disabled-option':isDisabled || isLimit,\n      'is-visible': visible\n    }\"\n    v-show=\"visible\"\n  >\n  <slot>{{label}}</slot>\n  </li>\n</template>\n\n<script>\nexport default {\n  name: 'djOption',\n  inject: ['select'],\n  data(){\n    return {\n      isSelelct: null,\n      visible: true,\n      empty: true\n    };\n  },\n  props: {\n    value: {\n      default: ''\n    },\n    label: {\n      default: ''\n    },\n    disabled: Boolean\n  },\n  computed: {\n    isMultiple() {\n      return this.$parent.multiple || this.$parent.$parent.multiple;\n    },\n    isLimit() {\n      if (this.select.multiple && this.select.limit) {\n        return !this.isSelelct && this.select.selected.length >= this.select.limit;\n      }\n      return false;\n    },\n    isDisabled(){\n      return this.disabled || this.$parent.disabled;\n    }\n  },\n  watch: {\n    label: {\n      handler: function(newVal,oldVal) {\n        this.$parent.$parent?.slotUpdateHook?.();\n      },\n      deep: true,\n      immediate: true\n    }\n  },\n  methods: {\n    handleChooseLi(){\n      if (this.isDisabled || this.isLimit) return;\n      let parent = this.$parent.$parent,\n        parents = this.$parent.group ? parent.$parent : parent;\n      parents.isFocus = parents.multiple || parents.multipleAll;\n      parents.$emit('handleOptionClick', [...parents.checkArr, ...[this.$options.propsData]], this.$options.propsData);\n    },\n    handleOptionSelect(data){\n      this.isSelelct = Array.isArray(data) ? data : [data].includes(this.value) ;\n    },\n    removeClassSelect(){\n      this.isSelelct=null;\n    },\n    queryChange(query) {\n      this.visible = query === null ? true : new RegExp(this.escapeRegexpString(query), 'i').test(this.label);\n      if (!this.visible) {\n        this.select.filterCount--;\n      }\n      this.$parent?.queryGroupChange?.();\n    },\n    escapeRegexpString(value = '') {\n      return String(value).replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&');\n    }\n  },\n  created(){\n    this.select.filterCount++;\n    this.select.optionsCount++;\n    this.$on('queryChange', this.queryChange);\n    this.$on('chooseOption', this.handleOptionSelect);\n    this.$on('removeClass', this.removeClassSelect);\n  }\n};\n</script>\n"]}]}
{"remainingRequest":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js!/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangjunxia/work-github/dj-design/packages/modal/src/modal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangjunxia/work-github/dj-design/packages/modal/src/modal.vue","mtime":1676257891923},{"path":"/Users/wangjunxia/work-github/dj-design/babel.config.js","mtime":1660011372032},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0ICogYXMgZG9tIGZyb20gJ0AvdXRpbHMvZG9tJzsKaW1wb3J0IGxvYWRpbmcgZnJvbSAnQC9taXhpbnMvbG9hZGluZyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnZGpNb2RhbCcsCiAgY29tcG9uZW50czoge30sCiAgcHJvcHM6IHsKICAgIHRpdGxlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ+agh+mimCcKICAgIH0sCiAgICB2aXNpYmxlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgc2l6ZTogewogICAgICAvLyDnqpflj6PlsLrlr7gKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnbWluaScgLy8gbWluaSB0aW55IHNtYWxsIGxhcmdlIGZ1bGwKCiAgICB9LAogICAgd2lkdGg6IFN0cmluZywKICAgIGhlaWdodDogU3RyaW5nLAogICAgbWF4aGVpZ2h0OiBTdHJpbmcsCiAgICBzaG93Zm9vdGVyOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBzaG93b2s6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIG9rOiBGdW5jdGlvbiwKICAgIG9rdGV4dDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICfnoa7lrponCiAgICB9LAogICAgc2hvd2NhbmNlbDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgY2FuY2VsOiBGdW5jdGlvbiwKICAgIGNhbmNlbHRleHQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAn5Y+W5raIJwogICAgfSwKICAgIHNob3djbG9zZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgYmVmb3JlQ2xvc2U6IEZ1bmN0aW9uLAogICAgY2xvc2FibGU6IHsKICAgICAgLy8g54K55Ye76YGu572p5bGC5YWz6ZetCiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgYmFzaWM6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBib3JkZXI6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBsb2FkaW5nOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4KICAgIH0sCiAgICBiYWNrZ3JvdW5kOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2JsYWNrJyAvLyBibGFjayB3aGl0ZQoKICAgIH0KICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd01vZGFsOiB0aGlzLnZpc2libGUsCiAgICAgIGZpcnN0TW9kYWw6IHRydWUKICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIGdldEJhY2tncm91bmQoKSB7CiAgICAgIHJldHVybiBgZGotbW9kYWwtYmFja2dyb3VuZC0ke3RoaXMuYmFja2dyb3VuZH1gOwogICAgfSwKCiAgICBnZXRTaXplKCkgewogICAgICByZXR1cm4gYGRqLW1vZGFsLSR7dGhpcy5zaXplfWA7CiAgICB9CgogIH0sCiAgd2F0Y2g6IHsKICAgIHZpc2libGU6IGZ1bmN0aW9uIChuLCBvKSB7CiAgICAgIGlmICh0aGlzLnZpc2libGUpIHsKICAgICAgICB0aGlzLnNob3coKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmhpZGUoKTsKICAgICAgfQogICAgfSwKICAgIGxvYWRpbmc6IGZ1bmN0aW9uIChuLCBvKSB7CiAgICAgIHRoaXMuaW5pdExvYWRpbmcoKTsKICAgIH0KICB9LAoKICBjcmVhdGVkKCkgewogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5wb3BzdGF0ZSwgZmFsc2UpOwogIH0sCgogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXRNb2RhbCgpOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIHBvcHN0YXRlKCkgewogICAgICBsZXQgZWxzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZGotbW9kYWwtYmFja2dyb3VuZCcpOwoKICAgICAgaWYgKGVscykgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsc1tpXSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIGluaXRNb2RhbCgpIHsKICAgICAgaWYgKHRoaXMuc2hvd01vZGFsKSB7CiAgICAgICAgY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTsKICAgICAgICBib2R5LnF1ZXJ5U2VsZWN0b3JBbGwoYC5kai1tb2RhbC1iYWNrZ3JvdW5kLiR7dGhpcy5nZXRCYWNrZ3JvdW5kfS5kai1tb2RhbC12aXNpYmxlYCkuZm9yRWFjaChlbCA9PiB7CiAgICAgICAgICBpZiAodGhpcy4kZWwgIT0gZWwpIHsKICAgICAgICAgICAgZG9tLnJlbW92ZUNsYXNzKGVsLCB0aGlzLmdldEJhY2tncm91bmQpOwogICAgICAgICAgICBkb20ucmVtb3ZlQ2xhc3MoZWwsICdkai1tb2RhbC1zaG93Jyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgYm9keS5hcHBlbmQodGhpcy4kZWwpOwogICAgICB9CiAgICB9LAoKICAgIHNob3coY2FsbGJhY2spIHsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5maXJzdE1vZGFsID0gIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHkgLmRqLW1vZGFsLWJhY2tncm91bmQuZGotbW9kYWwtdmlzaWJsZScpOwogICAgICAgIHRoaXMuc2hvd01vZGFsID0gdHJ1ZTsKICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6dmlzaWJsZScsIHRydWUpOwogICAgICAgIHRoaXMuaW5pdE1vZGFsKCk7CgogICAgICAgIGlmICh0aGlzLmxvYWRpbmcpIHsKICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcoKTsKICAgICAgICB9CgogICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCk7CiAgICAgIH0sIDApOwogICAgfSwKCiAgICBjbG9zZSgkZXZlbnQpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ2Nsb3NlJyk7CiAgICAgIGlmICgkZXZlbnQgJiYgJGV2ZW50LnRhcmdldCAhPSB0aGlzLiRlbCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLnNob3dNb2RhbCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuYmVmb3JlQ2xvc2UgJiYgdGhpcy5iZWZvcmVDbG9zZSh0aGlzLmNsb3NlKSA9PT0gZmFsc2UpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlJyk7CiAgICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7CiAgICAgIGxldCBtb2RhbCA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoJy5kai1tb2RhbCcpOwogICAgICBkb20uYWRkQ2xhc3MobW9kYWwsICdkai1tb2RhbC1oaWRlJyk7CgogICAgICBpZiAoYm9keS5xdWVyeVNlbGVjdG9yQWxsKCcuZGotbW9kYWwtYmFja2dyb3VuZC5kai1tb2RhbC12aXNpYmxlJykubGVuZ3RoIDw9IDEpIHsKICAgICAgICBkb20uYWRkQ2xhc3ModGhpcy4kZWwsICdkai1tb2RhbC1oaWRlJyk7CiAgICAgIH0KCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlZCcpOwogICAgICAgIHRoaXMuc2hvd01vZGFsID0gZmFsc2U7CiAgICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOnZpc2libGUnLCBmYWxzZSk7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgbGV0IGxhc3RNb2RhbCA9IGJvZHkucXVlcnlTZWxlY3RvckFsbCgnLmRqLW1vZGFsLWJhY2tncm91bmQuZGotbW9kYWwtdmlzaWJsZScpOwoKICAgICAgICAgIGlmIChsYXN0TW9kYWwubGVuZ3RoKSB7CiAgICAgICAgICAgIGRvbS5hZGRDbGFzcyhsYXN0TW9kYWxbbGFzdE1vZGFsLmxlbmd0aCAtIDFdLCB0aGlzLmdldEJhY2tncm91bmQpOwogICAgICAgICAgfSAvLyBkb20ucmVtb3ZlQ2hpbGQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLCB0aGlzLiRlbCk7CgogICAgICAgIH0pOwogICAgICB9LCAzMDApOwogICAgfSwKCiAgICBoaWRlKCkgewogICAgICB0aGlzLmNsb3NlKCk7CiAgICB9LAoKICAgIG9uT2soKSB7CiAgICAgIGlmICh0aGlzLm9rICYmIHRoaXMub2sodGhpcy5jbG9zZSkgPT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICB0aGlzLmNsb3NlKCk7CiAgICB9LAoKICAgIG9uQ2FuY2VsKCkgewogICAgICBpZiAodGhpcy5jYW5jZWwgJiYgdGhpcy5jYW5jZWwodGhpcy5jbG9zZSkgPT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICB0aGlzLmNsb3NlKCk7CiAgICB9LAoKICAgIGluaXRMb2FkaW5nKCkgewogICAgICBpZiAodGhpcy5sb2FkaW5nKSB7CiAgICAgICAgdGhpcy5zaG93TG9hZGluZygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY2xvc2VMb2FkaW5nKCk7CiAgICAgIH0KICAgIH0sCgogICAgc2hvd0xvYWRpbmcoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTpsb2FkaW5nJywgdHJ1ZSk7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IgJiYgbG9hZGluZy5tZXRob2RzLnNob3dMb2FkaW5nKHsKICAgICAgICAgIGVsOiB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcuZGotbW9kYWwnKSwKICAgICAgICAgIHdoaXRlOiB0cnVlCiAgICAgICAgfSk7CiAgICAgIH0sIDEwKTsKICAgIH0sCgogICAgY2xvc2VMb2FkaW5nKCkgewogICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6bG9hZGluZycsIGZhbHNlKTsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy4kZWwucXVlcnlTZWxlY3RvciAmJiBsb2FkaW5nLm1ldGhvZHMuY2xvc2VMb2FkaW5nKHsKICAgICAgICAgIGVsOiB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcuZGotbW9kYWwnKQogICAgICAgIH0pOwogICAgICB9LCAxMCk7CiAgICB9CgogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AAEA;EACAA,eADA;EAEAC,cAFA;EAIAC;IACAC;MACAC,YADA;MAEAC;IAFA,CADA;IAKAC;MACAF,aADA;MAEAC;IAFA,CALA;IASAE;MAAA;MACAH,YADA;MAEAC,eAFA,CAEA;;IAFA,CATA;IAaAG,aAbA;IAcAC,cAdA;IAeAC,iBAfA;IAgBAC;MACAP,aADA;MAEAC;IAFA,CAhBA;IAoBAO;MACAR,aADA;MAEAC;IAFA,CApBA;IAwBAQ,YAxBA;IAyBAC;MACAV,YADA;MAEAC;IAFA,CAzBA;IA6BAU;MACAX,aADA;MAEAC;IAFA,CA7BA;IAiCAW,gBAjCA;IAkCAC;MACAb,YADA;MAEAC;IAFA,CAlCA;IAsCAa;MACAd,aADA;MAEAC;IAFA,CAtCA;IA0CAc,qBA1CA;IA2CAC;MAAA;MACAhB,aADA;MAEAC;IAFA,CA3CA;IA+CAgB;MACAjB,aADA;MAEAC;IAFA,CA/CA;IAmDAiB;MACAlB,aADA;MAEAC;IAFA,CAnDA;IAuDAkB;MACAnB;IADA,CAvDA;IA0DAoB;MACApB,YADA;MAEAC,gBAFA,CAEA;;IAFA;EA1DA,CAJA;;EAmEAoB;IACA;MACAC,uBADA;MAEAC;IAFA;EAIA,CAxEA;;EAyEAC;IACAC;MACA;IACA,CAHA;;IAIAC;MACA;IACA;;EANA,CAzEA;EAiFAC;IACAzB;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA,CAPA;IAQAiB;MACA;IACA;EAVA,CAjFA;;EA6FAS;IACAC;EACA,CA/FA;;EAgGAC;IACA;EACA,CAlGA;;EAmGAC;IACAC;MACA;;MACA;QACA;UACAC;QACA;MACA;IACA,CARA;;IASAC;MACA;QACA;QACAC;UACA;YACAC;YACAA;UACA;QACA,CALA;QAMAD;MACA;IACA,CApBA;;IAqBAE;MACAC;QACA;QACA;QACA;QACA;;QACA;UACA;QACA;;QACAC;MACA,CATA,EASA,CATA;IAUA,CAhCA;;IAiCAC;MACA;MACA;QACA;MACA;;MACA;QACA;MACA;;MACA;QACA;MACA;;MACA;MACA;MACA;MACAJ;;MACA;QACAA;MACA;;MAEAE;QACA;QACA;QACA;QACA;UACA;;UACA;YACAF;UACA,CAJA,CAKA;;QACA,CANA;MAOA,CAXA,EAWA,GAXA;IAYA,CAhEA;;IAiEAK;MACA;IACA,CAnEA;;IAoEAC;MACA;QACA;MACA;;MACA;IACA,CAzEA;;IA0EAC;MACA;QACA;MACA;;MACA;IACA,CA/EA;;IAgFAC;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA,CAtFA;;IAuFAC;MACA;MACAP;QACA;UAAAQ;UAAAC;QAAA;MACA,CAFA,EAEA,EAFA;IAGA,CA5FA;;IA6FAC;MACA;MACAV;QACA;UAAAQ;QAAA;MACA,CAFA,EAEA,EAFA;IAGA;;EAlGA;AAnGA","names":["name","components","props","title","type","default","visible","size","width","height","maxheight","showfooter","showok","ok","oktext","showcancel","cancel","canceltext","showclose","beforeClose","closable","basic","border","loading","background","data","showModal","firstModal","computed","getBackground","getSize","watch","created","window","mounted","methods","popstate","document","initModal","body","dom","show","setTimeout","callback","close","hide","onOk","onCancel","initLoading","showLoading","el","white","closeLoading"],"sourceRoot":"packages/modal/src","sources":["modal.vue"],"sourcesContent":["<template>\n  <div v-if=\"showModal\" class=\"dj-modal-background\" :class=\"(showModal && 'dj-modal-visible ' || '') + (firstModal && 'dj-modal-show ' || '') + getBackground\" @click=\"(closable !== false && close($event))\">\n    <transition>\n      <div class=\"dj-modal\" :class=\"(border !== false && 'dj-modal-border ' || '') + (basic !== false && 'dj-modal-basic ' || '') + getSize\" :style=\"(width && `width: ${width};` || '') + (height && `height: ${height};` || '') + (maxheight && `max-height: ${maxheight};` || '')\">\n        <div class=\"dj-modal-header\" :class=\"showclose && 'dj-modal-close' || ''\">\n          <slot name=\"header\">{{title}}</slot>\n          <div v-if=\"showclose\" class=\"dj-modal-close\" @click=\"close()\"><dj-icon icon=\"close\"></dj-icon></div>\n        </div>\n        <div class=\"dj-modal-content\" :style=\"(width && `width: ${width};` || '') + (height && `height: calc(${height} - 105px);`) + (maxheight && `max-height: calc(${maxheight} - 105px);` || '')\">\n          <slot></slot>\n        </div>\n        <div v-if=\"showfooter\" class=\"dj-modal-footer\">\n          <slot name=\"footer\">\n            <dj-button v-if=\"showcancel\" @click=\"onCancel\">{{canceltext}}</dj-button>\n            <span v-if=\"showcancel && showok\" class=\"spacing\"></span>\n            <dj-button v-if=\"showok\" type=\"primary\" @click=\"onOk\">{{oktext}}</dj-button>\n          </slot>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\nimport * as dom from '@/utils/dom';\nimport loading from '@/mixins/loading';\n\nexport default {\n  name: 'djModal',\n  components: {\n  },\n  props: {\n    title: {\n      type: String,\n      default: '标题'\n    },\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    size: { // 窗口尺寸\n      type: String,\n      default: 'mini' // mini tiny small large full\n    },\n    width: String,\n    height: String,\n    maxheight: String,\n    showfooter: {\n      type: Boolean,\n      default: true\n    },\n    showok: {\n      type: Boolean,\n      default: true\n    },\n    ok: Function,\n    oktext: {\n      type: String,\n      default: '确定'\n    },\n    showcancel: {\n      type: Boolean,\n      default: true\n    },\n    cancel: Function,\n    canceltext: {\n      type: String,\n      default: '取消'\n    },\n    showclose: {\n      type: Boolean,\n      default: true\n    },\n    beforeClose: Function,\n    closable: { // 点击遮罩层关闭\n      type: Boolean,\n      default: false\n    },\n    basic: {\n      type: Boolean,\n      default: false\n    },\n    border: {\n      type: Boolean,\n      default: false\n    },\n    loading: {\n      type: Boolean\n    },\n    background: {\n      type: String,\n      default: 'black' // black white\n    }\n  },\n  data() {\n    return {\n      showModal: this.visible,\n      firstModal: true\n    };\n  },\n  computed: {\n    getBackground() {\n      return `dj-modal-background-${this.background}`;\n    },\n    getSize() {\n      return `dj-modal-${this.size}`;\n    }\n  },\n  watch: {\n    visible: function(n, o) {\n      if (this.visible) {\n        this.show();\n      } else {\n        this.hide();\n      }\n    },\n    loading: function(n, o) {\n      this.initLoading();\n    }\n  },\n  created(){\n    window.addEventListener('popstate', this.popstate, false);\n  },\n  mounted() {\n    this.initModal();\n  },\n  methods: {\n    popstate() {\n      let els=document.getElementsByClassName('dj-modal-background');\n      if (els){\n        for (let i=0;i<els.length;i++){\n          document.body.removeChild(els[i]);\n        }\n      }\n    },\n    initModal() {\n      if (this.showModal) {\n        const body = document.querySelector('body');\n        body.querySelectorAll(`.dj-modal-background.${this.getBackground}.dj-modal-visible`).forEach(el => {\n          if (this.$el != el) {\n            dom.removeClass(el, this.getBackground);\n            dom.removeClass(el, 'dj-modal-show');\n          }\n        });\n        body.append(this.$el);\n      }\n    },\n    show(callback) {\n      setTimeout(() => {\n        this.firstModal = !document.querySelector('body .dj-modal-background.dj-modal-visible');\n        this.showModal = true;\n        this.$emit('update:visible', true);\n        this.initModal();\n        if (this.loading) {\n          this.showLoading();\n        }\n        callback && callback();\n      }, 0);\n    },\n    close($event) {\n      // console.log('close');\n      if ($event && $event.target != this.$el) {\n        return false;\n      }\n      if (!this.showModal) {\n        return false;\n      }\n      if (this.beforeClose && this.beforeClose(this.close) === false) {\n        return false;\n      }\n      this.$emit('close');\n      const body = document.querySelector('body');\n      let modal = this.$el.querySelector('.dj-modal');\n      dom.addClass(modal, 'dj-modal-hide');\n      if (body.querySelectorAll('.dj-modal-background.dj-modal-visible').length <= 1) {\n        dom.addClass(this.$el, 'dj-modal-hide');\n      }\n\n      setTimeout(() => {\n        this.$emit('closed');\n        this.showModal = false;\n        this.$emit('update:visible', false);\n        this.$nextTick(() => {\n          let lastModal = body.querySelectorAll('.dj-modal-background.dj-modal-visible');\n          if (lastModal.length) {\n            dom.addClass(lastModal[lastModal.length - 1], this.getBackground);\n          }\n          // dom.removeChild(document.querySelector('body'), this.$el);\n        });\n      }, 300);\n    },\n    hide() {\n      this.close();\n    },\n    onOk() {\n      if (this.ok && this.ok(this.close) === false) {\n        return false;\n      }\n      this.close();\n    },\n    onCancel() {\n      if (this.cancel && this.cancel(this.close) === false) {\n        return false;\n      }\n      this.close();\n    },\n    initLoading() {\n      if (this.loading) {\n        this.showLoading();\n      } else {\n        this.closeLoading();\n      }\n    },\n    showLoading() {\n      this.$emit('update:loading', true);\n      setTimeout(() => {\n        this.$el.querySelector && loading.methods.showLoading({el: this.$el.querySelector('.dj-modal'), white: true});\n      }, 10);\n    },\n    closeLoading() {\n      this.$emit('update:loading', false);\n      setTimeout(() => {\n        this.$el.querySelector && loading.methods.closeLoading({el: this.$el.querySelector('.dj-modal')});\n      }, 10);\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n</style>\n"]}]}
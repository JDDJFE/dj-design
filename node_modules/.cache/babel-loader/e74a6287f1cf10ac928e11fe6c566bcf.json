{"remainingRequest":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js!/Users/wangjunxia/work-github/dj-design/node_modules/eslint-loader/index.js??ref--14-0!/Users/wangjunxia/work-github/dj-design/packages/messageBox/src/messageBox.js","dependencies":[{"path":"/Users/wangjunxia/work-github/dj-design/packages/messageBox/src/messageBox.js","mtime":1676257891922},{"path":"/Users/wangjunxia/work-github/dj-design/babel.config.js","mtime":1660011372032},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyogZXNsaW50LWRpc2FibGUgbmV3LWNhcCAqLwpjb25zdCBkZWZhdWx0cyA9IHsKICB2aXNpYmxlOiBmYWxzZSwKICB0aXRsZTogbnVsbCwKICBtZXNzYWdlOiAnJywKICBiZWZvcmVDbG9zZTogbnVsbCwKICBjYW5jZWx0ZXh0OiAn5Y+W5raIJywKICBva3RleHQ6ICfnoa7lrponLAogIGNhbmNlbEJ1dHRvblNob3c6IHRydWUsCiAgdm5vZGU6IGZhbHNlLAogIGJhY2tncm91bmQ6ICdibGFjaycsCiAgY2xvc2FibGU6IGZhbHNlLAogIHNob3djbG9zZTogdHJ1ZSwKICBzaXplOiAnbWluaScsCiAgbG9hZGluZzogZmFsc2UsCiAgZGlzYWJsZWQ6IGZhbHNlLAogIHR5cGU6IG51bGwsCiAgY2xhc3NOYW1lOiAnJwp9OwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBtc2dib3hWdWUgZnJvbSAnLi9tZXNzYWdlQm94LnZ1ZSc7CmNvbnN0IE1lc3NhZ2VCb3hDb25zdHJ1Y3RvciA9IFZ1ZS5leHRlbmQobXNnYm94VnVlKTsKbGV0IGluc3RhbmNlOwpsZXQgbXNnVm1zID0gW107IC8vIOWunuS+i+e7hAovLyDnm5HlkKzmlbDnu4Tlj5jljJYKCmxldCB3YXRjaFByb3h5ID0gbmV3IFByb3h5KHt9LCB7CiAgc2V0KHRhcmdldCwga2V5LCB2YWx1ZSkgewogICAgLy8gdGFyZ2V0W2tleV0gPSB2YWx1ZTsKICAgIE1lc3NhZ2VCb3hDb25zdHJ1Y3Rvci5wcm94eUJhY2sodmFsdWUpOwogICAgcmV0dXJuIHRydWU7CiAgfQoKfSk7Cgpjb25zdCBjcmVhdGVNc2cgPSAoKSA9PiB7CiAgbXNnVm1zLnNwbGljZSgwLCAxKTsKICBzZXRUaW1lb3V0KCgpID0+IHsKICAgIE1lc3NhZ2VCb3hDb25zdHJ1Y3Rvci52bVByb3h5QmFjaygpOwogIH0pOwp9OwoKY29uc3Qgc2hvd05leHRNc2cgPSBjdXJyZW50TXNnID0+IHsKICBpbnN0YW5jZSA9IG5ldyBNZXNzYWdlQm94Q29uc3RydWN0b3IoKTsKCiAgaW5zdGFuY2UuY2FsbGJhY2sgPSAoKSA9PiB7fTsKCiAgaW5zdGFuY2UuY3JlYXRlTXNnID0gY3JlYXRlTXNnOwoKICBpZiAoIWluc3RhbmNlLnZpc2libGUpIHsKICAgIGxldCBvcHRpb25zID0gY3VycmVudE1zZy5vcHRpb25zOwoKICAgIGZvciAobGV0IHByb3AgaW4gb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgewogICAgICAgIGluc3RhbmNlW3Byb3BdID0gb3B0aW9uc1twcm9wXTsKICAgICAgfQogICAgfQoKICAgIGxldCB2bSA9IGluc3RhbmNlLiRtb3VudCgpOwogICAgbXNnVm1zLnB1c2godm0pOwogICAgd2F0Y2hQcm94eVttc2dWbXMubGVuZ3RoIC0gMV0gPSB2bTsKICB9Cn07Cgpjb25zdCBNZXNzYWdlQm94ID0gKG9wdGlvbnMsIGNhbGxiYWNrKSA9PiB7CiAgaWYgKG9wdGlvbnMuY2FsbGJhY2sgJiYgIWNhbGxiYWNrKSB7CiAgICBjYWxsYmFjayA9IG9wdGlvbnMuY2FsbGJhY2s7CiAgfQoKICBsZXQgb2JqID0gewogICAgb3B0aW9uczogeyAuLi5kZWZhdWx0cywKICAgICAgLi4ub3B0aW9ucwogICAgfSwKICAgIGNhbGxiYWNrOiBjYWxsYmFjawogIH07CgogIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGotbWVzc2FnZS1ib3gnKSkgewogICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIHNob3dOZXh0TXNnKG9iaik7CiAgICB9LCAzMDApOwogIH0gZWxzZSB7CiAgICBzaG93TmV4dE1zZyhvYmopOwogIH0KfTsKCk1lc3NhZ2VCb3guYWxlcnQgPSAobWVzc2FnZSwgdGl0bGUsIGNhbGxiYWNrKSA9PiB7CiAgaWYgKHR5cGVvZiB0aXRsZSA9PT0gJ29iamVjdCcpIHsKICAgIGNhbGxiYWNrID0gdGl0bGU7CiAgICB0aXRsZSA9ICcnOwogIH0gZWxzZSBpZiAodGl0bGUgPT09IHZvaWQgMCkgewogICAgdGl0bGUgPSAnJzsKICB9CgogIHJldHVybiBNZXNzYWdlQm94KHsgLi4uewogICAgICB0aXRsZTogdGl0bGUsCiAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsCiAgICAgICR0eXBlOiAnYWxlcnQnLAogICAgICBjYW5jZWxCdXR0b25TaG93OiBmYWxzZQogICAgfSwKICAgIC4uLmNhbGxiYWNrCiAgfSk7Cn07CgpNZXNzYWdlQm94LmNvbmZpcm0gPSAobWVzc2FnZSwgdGl0bGUsIGNhbGxiYWNrKSA9PiB7CiAgaWYgKHR5cGVvZiB0aXRsZSA9PT0gJ29iamVjdCcpIHsKICAgIGNhbGxiYWNrID0gdGl0bGU7CiAgICB0aXRsZSA9ICcnOwogIH0gZWxzZSBpZiAodGl0bGUgPT09IHZvaWQgMCkgewogICAgdGl0bGUgPSAnJzsKICB9CgogIHJldHVybiBNZXNzYWdlQm94KHsgLi4uewogICAgICB0aXRsZTogdGl0bGUsCiAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsCiAgICAgICR0eXBlOiAnY29uZmlybScKICAgIH0sCiAgICAuLi5jYWxsYmFjawogIH0pOwp9OwoKTWVzc2FnZUJveC5jbG9zZSA9ICgpID0+IHsKICBtc2dWbXMuZm9yRWFjaCh2bSA9PiB7CiAgICB2bS5kb0Nsb3NlKCk7CiAgfSk7Cn07CgpNZXNzYWdlQm94Q29uc3RydWN0b3Iudm1Qcm94eUJhY2sgPSAoKSA9PiB7CiAgaWYgKCFtc2dWbXMubGVuZ3RoKSByZXR1cm47CgogIGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keSAuZGotbWVzc2FnZS1ib3guZGotbW9kYWwtdmlzaWJsZScpKSB7CiAgICBsZXQgc3RhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5IC5kai1tb2RhbC1iYWNrZ3JvdW5kLmRqLW1vZGFsLXZpc2libGUnKTsKICAgIGlmIChzdGF0ZSkgbXNnVm1zWzBdLmJhY2tncm91bmQgPSAnJzsKICB9CgogIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobXNnVm1zWzBdLiRlbCk7CiAgVnVlLm5leHRUaWNrKCgpID0+IHsKICAgIG1zZ1Ztc1swXS52aXNpYmxlID0gdHJ1ZTsKICB9KTsKfTsKCk1lc3NhZ2VCb3hDb25zdHJ1Y3Rvci5wcm94eUJhY2sgPSBuID0+IHsKICBsZXQgdGltZSA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgLy8g5ou/5Yiw5Lu75Yqh6Zif5YiXCiAgICBNZXNzYWdlQm94Q29uc3RydWN0b3Iudm1Qcm94eUJhY2soKTsKICAgIGNsZWFyVGltZW91dCh0aW1lKTsKICB9LCAwKTsKfTsKCmV4cG9ydCBkZWZhdWx0IE1lc3NhZ2VCb3g7CmV4cG9ydCB7IE1lc3NhZ2VCb3ggfTs="},{"version":3,"names":["defaults","visible","title","message","beforeClose","canceltext","oktext","cancelButtonShow","vnode","background","closable","showclose","size","loading","disabled","type","className","Vue","msgboxVue","MessageBoxConstructor","extend","instance","msgVms","watchProxy","Proxy","set","target","key","value","proxyBack","createMsg","splice","setTimeout","vmProxyBack","showNextMsg","currentMsg","callback","options","prop","hasOwnProperty","vm","$mount","push","length","MessageBox","obj","document","querySelector","alert","$type","confirm","close","forEach","doClose","state","body","appendChild","$el","nextTick","n","time","clearTimeout"],"sources":["/Users/wangjunxia/work-github/dj-design/packages/messageBox/src/messageBox.js"],"sourcesContent":["/* eslint-disable new-cap */\nconst defaults = {\n  visible: false,\n  title: null,\n  message: '',\n  beforeClose: null,\n  canceltext: '取消',\n  oktext: '确定',\n  cancelButtonShow: true,\n  vnode: false,\n  background: 'black',\n  closable: false,\n  showclose: true,\n  size: 'mini',\n  loading: false,\n  disabled: false,\n  type: null,\n  className: ''\n};\n\nimport Vue from 'vue';\nimport msgboxVue from './messageBox.vue';\n\nconst MessageBoxConstructor = Vue.extend(msgboxVue);\n\nlet instance;\nlet msgVms = []; // 实例组\n\n// 监听数组变化\nlet watchProxy = new Proxy({}, {\n  set(target, key, value) {\n    // target[key] = value;\n    MessageBoxConstructor.proxyBack(value);\n    return true;\n  }\n});\n\nconst createMsg = () => {\n  msgVms.splice(0, 1);\n  setTimeout(() => {\n    MessageBoxConstructor.vmProxyBack();\n  });\n};\n\nconst showNextMsg = (currentMsg) => {\n  instance = new MessageBoxConstructor();\n  instance.callback = () => {};\n  instance.createMsg = createMsg;\n  if (!instance.visible) {\n    let options = currentMsg.options;\n    for (let prop in options) {\n      if (options.hasOwnProperty(prop)) {\n        instance[prop] = options[prop];\n      }\n    }\n    let vm = instance.$mount();\n    msgVms.push(vm);\n    watchProxy[msgVms.length - 1] = vm;\n  }\n};\n\nconst MessageBox = (options, callback) => {\n  if (options.callback && !callback) {\n    callback = options.callback;\n  }\n  let obj = {\n    options: { ...defaults, ...options },\n    callback: callback\n  };\n  if (document.querySelector('.dj-message-box')) {\n    setTimeout(() => {\n      showNextMsg(obj);\n    }, 300);\n  } else {\n    showNextMsg(obj);\n  }\n};\n\nMessageBox.alert = (message, title, callback) => {\n  if (typeof title === 'object') {\n    callback = title;\n    title = '';\n  } else if (title === void 0) {\n    title = '';\n  }\n  return MessageBox({\n    ...{\n      title: title,\n      message: message,\n      $type: 'alert',\n      cancelButtonShow: false\n    }, ...callback\n  });\n};\n\nMessageBox.confirm = (message, title, callback) => {\n  if (typeof title === 'object') {\n    callback = title;\n    title = '';\n  } else if (title === void 0) {\n    title = '';\n  }\n  return MessageBox({\n    ...{\n      title: title,\n      message: message,\n      $type: 'confirm'\n    }, ...callback\n  });\n};\n\nMessageBox.close = () => {\n  msgVms.forEach((vm) => {\n    vm.doClose();\n  });\n};\n\nMessageBoxConstructor.vmProxyBack = () => {\n  if (!msgVms.length) return;\n  if (!document.querySelector('body .dj-message-box.dj-modal-visible')) {\n    let state = document.querySelector('body .dj-modal-background.dj-modal-visible');\n    if (state) msgVms[0].background = '';\n  }\n  document.body.appendChild(msgVms[0].$el);\n  Vue.nextTick(() => {\n    msgVms[0].visible = true;\n  });\n};\n\nMessageBoxConstructor.proxyBack = (n) => {\n  let time = setTimeout(() => {\n    // 拿到任务队列\n    MessageBoxConstructor.vmProxyBack();\n    clearTimeout(time);\n  }, 0);\n};\nexport default MessageBox;\nexport { MessageBox };\n\n"],"mappings":"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"}]}
{"remainingRequest":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js!/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangjunxia/work-github/dj-design/packages/json/src/json.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangjunxia/work-github/dj-design/packages/json/src/json.vue","mtime":1675737648897},{"path":"/Users/wangjunxia/work-github/dj-design/babel.config.js","mtime":1660011372032},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8g5byV5YWl5YWo5bGA5a6e5L6LCmltcG9ydCBfQ29kZU1pcnJvciBmcm9tICdjb2RlbWlycm9yJzsgLy8gaW1wb3J0ICcuL2RpZmZfbWF0Y2hfcGF0Y2gnCi8vIGltcG9ydCB7Y29kZW1pcnJvcn0gZnJvbSAndnVlLWNvZGVtaXJyb3InCgppbXBvcnQgJ2NvZGVtaXJyb3IvYWRkb24vc2VhcmNoL3NlYXJjaCc7IC8vIGltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9zZWFyY2gvYW5ub3RhdGVzY3JvbGxiYXInCgppbXBvcnQgJ2NvZGVtaXJyb3IvYWRkb24vc2VhcmNoL21hdGNoZXNvbnNjcm9sbGJhcic7CmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9zZWFyY2gvc2VhcmNoY3Vyc29yJzsKaW1wb3J0ICdjb2RlbWlycm9yL2FkZG9uL3NlYXJjaC9tYXRjaC1oaWdobGlnaHRlcic7CmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9kaWFsb2cvZGlhbG9nLmNzcyc7CmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9tZXJnZS9tZXJnZS5qcyc7CmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9tZXJnZS9tZXJnZS5jc3MnOyAvLyAvLyDmipjlj6AKCmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9mb2xkL2ZvbGRndXR0ZXIuY3NzJzsKaW1wb3J0ICdjb2RlbWlycm9yL2FkZG9uL2ZvbGQvZm9sZGNvZGUuanMnOwppbXBvcnQgJ2NvZGVtaXJyb3IvYWRkb24vZm9sZC9mb2xkZ3V0dGVyLmpzJzsKaW1wb3J0ICdjb2RlbWlycm9yL2FkZG9uL2ZvbGQveG1sLWZvbGQuanMnOwppbXBvcnQgJ2NvZGVtaXJyb3IvYWRkb24vZm9sZC9pbmRlbnQtZm9sZC5qcyc7CmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9mb2xkL2JyYWNlLWZvbGQnOwppbXBvcnQgJ2NvZGVtaXJyb3IvYWRkb24vZm9sZC9tYXJrZG93bi1mb2xkLmpzJzsKaW1wb3J0ICdjb2RlbWlycm9yL2FkZG9uL2ZvbGQvY29tbWVudC1mb2xkLmpzJzsgLy8gLy8gaW1wb3J0ICdjb2RlbWlycm9yL2FkZG9uL3NlbGVjdGlvbi9hY3RpdmUtbGluZSc7Ci8vIGltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9lZGl0L2Nsb3NlYnJhY2tldHMnOwovLyBpbXBvcnQgJ2NvZGVtaXJyb3IvYWRkb24vZWRpdC9tYXRjaGJyYWNrZXRzJzsKLy8g5qC45b+D5qC35byPCgppbXBvcnQgJ2NvZGVtaXJyb3IvbGliL2NvZGVtaXJyb3IuY3NzJzsgLy8g6ZyA6KaB5byV5YWl5YW35L2T55qE6K+t5rOV6auY5Lqu5bqT5omN5Lya5pyJ5a+55bqU55qE6K+t5rOV6auY5Lqu5pWI5p6cCi8vIGNvZGVtaXJyb3Ig5a6Y5pa55YW25a6e5pSv5oyB6YCa6L+HIC9hZGRvbi9tb2RlL2xvYWRtb2RlLmpzIOWSjCAvbW9kZS9tZXRhLmpzIOadpeWunueOsOWKqOaAgeWKoOi9veWvueW6lOivreazlemrmOS6ruW6kwovLyDkvYYgdnVlIOiyjOS8vOayoeacieaXoOazleWcqOWunuS+i+WIneWni+WMluWQjuWGjeWKqOaAgeWKoOi9veWvueW6lCBKUyDvvIzmiYDku6XmraTlpITmiY3miorlr7nlupTnmoQgSlMg5o+Q5YmN5byV5YWlCgppbXBvcnQgJ2NvZGVtaXJyb3IvbW9kZS9tZXRhLmpzJzsgLy8gaW1wb3J0ICdjb2RlbWlycm9yL21vZGUvamF2YXNjcmlwdC9qYXZhc2NyaXB0JwovLyBpbXBvcnQgJ2NvZGVtaXJyb3IvbW9kZS9jbGlrZS9jbGlrZScKLy8gaW1wb3J0ICdjb2RlbWlycm9yL21vZGUvZ28vZ28nCi8vIGltcG9ydCAnY29kZW1pcnJvci9tb2RlL2h0bWxtaXhlZC9odG1sbWl4ZWQnCi8vIGltcG9ydCAnY29kZW1pcnJvci9tb2RlL2h0dHAvaHR0cCcKLy8gaW1wb3J0ICdjb2RlbWlycm9yL21vZGUvcGhwL3BocCcKLy8gaW1wb3J0ICdjb2RlbWlycm9yL21vZGUvcHl0aG9uL3B5dGhvbicKLy8gaW1wb3J0ICdjb2RlbWlycm9yL21vZGUvaHR0cC9odHRwJwovLyBpbXBvcnQgJ2NvZGVtaXJyb3IvbW9kZS9zcWwvc3FsJwovLyBpbXBvcnQgJ2NvZGVtaXJyb3IvbW9kZS92dWUvdnVlJwovLyBpbXBvcnQgJ2NvZGVtaXJyb3IvbW9kZS94bWwveG1sJwovLyBpbXBvcnQgJ2NvZGVtaXJyb3IvbW9kZS9jc3MvY3NzLmpzJzsKLy8gaW1wb3J0ICdjb2RlbWlycm9yL21vZGUvbWFya2Rvd24vbWFya2Rvd24uanMnOwovLyBpbXBvcnQgJ2NvZGVtaXJyb3IvbW9kZS9yL3IuanMnOwovLyBpbXBvcnQgJ2NvZGVtaXJyb3IvbW9kZS9zaGVsbC9zaGVsbC5qcyc7Ci8vIGltcG9ydCAnY29kZW1pcnJvci9tb2RlL3N3aWZ0L3N3aWZ0LmpzJzsKLy8g5byV5YWl5Li76aKY5ZCO6L+Y6ZyA6KaB5ZyoIG9wdGlvbnMg5Lit5oyH5a6a5Li76aKY5omN5Lya55Sf5pWICi8vIGltcG9ydCAnY29kZW1pcnJvci90aGVtZS9jb2JhbHQuY3NzJzsKLy8gaW1wb3J0ICJjb2RlbWlycm9yL3RoZW1lL2FtYmlhbmNlLmNzcyI7ICAvLyDov5nph4zlvJXlhaXnmoTmmK/kuLvpopjmoLflvI/vvIzmoLnmja7orr7nva7nmoR0aGVtZeeahOS4u+mimOW8leWFpe+8jOS4gOWumuimgeW8leWFpe+8ge+8gQovLyBpbXBvcnQgJ2NvZGVtaXJyb3IvdGhlbWUvZWNsaXBzZS5jc3MnOwovLyBpbXBvcnQgJ2NvZGVtaXJyb3IvdGhlbWUvbW9ub2thaS5jc3MnCi8vIGltcG9ydCAnY29kZW1pcnJvci90aGVtZS9ibGFja2JvYXJkLmNzcyc7CgppbXBvcnQgJ2NvZGVtaXJyb3IvYWRkb24vZGlzcGxheS9mdWxsc2NyZWVuLmNzcyc7IC8vIOWFqOWxj+aYvuekuue8lui+keWZqAoKaW1wb3J0ICdjb2RlbWlycm9yL2FkZG9uL2Rpc3BsYXkvZnVsbHNjcmVlbi5qcyc7IC8vIOWFqOWxj+aYvuekuue8lui+keWZqAovLyDlvJXlhaXku6PnoIHoh6rliqjmj5DnpLrmj5Lku7YKCmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9oaW50L3Nob3ctaGludC5jc3MnOwppbXBvcnQgJ2NvZGVtaXJyb3IvYWRkb24vaGludC9zcWwtaGludCc7CmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9oaW50L3Nob3ctaGludCc7CmltcG9ydCAnY29kZW1pcnJvci9hZGRvbi9kaXNwbGF5L3BhbmVsJzsgLy8g5bCd6K+V6I635Y+W5YWo5bGA5a6e5L6LCgpjb25zdCBDb2RlTWlycm9yID0gd2luZG93LkNvZGVNaXJyb3IgfHwgX0NvZGVNaXJyb3I7CmltcG9ydCBEaWZmTWF0Y2hQYXRjaCBmcm9tICdkaWZmLW1hdGNoLXBhdGNoJzsgLy8gaW1wb3J0ICcuL2NvZGVNaXJyb3JNb2RhbC9yZXZpc2VkLXNlYXJjaCcKCmltcG9ydCAnLi9zZWFyY2gnOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2FtZWxjYXNlCgp3aW5kb3cuZGlmZl9tYXRjaF9wYXRjaCA9IERpZmZNYXRjaFBhdGNoOwp3aW5kb3cuRElGRl9ERUxFVEUgPSAtMTsKd2luZG93LkRJRkZfSU5TRVJUID0gMTsKd2luZG93LkRJRkZfRVFVQUwgPSAwOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2RqSnNvbicsCiAgcHJvcHM6IHsKICAgIHdpZHRoOiB7CiAgICAgIHR5cGU6IFN0cmluZyB8fCBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAogICAgaGVpZ2h0OiB7CiAgICAgIHR5cGU6IFN0cmluZyB8fCBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAogICAgLy8g5aSW6YOo5Lyg5YWl55qE5YaF5a6577yM55So5LqO5a6e546w5Y+M5ZCR57uR5a6aCiAgICB2YWx1ZTogU3RyaW5nLAogICAgdmFsdWVMZWZ0OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIHZhbHVlUmlnaHQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAganNvbkZvcm1hdDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgLy8g6K+t6KiACiAgICBsYW5ndWFnZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdqYXZhc2NyaXB0JwogICAgfSwKICAgIC8vIOS4u+mimAogICAgdGhlbWU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnZWNsaXBzZScKICAgIH0sCiAgICBkaXNhYmxlZDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIC8vIGNoYW5nZVN0YXR1czogewogICAgLy8gICB0eXBlOiBCb29sZWFuLAogICAgLy8gICBkZWZhdWx0OiBmYWxzZQogICAgLy8gfSwKICAgIC8vIOS7o+eggeWvueavlAogICAgZGlmZjogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIC8vIOW3puS+p+mFjee9rgogICAgbGVmdENvbmZpZzogewogICAgICB0eXBlOiBPYmplY3QsCgogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7fTsKICAgICAgfQoKICAgIH0sCiAgICAvLyDlt6bkvqfphY3nva4KICAgIGNvbmZpZ1BhcmFtczogewogICAgICB0eXBlOiBPYmplY3QsCgogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7fTsKICAgICAgfQoKICAgIH0sCiAgICAvLyDlj7PkvqfphY3nva4KICAgIHJpZ2h0Q29uZmlnOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CgogICAgfSwKICAgIC8vIOihjOmrmOS6rgogICAgbWFya1RleHQ6IHsKICAgICAgdHlwZTogQXJyYXksCgogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQoKICAgIH0sCiAgICAvLyDpgInkuK0KICAgIHNlbGVjdGlvbkxpbmU6IHsKICAgICAgdHlwZTogQXJyYXksCgogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQoKICAgIH0sCiAgICAvLyDooYzmoIforrAKICAgIGd1dHRlck1hcmtlcjogewogICAgICB0eXBlOiBBcnJheSwKCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CgogICAgfSwKICAgIC8vIOinhuWbvui3s+i9rOWIsOafkOihjAogICAgc2Nyb2xsSW50b1ZpZXc6IHsKICAgICAgdHlwZTogT2JqZWN0LAoKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0KCiAgICB9LAogICAgLy8g54Sm54K55Yiw5p+Q6KGMCiAgICBzZXRDdXJzb3JMaW5lOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CgogICAgfQogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjaGFuZ2VTdGF0dXM6IDAsCiAgICAgIG1hcEFycmF5OiBbXSwKICAgICAgLy8g5YaF6YOo55yf5a6e55qE5YaF5a65CiAgICAgIGNvZGU6ICcnLAogICAgICAvLyDnvJbovpHlmajlrp7kvosKICAgICAgY29kZXI6IG51bGwsCiAgICAgIC8vIOm7mOiupOmFjee9rgogICAgICBvcHRpb25zOiB7CiAgICAgICAgLy8g57yp6L+b5qC85byPCiAgICAgICAgLy8gdGFiU2l6ZTogMiwKICAgICAgICAvLyDmmL7npLrooYzlj7cKICAgICAgICBsaW5lTnVtYmVyczogdHJ1ZSwKICAgICAgICBsaW5lOiB0cnVlLAogICAgICAgIHRhYlNpemU6IDQsCgogICAgICAgIC8qIGV4dHJhS2V5czogeyAvLyDop6blj5HmjInplK4KICAgICAgICAgICAnQ3RybCc6ICdhdXRvY29tcGxldGUnCiAgICAgICAgIH0sKi8KICAgICAgICAvLyBtb2RlOiB7bmFtZTogJ2phdmFzY3JpcHQnLCBqc29uOiB0cnVlfSwKICAgICAgICAvLyB0aGVtZTogImVjbGlwc2UiLAogICAgICAgIHN0eWxlQWN0aXZlTGluZTogdHJ1ZSwKICAgICAgICBmb2xkZ3V0dGVyOiB0cnVlLAogICAgICAgIGd1dHRlcnM6IFsnQ29kZU1pcnJvci1saW5lbnVtYmVycycsICdDb2RlTWlycm9yLWZvbGRndXR0ZXInLCAnQ29kZU1pcnJvci1saW50LW1hcmtlcnMnLCAnYnJlYWtwb2ludHMnLCAnbm90ZS1ndXR0ZXInXSwKICAgICAgICBsaW5lV3JhcHBpbmc6IHRydWUsCiAgICAgICAgLy8g5Luj56CB5oqY5Y+gCiAgICAgICAgZm9sZEd1dHRlcjogdHJ1ZSwKICAgICAgICBtYXRjaEJyYWNrZXRzOiB0cnVlLAogICAgICAgIC8vIOaLrOWPt+WMuemFjQogICAgICAgIGF1dG9DbG9zZUJyYWNrZXRzOiB0cnVlLAogICAgICAgIHRleHRXcmFwcGluZzogdHJ1ZSAvLyBoaWdobGlnaHRTZWxlY3Rpb25NYXRjaGVzOiB7c2hvd1Rva2VuOiB0cnVlLCBhbm5vdGF0ZVNjcm9sbGJhcjogZmFsc2V9CiAgICAgICAgLy8gaGlnaGxpZ2h0U2VsZWN0aW9uTWF0Y2hlczogewogICAgICAgIC8vICAgbWluQ2hhcnM6IDIsCiAgICAgICAgLy8gICBzaG93VG9rZW46L1xiKGphdmEpXGIvLAogICAgICAgIC8vICAgc3R5bGU6J21hdGNoaGlnaGxpZ2h0JywKICAgICAgICAvLyAgIGFubm90YXRlU2Nyb2xsYmFyOiB0cnVlCiAgICAgICAgLy8gfQoKICAgICAgfSwKICAgICAgb3JpZ0xlZnQ6IG51bGwsCiAgICAgIG9yaWdSaWdodDogbnVsbAogICAgfTsKICB9LAoKICBjb21wdXRlZDogewogICAgdG9vbHRpcElkKCkgewogICAgICByZXR1cm4gYGRqLWpzb24tJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMCl9YDsKICAgIH0sCgogICAganNvblZhbHVlKCkgewogICAgICByZXR1cm4gdGhpcy5nZXRKc29uVmFsdWUodGhpcy52YWx1ZSk7CiAgICB9LAoKICAgIGpzb25WYWx1ZUxlZnQoKSB7CiAgICAgIHJldHVybiB0aGlzLmdldEpzb25WYWx1ZSh0aGlzLnZhbHVlTGVmdCk7CiAgICB9LAoKICAgIGpzb25WYWx1ZVJpZ2h0KCkgewogICAgICByZXR1cm4gdGhpcy5nZXRKc29uVmFsdWUodGhpcy52YWx1ZVJpZ2h0KTsKICAgIH0KCiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudmFsdWUsICdtb3VudGVkIGNvZGXnvJbovpHlmagnKQogICAgLy8g5Yid5aeL5YyWCiAgICAvLyBjb25zb2xlLmxvZyh3aW5kb3cuQ29kZU1pcnJvcixDb2RlTWlycm9yLENvZGVNaXJyb3I/Lm1vZGVJbmZvLCcxMTExMTExJyk7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IChDb2RlTWlycm9yID09PSBudWxsIHx8IENvZGVNaXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfQ29kZU1pcnJvciRtb2RlSW5mbyA9IENvZGVNaXJyb3IubW9kZUluZm8pID09PSBudWxsIHx8IF9Db2RlTWlycm9yJG1vZGVJbmZvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfQ29kZU1pcnJvciRtb2RlSW5mby5sZW5ndGgpOyBpKyspIHsKICAgICAgdmFyIF9Db2RlTWlycm9yJG1vZGVJbmZvOwoKICAgICAgbGV0IG1vZGVJbmZvID0gQ29kZU1pcnJvci5tb2RlSW5mb1tpXTsKICAgICAgdGhpcy5tYXBBcnJheS5wdXNoKHsKICAgICAgICBuYW1lOiBtb2RlSW5mby5uYW1lLAogICAgICAgIG1vZGVJZDogbW9kZUluZm8ubW9kZQogICAgICB9KTsKICAgIH0gLy8gY29uc29sZS5sb2codGhpcy5tYXBBcnJheSwgJ21hcEFycmF5Jyk7CgoKICAgIGlmICh0aGlzLmRpZmYpIHsKICAgICAgdGhpcy5vcmlnTGVmdCA9IHRoaXMuanNvblZhbHVlTGVmdDsKICAgICAgdGhpcy5jb2RlID0gdGhpcy5qc29uVmFsdWU7CiAgICAgIHRoaXMub3JpZ1JpZ2h0ID0gdGhpcy5qc29uVmFsdWVSaWdodDsKICAgICAgdGhpcy5pbml0RGlmZih0aGlzLmpzb25WYWx1ZUxlZnQsIHRoaXMuanNvblZhbHVlLCB0aGlzLmpzb25WYWx1ZVJpZ2h0KTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuaW5pdCgpOwogICAgfQoKICAgIHRoaXMudGhlbWVDaGFuZ2UoKTsKICAgIHRoaXMubW9kZUNoYW5nZSgpOwogICAgdGhpcy5zaXplQ2hhbmdlKCk7CiAgfSwKCiAgd2F0Y2g6IHsKICAgICdjb25maWdQYXJhbXMucmVhZE9ubHknOiB7CiAgICAgIGhhbmRsZXIodmFsLCBvbGRWYWwpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyh2YWwsIG9sZFZhbCwnY29uZmlnUGFyYW1zMTEnKTsKICAgICAgICB0aGlzLndhdGNoQ29uZmlnRnVuKHZhbCwgb2xkVmFsLCAnY29uZmlnUGFyYW1zJywgJ3JlYWRPbmx5Jyk7CiAgICAgIH0sCgogICAgICBkZWVwOiB0cnVlCiAgICB9LAogICAgJ2xlZnRDb25maWcucmVhZE9ubHknOiB7CiAgICAgIGhhbmRsZXIodmFsLCBvbGRWYWwpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyh2YWwsIG9sZFZhbCwnbGVmdENvbmZpZycpOwogICAgICAgIHRoaXMud2F0Y2hDb25maWdGdW4odmFsLCBvbGRWYWwsICdsZWZ0Q29uZmlnJywgJ3JlYWRPbmx5Jyk7CiAgICAgIH0sCgogICAgICBkZWVwOiB0cnVlCiAgICB9LAogICAgJ3JpZ2h0Q29uZmlnLnJlYWRPbmx5JzogewogICAgICBoYW5kbGVyKHZhbCwgb2xkVmFsKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2codmFsLCBvbGRWYWwsJ3JpZ2h0Q29uZmlnJyk7CiAgICAgICAgdGhpcy53YXRjaENvbmZpZ0Z1bih2YWwsIG9sZFZhbCwgJ3JpZ2h0Q29uZmlnJywgJ3JpZ2h0Q29uZmlnJyk7CiAgICAgIH0sCgogICAgICBkZWVwOiB0cnVlCiAgICB9LAoKICAgIHZhbHVlKHZhbCkgewogICAgICAvKiBjb25zb2xlLmxvZyh0aGlzLnZhbHVlTGVmdCwgdmFsLCAndmFsdWU9PT09PScpOwogICAgICBpZiAodGhpcy5kaWZmKSB7CiAgICAgICAgaWYgKHRoaXMuY29kZXI/LmVkaXQpIHsKICAgICAgICAgIHRoaXMuY2hhbmdlU3RhdHVzRnVuKHRoaXMuY29kZXI/LmVkaXQsIHRydWUsIHRoaXMudmFsdWUpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNoYW5nZVN0YXR1c0Z1bih0aGlzLmNvZGVyLCB0cnVlLCB0aGlzLnZhbHVlKTsKICAgICAgfSovCiAgICAgIGlmICh0aGlzLnZhbHVlICE9IHRoaXMuY29kZSkgewogICAgICAgIHRoaXMudXBkYXRlZCgpOwogICAgICB9CiAgICB9LAoKICAgIC8qIGNvZGUodmFsKSB7CiAgICAgLy8gY29uc29sZS5sb2codmFsLCAnY29kZT09PT09Jyk7CiAgICB9LCovCiAgICB2YWx1ZUxlZnQodmFsKSB7CiAgICAgIGlmICh0aGlzLnZhbHVlTGVmdCAhPSB0aGlzLm9yaWdMZWZ0KSB7CiAgICAgICAgdGhpcy51cGRhdGVkKCk7CiAgICAgIH0KICAgICAgLyogY29uc29sZS5sb2codmFsLCAndmFsdWVMZWZ0PT09PT0nKTsKICAgICAgdGhpcy5vcmlnTGVmdCA9IHZhbDsKICAgICAgdGhpcy5jaGFuZ2VTdGF0dXNGdW4odGhpcy5jb2Rlcj8ubGVmdD8ub3JpZywgdHJ1ZSwgdGhpcy52YWx1ZUxlZnQpOwogICAgICAvLyBjb25zb2xlLmxvZyh2YWwsIHRoaXMudmFsdWVMZWZ0LCAndmFsdWVMZWZ0Jyk7CiAgICAgIC8vIGlmICh0aGlzLmRpZmYpIHsKICAgICAgLy8gICB0aGlzLmluaXREaWZmKHRoaXMub3JpZ0xlZnQsIHRoaXMudmFsdWUsIHRoaXMub3JpZ1JpZ2h0KQogICAgICAvLyB9Ki8KCiAgICB9LAoKICAgIHZhbHVlUmlnaHQodmFsKSB7CiAgICAgIGlmICh0aGlzLnZhbHVlUmlnaHQgIT0gdGhpcy5vcmlnUmlnaHQpIHsKICAgICAgICB0aGlzLnVwZGF0ZWQoKTsKICAgICAgfQogICAgICAvKiB0aGlzLm9yaWdSaWdodCA9IHZhbDsKICAgICAgLy8gaWYgKHRoaXMuZGlmZikgewogICAgICAvLyAgIHRoaXMuaW5pdERpZmYodGhpcy5vcmlnTGVmdCwgdGhpcy52YWx1ZSwgdGhpcy5vcmlnUmlnaHQpCiAgICAgIC8vIH0KICAgICAgaWYgKHRoaXMuY29kZXI/LnJpZ2h0Py5vcmlnKSB7CiAgICAgICAgdGhpcy5jaGFuZ2VTdGF0dXNGdW4odGhpcy5jb2Rlcj8ucmlnaHQ/Lm9yaWcsIHRydWUsIHRoaXMudmFsdWVSaWdodCk7CiAgICAgIH0qLwoKICAgIH0sCgogICAgdGhlbWUoKSB7CiAgICAgIHRoaXMudGhlbWVDaGFuZ2UoKTsKICAgIH0sCgogICAgbGFuZ3VhZ2UodmFsKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMubGFuZ3VhZ2UsICdsYW5ndWFnZScpOwogICAgICB0aGlzLm1vZGVDaGFuZ2UoKTsKICAgIH0sCgogICAgY2hhbmdlU3RhdHVzKHZhbCkgewogICAgICAvLyBjb25zb2xlLmxvZyh2YWwsJ2NoYW5nZVN0YXR1cycpOwogICAgICBpZiAodGhpcy5kaWZmKSB7CiAgICAgICAgdmFyIF90aGlzJGNvZGVyLCBfdGhpcyRjb2RlciRsZWZ0LCBfdGhpcyRjb2RlcjMsIF90aGlzJGNvZGVyNSwgX3RoaXMkY29kZXI1JHJpZ2h0OwoKICAgICAgICBpZiAoKF90aGlzJGNvZGVyID0gdGhpcy5jb2RlcikgIT09IG51bGwgJiYgX3RoaXMkY29kZXIgIT09IHZvaWQgMCAmJiAoX3RoaXMkY29kZXIkbGVmdCA9IF90aGlzJGNvZGVyLmxlZnQpICE9PSBudWxsICYmIF90aGlzJGNvZGVyJGxlZnQgIT09IHZvaWQgMCAmJiBfdGhpcyRjb2RlciRsZWZ0Lm9yaWcpIHsKICAgICAgICAgIHZhciBfdGhpcyRjb2RlcjIsIF90aGlzJGNvZGVyMiRsZWZ0OwoKICAgICAgICAgIHRoaXMuY2hhbmdlU3RhdHVzRnVuKChfdGhpcyRjb2RlcjIgPSB0aGlzLmNvZGVyKSA9PT0gbnVsbCB8fCBfdGhpcyRjb2RlcjIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGhpcyRjb2RlcjIkbGVmdCA9IF90aGlzJGNvZGVyMi5sZWZ0KSA9PT0gbnVsbCB8fCBfdGhpcyRjb2RlcjIkbGVmdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkY29kZXIyJGxlZnQub3JpZywgdmFsLCB0aGlzLmpzb25WYWx1ZUxlZnQpOwogICAgICAgIH0KCiAgICAgICAgaWYgKChfdGhpcyRjb2RlcjMgPSB0aGlzLmNvZGVyKSAhPT0gbnVsbCAmJiBfdGhpcyRjb2RlcjMgIT09IHZvaWQgMCAmJiBfdGhpcyRjb2RlcjMuZWRpdCkgewogICAgICAgICAgdmFyIF90aGlzJGNvZGVyNDsKCiAgICAgICAgICB0aGlzLmNoYW5nZVN0YXR1c0Z1bigoX3RoaXMkY29kZXI0ID0gdGhpcy5jb2RlcikgPT09IG51bGwgfHwgX3RoaXMkY29kZXI0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRjb2RlcjQuZWRpdCwgdmFsLCB0aGlzLmpzb25WYWx1ZSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoKF90aGlzJGNvZGVyNSA9IHRoaXMuY29kZXIpICE9PSBudWxsICYmIF90aGlzJGNvZGVyNSAhPT0gdm9pZCAwICYmIChfdGhpcyRjb2RlcjUkcmlnaHQgPSBfdGhpcyRjb2RlcjUucmlnaHQpICE9PSBudWxsICYmIF90aGlzJGNvZGVyNSRyaWdodCAhPT0gdm9pZCAwICYmIF90aGlzJGNvZGVyNSRyaWdodC5vcmlnKSB7CiAgICAgICAgICB2YXIgX3RoaXMkY29kZXI2LCBfdGhpcyRjb2RlcjYkcmlnaHQ7CgogICAgICAgICAgdGhpcy5jaGFuZ2VTdGF0dXNGdW4oKF90aGlzJGNvZGVyNiA9IHRoaXMuY29kZXIpID09PSBudWxsIHx8IF90aGlzJGNvZGVyNiA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90aGlzJGNvZGVyNiRyaWdodCA9IF90aGlzJGNvZGVyNi5yaWdodCkgPT09IG51bGwgfHwgX3RoaXMkY29kZXI2JHJpZ2h0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRjb2RlcjYkcmlnaHQub3JpZywgdmFsLCB0aGlzLmpzb25WYWx1ZVJpZ2h0KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLyogaWYgKHZhbCA9PT0gZmFsc2UpIHsKICAgICAgICAgIHRoaXMuY29kZXIuc2V0VmFsdWUoJycpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmNvZGVyLnNldFZhbHVlKHRoaXMudmFsdWUgfHwgJycpOwogICAgICAgIH0qLwogICAgICAgIHRoaXMuY2hhbmdlU3RhdHVzRnVuKHRoaXMuY29kZXIsIHZhbCwgdGhpcy5qc29uVmFsdWUpOwogICAgICB9IC8vIGNvbnNvbGUubG9nKHZhbCwgdGhpcy52YWx1ZSwgJ2NoYW5nZVN0YXR1cz09PT09Jyk7CgogICAgfQoKICB9LAogIG1ldGhvZHM6IHsKICAgIHdhdGNoQ29uZmlnRnVuKHZhbCwgb2xkVmFsLCBwb3NpdGlvbiwga2V5KSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKHZhbCwgb2xkVmFsKTsKICAgICAgbGV0IGNvZGVyID0gdGhpcy5nZXRDb2Rlcihwb3NpdGlvbik7CgogICAgICBpZiAodmFsICE9PSBvbGRWYWwpIHsKICAgICAgICB0aGlzLnJlYWRPbmx5RnVuKGNvZGVyLCB0aGlzW3Bvc2l0aW9uXVtrZXldKTsKICAgICAgfQogICAgfSwKCiAgICBnZXRDb2RlcihrZXkpIHsKICAgICAgbGV0IGNvZGVyOwoKICAgICAgaWYgKHRoaXMuZGlmZikgewogICAgICAgIGlmIChrZXkgPT09ICdsZWZ0Q29uZmlnJykgewogICAgICAgICAgdmFyIF90aGlzJGNvZGVyNywgX3RoaXMkY29kZXI3JGxlZnQ7CgogICAgICAgICAgY29kZXIgPSAoX3RoaXMkY29kZXI3ID0gdGhpcy5jb2RlcikgPT09IG51bGwgfHwgX3RoaXMkY29kZXI3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMkY29kZXI3JGxlZnQgPSBfdGhpcyRjb2RlcjcubGVmdCkgPT09IG51bGwgfHwgX3RoaXMkY29kZXI3JGxlZnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGNvZGVyNyRsZWZ0Lm9yaWc7CiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdyaWdodENvbmZpZycpIHsKICAgICAgICAgIHZhciBfdGhpcyRjb2RlcjgsIF90aGlzJGNvZGVyOCRyaWdodDsKCiAgICAgICAgICBjb2RlciA9IChfdGhpcyRjb2RlcjggPSB0aGlzLmNvZGVyKSA9PT0gbnVsbCB8fCBfdGhpcyRjb2RlcjggPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGhpcyRjb2RlcjgkcmlnaHQgPSBfdGhpcyRjb2RlcjgucmlnaHQpID09PSBudWxsIHx8IF90aGlzJGNvZGVyOCRyaWdodCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkY29kZXI4JHJpZ2h0Lm9yaWc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBfdGhpcyRjb2Rlcjk7CgogICAgICAgICAgY29kZXIgPSAoX3RoaXMkY29kZXI5ID0gdGhpcy5jb2RlcikgPT09IG51bGwgfHwgX3RoaXMkY29kZXI5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRjb2RlcjkuZWRpdDsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29kZXIgPSB0aGlzLmNvZGVyOwogICAgICB9CgogICAgICByZXR1cm4gY29kZXI7CiAgICB9LAoKICAgIGdldEpzb25WYWx1ZSh2YWwpIHsKICAgICAgaWYgKHRoaXMuanNvbkZvcm1hdCkgewogICAgICAgIGlmICh2YWwgJiYgdHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHZhciBvYmogPSBKU09OLnBhcnNlKHZhbCk7CgogICAgICAgICAgICBpZiAodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgb2JqKSB7CiAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaiwgbnVsbCwgJ1x0Jyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiB2YWw7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIHJldHVybiB2YWw7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdmFsOwogICAgICB9CgogICAgICByZXR1cm4gdmFsOwogICAgfSwKCiAgICB1cGRhdGVkKCkgewogICAgICB0aGlzLmNoYW5nZVN0YXR1cysrOwogICAgfSwKCiAgICBjaGFuZ2VTdGF0dXNGdW4oY29kZXIsIGNoYW5nZVN0YXR1cywgdmFsKSB7CiAgICAgIGNvZGVyLnNldFZhbHVlKHZhbCB8fCAnJyk7CiAgICAgIC8qIGlmIChjaGFuZ2VTdGF0dXMgPT09IGZhbHNlKSB7CiAgICAgICAgY29kZXIuc2V0VmFsdWUoJycpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvZGVyLnNldFZhbHVlKHZhbCB8fCAnJyk7CiAgICAgIH0qLwogICAgfSwKCiAgICBnZXRKc29uKCkgey8vIGNvbnNvbGUubG9nKHRoaXMub3JpZ0xlZnQsICdcbicsIHRoaXMuY29kZSwgJ1xuJywgdGhpcy5vcmlnUmlnaHQsICdnZXRKc29uJyk7CiAgICB9LAoKICAgIGluaXREaWZmKG9yaWdMZWZ0LCB2YWx1ZSwgb3JpZ1JpZ2h0KSB7CiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgbGV0IHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkai1qc29uLXZpZXcnKTsKICAgICAgdGFyZ2V0LmlubmVySFRNTCA9ICcnOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbmV3LWNhcAoKICAgICAgdGhpcy5jb2RlciA9IENvZGVNaXJyb3IuTWVyZ2VWaWV3KHRhcmdldCwgewogICAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgICBvcmlnTGVmdDogb3JpZ0xlZnQgIT09IG51bGwgPyBvcmlnTGVmdCA6IG51bGwsCiAgICAgICAgb3JpZzogb3JpZ1JpZ2h0ICE9PSBudWxsID8gb3JpZ1JpZ2h0IDogbnVsbCwKICAgICAgICBjdXJzb3JIZWlnaHQ6IDEsCiAgICAgICAgLy8g5YWJ5qCH6auY5bqmCiAgICAgICAgbGluZU51bWJlcnM6IHRydWUsCiAgICAgICAgYWxsb3dFZGl0aW5nT3JpZ2luYWxzOiB0cnVlLAogICAgICAgIG1hdGNoQnJhY2tldHM6IHRydWUsCiAgICAgICAgLy8g5Yy56YWN5ous5Y+3CiAgICAgICAgLy8gcmV2ZXJ0QnV0dG9uczogdHJ1ZSwgLy8g5piv5ZCm5pi+56S66L+Y5Y6f5oyJ6ZKuCiAgICAgICAgLy8gc2VhcmNoYm94OiB0cnVlCiAgICAgICAgLi4udGhpcy5vcHRpb25zIC8vIGhpZ2hsaWdodERpZmZlcmVuY2VzOiAiaGlnaGxpZ2h0IiwvL+acieW3ruW8gueahOWcsOaWueaYr+WQpumrmOS6rgogICAgICAgIC8vIGNvbm5lY3Q6IG51bGwsCiAgICAgICAgLy8gcmV2ZXJ0QnV0dG9uczogZmFsc2UsLy9yZXZlcnTmjInpkq7orr7nva7kuLp0cnVl5Y+v5Lul5Zue5ruaCiAgICAgICAgLy8gc3R5bGVBY3RpdmVMaW5lOiB0cnVlLC8v5YWJ5qCH5omA5Zyo55qE5L2N572u5Luj56CB6auY5LquCiAgICAgICAgLy8gc21hcnRJbmRlbnQ6IHRydWUsIC8vIOaZuuiDvee8qei/mwogICAgICAgIC8vIG1hdGNoQnJhY2tldHM6IHRydWUsIC8vIOaLrOWPt+WMuemFjQogICAgICAgIC8vIHRleHRXcmFwcGluZzogdHJ1ZSwKICAgICAgICAvLyBmb2xkR3V0dGVyOnRydWUsLy/ku6PnoIHmipjlj6AKICAgICAgICAvLyBsaW5lV3JhcHBpbmc6dHJ1ZSwvL+S7o+eggeaKmOWPoAogICAgICAgIC8vIGd1dHRlcnM6IFsiQ29kZU1pcnJvci1saW5lbnVtYmVycyIsICJDb2RlTWlycm9yLWZvbGRndXR0ZXIiXQoKICAgICAgfSk7IC8vIGNvbnNvbGUubG9nKHRoaXMuY29kZXIsICd0aGlzLmNvZGVyJyk7CgogICAgICB0aGlzLnRoZW1lQ2hhbmdlKCk7CgogICAgICBpZiAob3JpZ0xlZnQgIT09IG51bGwpIHsKICAgICAgICB2YXIgX3RoaXMkbGVmdENvbmZpZywgX3RoaXMkbGVmdENvbmZpZzIsIF90aGlzJGxlZnRDb25maWczLCBfdGhpcyRsZWZ0Q29uZmlnNDsKCiAgICAgICAgdGhpcy5yZWFkT25seUZ1bih0aGlzLmNvZGVyLmxlZnQub3JpZywgKF90aGlzJGxlZnRDb25maWcgPSB0aGlzLmxlZnRDb25maWcpID09PSBudWxsIHx8IF90aGlzJGxlZnRDb25maWcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGxlZnRDb25maWcucmVhZE9ubHkpOwogICAgICAgIHRoaXMubWFya1RleHRGdW4odGhpcy5jb2Rlci5sZWZ0Lm9yaWcsIChfdGhpcyRsZWZ0Q29uZmlnMiA9IHRoaXMubGVmdENvbmZpZykgPT09IG51bGwgfHwgX3RoaXMkbGVmdENvbmZpZzIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGxlZnRDb25maWcyLm1hcmtUZXh0KTsKICAgICAgICB0aGlzLmd1dHRlck1hcmtlckZ1bih0aGlzLmNvZGVyLmxlZnQub3JpZywgKF90aGlzJGxlZnRDb25maWczID0gdGhpcy5sZWZ0Q29uZmlnKSA9PT0gbnVsbCB8fCBfdGhpcyRsZWZ0Q29uZmlnMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkbGVmdENvbmZpZzMuZ3V0dGVyTWFya2VyKTsKICAgICAgICB0aGlzLnNldFNlbGVjdGlvbkZ1bih0aGlzLmNvZGVyLmxlZnQub3JpZywgKF90aGlzJGxlZnRDb25maWc0ID0gdGhpcy5sZWZ0Q29uZmlnKSA9PT0gbnVsbCB8fCBfdGhpcyRsZWZ0Q29uZmlnNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkbGVmdENvbmZpZzQuc2VsZWN0aW9uTGluZSk7CiAgICAgICAgdGhpcy5jb2RlQ2hhbmdlKHRoaXMuY29kZXIubGVmdC5vcmlnLCAnb3JpZ0xlZnQnKTsKICAgICAgfQoKICAgICAgaWYgKHZhbHVlICE9PSBudWxsKSB7CiAgICAgICAgdmFyIF90aGlzJGNvbmZpZ1BhcmFtcywgX3RoaXMkY29uZmlnUGFyYW1zMiwgX3RoaXMkY29uZmlnUGFyYW1zMywgX3RoaXMkY29uZmlnUGFyYW1zNDsKCiAgICAgICAgdGhpcy5yZWFkT25seUZ1bih0aGlzLmNvZGVyLmVkaXQsIChfdGhpcyRjb25maWdQYXJhbXMgPSB0aGlzLmNvbmZpZ1BhcmFtcykgPT09IG51bGwgfHwgX3RoaXMkY29uZmlnUGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRjb25maWdQYXJhbXMucmVhZE9ubHkpOwogICAgICAgIHRoaXMubWFya1RleHRGdW4odGhpcy5jb2Rlci5lZGl0LCAoX3RoaXMkY29uZmlnUGFyYW1zMiA9IHRoaXMuY29uZmlnUGFyYW1zKSA9PT0gbnVsbCB8fCBfdGhpcyRjb25maWdQYXJhbXMyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRjb25maWdQYXJhbXMyLm1hcmtUZXh0KTsKICAgICAgICB0aGlzLmd1dHRlck1hcmtlckZ1bih0aGlzLmNvZGVyLmVkaXQsIChfdGhpcyRjb25maWdQYXJhbXMzID0gdGhpcy5jb25maWdQYXJhbXMpID09PSBudWxsIHx8IF90aGlzJGNvbmZpZ1BhcmFtczMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGNvbmZpZ1BhcmFtczMuZ3V0dGVyTWFya2VyKTsKICAgICAgICB0aGlzLnNldFNlbGVjdGlvbkZ1bih0aGlzLmNvZGVyLmVkaXQsIChfdGhpcyRjb25maWdQYXJhbXM0ID0gdGhpcy5jb25maWdQYXJhbXMpID09PSBudWxsIHx8IF90aGlzJGNvbmZpZ1BhcmFtczQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGNvbmZpZ1BhcmFtczQuc2VsZWN0aW9uTGluZSk7CiAgICAgICAgdGhpcy5jb2RlQ2hhbmdlKHRoaXMuY29kZXIuZWRpdCwgJ2NvZGUnKTsKICAgICAgfQoKICAgICAgaWYgKG9yaWdSaWdodCAhPT0gbnVsbCkgewogICAgICAgIHZhciBfdGhpcyRyaWdodENvbmZpZywgX3RoaXMkcmlnaHRDb25maWcyLCBfdGhpcyRyaWdodENvbmZpZzMsIF90aGlzJHJpZ2h0Q29uZmlnNDsKCiAgICAgICAgdGhpcy5yZWFkT25seUZ1bih0aGlzLmNvZGVyLnJpZ2h0Lm9yaWcsIChfdGhpcyRyaWdodENvbmZpZyA9IHRoaXMucmlnaHRDb25maWcpID09PSBudWxsIHx8IF90aGlzJHJpZ2h0Q29uZmlnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRyaWdodENvbmZpZy5yZWFkT25seSk7CiAgICAgICAgdGhpcy5tYXJrVGV4dEZ1bih0aGlzLmNvZGVyLnJpZ2h0Lm9yaWcsIChfdGhpcyRyaWdodENvbmZpZzIgPSB0aGlzLnJpZ2h0Q29uZmlnKSA9PT0gbnVsbCB8fCBfdGhpcyRyaWdodENvbmZpZzIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHJpZ2h0Q29uZmlnMi5tYXJrVGV4dCk7CiAgICAgICAgdGhpcy5ndXR0ZXJNYXJrZXJGdW4odGhpcy5jb2Rlci5yaWdodC5vcmlnLCAoX3RoaXMkcmlnaHRDb25maWczID0gdGhpcy5yaWdodENvbmZpZykgPT09IG51bGwgfHwgX3RoaXMkcmlnaHRDb25maWczID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRyaWdodENvbmZpZzMuZ3V0dGVyTWFya2VyKTsKICAgICAgICB0aGlzLnNldFNlbGVjdGlvbkZ1bih0aGlzLmNvZGVyLnJpZ2h0Lm9yaWcsIChfdGhpcyRyaWdodENvbmZpZzQgPSB0aGlzLnJpZ2h0Q29uZmlnKSA9PT0gbnVsbCB8fCBfdGhpcyRyaWdodENvbmZpZzQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHJpZ2h0Q29uZmlnNC5zZWxlY3Rpb25MaW5lKTsKICAgICAgICB0aGlzLmNvZGVDaGFuZ2UodGhpcy5jb2Rlci5yaWdodC5vcmlnLCAnb3JpZ1JpZ2h0Jyk7CiAgICAgIH0gLy8gdGhpcy5jb2Rlci5lZGl0LnNjcm9sbEludG9WaWV3KHtsaW5lOjEwMCwgY2g6IDExfSk7CgogICAgfSwKCiAgICBjb2RlQ2hhbmdlKGNvZGVyLCBrZXkpIHsKICAgICAgY29kZXIub24oJ2NoYW5nZScsIGNvZGVyID0+IHsKICAgICAgICB0aGlzW2tleV0gPSBjb2Rlci5nZXRWYWx1ZSgpOwoKICAgICAgICBpZiAodGhpcy4kZW1pdCkgewogICAgICAgICAgdGhpcy4kZW1pdCgnY29kZUNoYW5nZScsIHRoaXMub3JpZ0xlZnQsIHRoaXMuY29kZSwgdGhpcy5vcmlnUmlnaHQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIC8vIOS4u+mimAogICAgdGhlbWVDaGFuZ2UoKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudGhlbWUsICd0aGlzLnRoZW1lJyk7CiAgICAgIGxldCB0aGVtZSA9IHRoaXMudGhlbWUgfHwgJ2VjbGlwc2UnOwoKICAgICAgaWYgKHRoZW1lKSB7CiAgICAgICAgcmVxdWlyZSgnY29kZW1pcnJvci90aGVtZS8nICsgdGhlbWUgKyAnLmNzcycpOwoKICAgICAgICBpZiAodGhpcy5kaWZmKSB7CiAgICAgICAgICB2YXIgX3RoaXMkY29kZXIxMCwgX3RoaXMkY29kZXIxMCRlZGl0LCBfdGhpcyRjb2RlcjExLCBfdGhpcyRjb2RlcjExJGxlZnQsIF90aGlzJGNvZGVyMTEkbGVmdCRvciwgX3RoaXMkY29kZXIxMiwgX3RoaXMkY29kZXIxMiRyaWdodCwgX3RoaXMkY29kZXIxMiRyaWdodCRvOwoKICAgICAgICAgIChfdGhpcyRjb2RlcjEwID0gdGhpcy5jb2RlcikgPT09IG51bGwgfHwgX3RoaXMkY29kZXIxMCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90aGlzJGNvZGVyMTAkZWRpdCA9IF90aGlzJGNvZGVyMTAuZWRpdCkgPT09IG51bGwgfHwgX3RoaXMkY29kZXIxMCRlZGl0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRjb2RlcjEwJGVkaXQuc2V0T3B0aW9uKCd0aGVtZScsIHRoZW1lKTsKICAgICAgICAgIChfdGhpcyRjb2RlcjExID0gdGhpcy5jb2RlcikgPT09IG51bGwgfHwgX3RoaXMkY29kZXIxMSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90aGlzJGNvZGVyMTEkbGVmdCA9IF90aGlzJGNvZGVyMTEubGVmdCkgPT09IG51bGwgfHwgX3RoaXMkY29kZXIxMSRsZWZ0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMkY29kZXIxMSRsZWZ0JG9yID0gX3RoaXMkY29kZXIxMSRsZWZ0Lm9yaWcpID09PSBudWxsIHx8IF90aGlzJGNvZGVyMTEkbGVmdCRvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkY29kZXIxMSRsZWZ0JG9yLnNldE9wdGlvbigndGhlbWUnLCB0aGVtZSk7CiAgICAgICAgICAoX3RoaXMkY29kZXIxMiA9IHRoaXMuY29kZXIpID09PSBudWxsIHx8IF90aGlzJGNvZGVyMTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGhpcyRjb2RlcjEyJHJpZ2h0ID0gX3RoaXMkY29kZXIxMi5yaWdodCkgPT09IG51bGwgfHwgX3RoaXMkY29kZXIxMiRyaWdodCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90aGlzJGNvZGVyMTIkcmlnaHQkbyA9IF90aGlzJGNvZGVyMTIkcmlnaHQub3JpZykgPT09IG51bGwgfHwgX3RoaXMkY29kZXIxMiRyaWdodCRvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRjb2RlcjEyJHJpZ2h0JG8uc2V0T3B0aW9uKCd0aGVtZScsIHRoZW1lKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIF90aGlzJGNvZGVyMTM7CgogICAgICAgICAgKF90aGlzJGNvZGVyMTMgPSB0aGlzLmNvZGVyKSA9PT0gbnVsbCB8fCBfdGhpcyRjb2RlcjEzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRjb2RlcjEzLnNldE9wdGlvbigndGhlbWUnLCB0aGVtZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIC8vIOivreiogAogICAgbW9kZUNoYW5nZSgpIHsKICAgICAgLy8gY29uc29sZS5sb2codGhpcy5sYW5ndWFnZSwgJ3RoaXMubGFuZ3VhZ2UnKTsKICAgICAgbGV0IG1vZGUgPSB0aGlzLmxhbmd1YWdlIHx8ICdqYXZhc2NyaXB0JzsKCiAgICAgIGlmIChtb2RlKSB7CiAgICAgICAgcmVxdWlyZSgnY29kZW1pcnJvci9tb2RlLycgKyBtb2RlICsgJy8nICsgbW9kZSk7CgogICAgICAgIGlmICh0aGlzLmRpZmYpIHsKICAgICAgICAgIHZhciBfdGhpcyRjb2RlcjE0LCBfdGhpcyRjb2RlcjE0JGVkaXQsIF90aGlzJGNvZGVyMTUsIF90aGlzJGNvZGVyMTUkbGVmdCwgX3RoaXMkY29kZXIxNSRsZWZ0JG9yLCBfdGhpcyRjb2RlcjE2LCBfdGhpcyRjb2RlcjE2JHJpZ2h0LCBfdGhpcyRjb2RlcjE2JHJpZ2h0JG87CgogICAgICAgICAgKF90aGlzJGNvZGVyMTQgPSB0aGlzLmNvZGVyKSA9PT0gbnVsbCB8fCBfdGhpcyRjb2RlcjE0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMkY29kZXIxNCRlZGl0ID0gX3RoaXMkY29kZXIxNC5lZGl0KSA9PT0gbnVsbCB8fCBfdGhpcyRjb2RlcjE0JGVkaXQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGNvZGVyMTQkZWRpdC5zZXRPcHRpb24oJ21vZGUnLCBtb2RlKTsKICAgICAgICAgIChfdGhpcyRjb2RlcjE1ID0gdGhpcy5jb2RlcikgPT09IG51bGwgfHwgX3RoaXMkY29kZXIxNSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90aGlzJGNvZGVyMTUkbGVmdCA9IF90aGlzJGNvZGVyMTUubGVmdCkgPT09IG51bGwgfHwgX3RoaXMkY29kZXIxNSRsZWZ0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMkY29kZXIxNSRsZWZ0JG9yID0gX3RoaXMkY29kZXIxNSRsZWZ0Lm9yaWcpID09PSBudWxsIHx8IF90aGlzJGNvZGVyMTUkbGVmdCRvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkY29kZXIxNSRsZWZ0JG9yLnNldE9wdGlvbignbW9kZScsIG1vZGUpOwogICAgICAgICAgKF90aGlzJGNvZGVyMTYgPSB0aGlzLmNvZGVyKSA9PT0gbnVsbCB8fCBfdGhpcyRjb2RlcjE2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMkY29kZXIxNiRyaWdodCA9IF90aGlzJGNvZGVyMTYucmlnaHQpID09PSBudWxsIHx8IF90aGlzJGNvZGVyMTYkcmlnaHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGhpcyRjb2RlcjE2JHJpZ2h0JG8gPSBfdGhpcyRjb2RlcjE2JHJpZ2h0Lm9yaWcpID09PSBudWxsIHx8IF90aGlzJGNvZGVyMTYkcmlnaHQkbyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkY29kZXIxNiRyaWdodCRvLnNldE9wdGlvbignbW9kZScsIG1vZGUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgX3RoaXMkY29kZXIxNzsKCiAgICAgICAgICAoX3RoaXMkY29kZXIxNyA9IHRoaXMuY29kZXIpID09PSBudWxsIHx8IF90aGlzJGNvZGVyMTcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGNvZGVyMTcuc2V0T3B0aW9uKCdtb2RlJywgbW9kZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIC8vIOihjOmrmOS6rgogICAgcmVhZE9ubHlGdW4oY29kZXIsIHJlYWRPbmx5KSB7CiAgICAgIGNvZGVyLnNldE9wdGlvbigncmVhZE9ubHknLCByZWFkT25seSk7CiAgICB9LAoKICAgIC8vIOWkp+WwjwogICAgc2l6ZUNoYW5nZSgpIHsKICAgICAgLy8gbGV0IHNpYT10aGlzLmhlaWdodDsKICAgICAgaWYgKHRoaXMuZGlmZikgewogICAgICAgIHZhciBfdGhpcyRjb2RlcjE4LCBfdGhpcyRjb2RlcjE4JGVkaXQsIF90aGlzJGNvZGVyMTksIF90aGlzJGNvZGVyMTkkbGVmdCwgX3RoaXMkY29kZXIxOSRsZWZ0JG9yLCBfdGhpcyRjb2RlcjIwLCBfdGhpcyRjb2RlcjIwJHJpZ2h0LCBfdGhpcyRjb2RlcjIwJHJpZ2h0JG8sIF9kb2N1bWVudCwgX2RvY3VtZW50JGdldEVsZW1lbnRCOwoKICAgICAgICAoX3RoaXMkY29kZXIxOCA9IHRoaXMuY29kZXIpID09PSBudWxsIHx8IF90aGlzJGNvZGVyMTggPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGhpcyRjb2RlcjE4JGVkaXQgPSBfdGhpcyRjb2RlcjE4LmVkaXQpID09PSBudWxsIHx8IF90aGlzJGNvZGVyMTgkZWRpdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkY29kZXIxOCRlZGl0LnNldFNpemUodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpOwogICAgICAgIChfdGhpcyRjb2RlcjE5ID0gdGhpcy5jb2RlcikgPT09IG51bGwgfHwgX3RoaXMkY29kZXIxOSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90aGlzJGNvZGVyMTkkbGVmdCA9IF90aGlzJGNvZGVyMTkubGVmdCkgPT09IG51bGwgfHwgX3RoaXMkY29kZXIxOSRsZWZ0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMkY29kZXIxOSRsZWZ0JG9yID0gX3RoaXMkY29kZXIxOSRsZWZ0Lm9yaWcpID09PSBudWxsIHx8IF90aGlzJGNvZGVyMTkkbGVmdCRvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkY29kZXIxOSRsZWZ0JG9yLnNldFNpemUodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpOwogICAgICAgIChfdGhpcyRjb2RlcjIwID0gdGhpcy5jb2RlcikgPT09IG51bGwgfHwgX3RoaXMkY29kZXIyMCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90aGlzJGNvZGVyMjAkcmlnaHQgPSBfdGhpcyRjb2RlcjIwLnJpZ2h0KSA9PT0gbnVsbCB8fCBfdGhpcyRjb2RlcjIwJHJpZ2h0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMkY29kZXIyMCRyaWdodCRvID0gX3RoaXMkY29kZXIyMCRyaWdodC5vcmlnKSA9PT0gbnVsbCB8fCBfdGhpcyRjb2RlcjIwJHJpZ2h0JG8gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGNvZGVyMjAkcmlnaHQkby5zZXRTaXplKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTsKICAgICAgICBsZXQgbWVyZ2VEb20gPSAoX2RvY3VtZW50ID0gZG9jdW1lbnQpID09PSBudWxsIHx8IF9kb2N1bWVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kb2N1bWVudCRnZXRFbGVtZW50QiA9IF9kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnRvb2x0aXBJZCkpID09PSBudWxsIHx8IF9kb2N1bWVudCRnZXRFbGVtZW50QiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RvY3VtZW50JGdldEVsZW1lbnRCLnF1ZXJ5U2VsZWN0b3IoJy5Db2RlTWlycm9yLW1lcmdlJyk7IC8vIGNvbnNvbGUubG9nKG1lcmdlRG9tLCAnbWVyZ2VEb20nKTsKCiAgICAgICAgaWYgKG1lcmdlRG9tICYmIHRoaXMuaGVpZ2h0KSB7CiAgICAgICAgICBtZXJnZURvbS5zdHlsZS5oZWlnaHQgPSB0aGlzLmhlaWdodDsKICAgICAgICB9CiAgICAgICAgLyogaWYgKHRoaXMud2lkdGgpIHsKICAgICAgICAgIG1lcmdlRG9tLnN0eWxlLndpZHRoID0gdGhpcy53aWR0aDsKICAgICAgICB9Ki8KCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jb2Rlci5zZXRTaXplKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTsKICAgICAgfQogICAgfSwKCiAgICAvLyDooYzpq5jkuq4KICAgIG1hcmtUZXh0RnVuKGNvZGVyLCBtYXJrVGV4dEFycikgewogICAgICBmb3IgKGxldCBpIGluIG1hcmtUZXh0QXJyKSB7CiAgICAgICAgY29kZXIubWFya1RleHQobWFya1RleHRBcnJbaV0uc3RhcnQsIG1hcmtUZXh0QXJyW2ldLmVuZCwgbWFya1RleHRBcnJbaV0uZWxlbWVudCk7CiAgICAgIH0KICAgIH0sCgogICAgLy8g5qCH6K6wCiAgICBtYWtlTWFya2VyKGNvbG9yLCBpbm5lckhUTUwpIHsKICAgICAgdmFyIG1hcmtlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICBtYXJrZXIuc3R5bGUuY29sb3IgPSBjb2xvcjsKICAgICAgbWFya2VyLmlubmVySFRNTCA9IGlubmVySFRNTDsgLy8gbWFya2VyLmFwcGVuZENoaWxkKGlubmVySFRNTCk7CiAgICAgIC8vIGNvbnNvbGUubG9nKGNvbG9yLCBpbm5lckhUTUwsIG1hcmtlciwgJ21ha2VNYXJrZXInKTsKCiAgICAgIHJldHVybiBtYXJrZXI7CiAgICB9LAoKICAgIC8vIOihjOagh+iusAogICAgZ3V0dGVyTWFya2VyRnVuKGNvZGVyLCBndXR0ZXJNYXJrZXJBcnIpIHsKICAgICAgZm9yIChsZXQgaiBpbiBndXR0ZXJNYXJrZXJBcnIpIHsKICAgICAgICBjb2Rlci5zZXRHdXR0ZXJNYXJrZXIoZ3V0dGVyTWFya2VyQXJyW2pdLmxpbmUsICdub3RlLWd1dHRlcicsIHRoaXMubWFrZU1hcmtlcihndXR0ZXJNYXJrZXJBcnJbal0uY29sb3IsIGd1dHRlck1hcmtlckFycltqXS5pbm5lckhUTUwpKTsKICAgICAgfQogICAgICAvKiBjb25zb2xlLmxvZyhjb2RlcixndXR0ZXJNYXJrZXJBcnIpOwogICAgICBpZiAoIWd1dHRlck1hcmtlckFycikgewogICAgICAgIGxldCBtZXJnZURvbSA9IGRvY3VtZW50Py5nZXRFbGVtZW50QnlJZCh0aGlzLnRvb2x0aXBJZCk/LnF1ZXJ5U2VsZWN0b3IoJy5ub3RlLWd1dHRlcicpOwogICAgICAgIG1lcmdlRG9tLmNsYXNzTGlzdC5hZGQoJ3dpZHRoMCcpOwogICAgICAgIC8hKiBsZXQgbm90ZURvbSA9IGRvY3VtZW50Py5xdWVyeVNlbGVjdG9yQWxsKCcjJyt0aGlzLnRvb2x0aXBJZCsnIC5ub3RlLWd1dHRlcicpOwogICAgICAgIGNvbnNvbGUubG9nKGRvY3VtZW50Py5nZXRFbGVtZW50QnlJZCh0aGlzLnRvb2x0aXBJZCksbm90ZURvbSwgJ25vdGVEb20nKTsKICAgICAgICAvLyBub3RlRG9tLmFkZCgnd2lkdGgwJyk7CiAgICAgICAgZm9yIChsZXQgaSBpbiBub3RlRG9tKSB7CiAgICAgICAgICBpZiAobm90ZURvbVtpXSAmJiBub3RlRG9tW2ldLnN0eWxlKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKG5vdGVEb21baV0gLCAnbm90ZURvbVtpXSAnKTsKICAgICAgICAgICAgLy8gbm90ZURvbVtpXS5zdHlsZS53aWR0aCA9ICcwJzsKICAgICAgICAgICAgbm90ZURvbVtpXS5jbGFzc0xpc3QuYWRkKCd3aWR0aDAnKTsKICAgICAgICAgIH0KICAgICAgICB9KiEvCiAgICAgICAgLy8gY29kZXIucmVmcmVzaCgpOwogICAgICB9Ki8KCiAgICB9LAoKICAgIC8vIOmAieS4reihjAogICAgc2V0U2VsZWN0aW9uRnVuKGNvZGVyLCBzZXRTZWxlY3Rpb25BcnIpIHsKICAgICAgZm9yIChsZXQgaSBpbiBzZXRTZWxlY3Rpb25BcnIpIHsKICAgICAgICBjb2Rlci5zZXRTZWxlY3Rpb24oc2V0U2VsZWN0aW9uQXJyW2ldLnN0YXJ0LCBzZXRTZWxlY3Rpb25BcnJbaV0uZW5kKTsKICAgICAgfQogICAgfSwKCiAgICAvLyDnhKbngrnliLDmn5DooYwKICAgIHNldEN1cnNvckZ1bihjb2Rlciwgc2V0Q3Vyc29yTGluZSkgewogICAgICBpZiAoc2V0Q3Vyc29yTGluZSkgewogICAgICAgIGNvZGVyLnNldEN1cnNvcihzZXRDdXJzb3JMaW5lLmxpbmUsIHNldEN1cnNvckxpbmUuY2gpOwogICAgICAgIGNvZGVyLmZvY3VzKCk7CiAgICAgIH0gLy8gdGhpcy5jb2Rlci5zZXRDdXJzb3IoMTAwLDUpOwogICAgICAvLyB0aGlzLmNvZGVyLmZvY3VzKCk7CgogICAgfSwKCiAgICAvLyDnhKbngrnliLDmn5DooYwKICAgIHNjcm9sbEludG9WaWV3RnVuKGNvZGVyLCBzY3JvbGxJbnRvVmlldykgewogICAgICBpZiAoc2Nyb2xsSW50b1ZpZXcpIHsKICAgICAgICBjb2Rlci5zY3JvbGxJbnRvVmlldyhzY3JvbGxJbnRvVmlldyk7CiAgICAgIH0KICAgIH0sCgogICAgLy8g5Yid5aeL5YyWCiAgICBpbml0KCkgewogICAgICB2YXIgX3RoaXMkY29uZmlnUGFyYW1zNSwgX3RoaXMkY29uZmlnUGFyYW1zNiwgX3RoaXMkY29uZmlnUGFyYW1zNywgX3RoaXMkY29uZmlnUGFyYW1zODsKCiAgICAgIC8vIGNvbnNvbGUubG9nKCdpbml0Jyk7CiAgICAgIC8vIOWIneWni+WMlue8lui+keWZqOWunuS+i++8jOS8oOWFpemcgOimgeiiq+WunuS+i+WMlueahOaWh+acrOWfn+WvueixoeWSjOm7mOiupOmFjee9rgogICAgICB0aGlzLmNvZGVyID0gQ29kZU1pcnJvci5mcm9tVGV4dEFyZWEodGhpcy4kcmVmcy50ZXh0YXJlYSwgdGhpcy5vcHRpb25zKTsgLy8g57yW6L6R5Zmo6LWL5YC8CgogICAgICB0aGlzLmNvZGVyLnNldFZhbHVlKHRoaXMuanNvblZhbHVlIHx8IHRoaXMuY29kZSk7IC8vIGNvbnNvbGUubG9nKHRoaXMudmFsdWUsIHRoaXMuY29kZSwgJzExMTExMTExMScpCiAgICAgIC8vIOaUr+aMgeWPjOWQkee7keWumgoKICAgICAgdGhpcy5jb2Rlci5vbignY2hhbmdlJywgY29kZXIgPT4gewogICAgICAgIHRoaXMuY29kZSA9IGNvZGVyLmdldFZhbHVlKCk7CgogICAgICAgIGlmICh0aGlzLiRlbWl0KSB7CiAgICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIHRoaXMuY29kZSk7CiAgICAgICAgfQogICAgICB9KTsgLy8gY29uc29sZS5sb2codGhpcy5jb2RlciwgJ3RoaXMuY29kZXIwMDAnKQoKICAgICAgdGhpcy4kZW1pdCgnbGFuZ3VhZ2VMaXN0JywgdGhpcy5tYXBBcnJheSk7CiAgICAgIC8qIGxldCBzZWxmPXRoaXM7CiAgICAgIHRoaXMuY29kZXIub24oJ2d1dHRlckNsaWNrJywgZnVuY3Rpb24gKGNtLCBuKSB7CiAgICAgICAgdmFyIGluZm8gPSBzZWxmLmNvZGVyLmxpbmVJbmZvKG4pOwogICAgICAgLy8gY29uc29sZS5sb2coc2VsZi5jb2RlciwgbiwgJzExJykKICAgICAgICBzZWxmLmNvZGVyLnNldEd1dHRlck1hcmtlcihuLCAiIGJyZWFrcG9pbnRzIiwgaW5mby5ndXR0ZXJNYXJrZXJzID8gbnVsbCA6IHNlbGYubWFrZU1hcmtlcignb3JhbmdlJywgJzxpIGNsYXNzPSJpY29uZm9udCBob21lIj48L2k+JykpCiAgICAgIH0pOyovCgogICAgICB0aGlzLnJlYWRPbmx5RnVuKHRoaXMuY29kZXIsIChfdGhpcyRjb25maWdQYXJhbXM1ID0gdGhpcy5jb25maWdQYXJhbXMpID09PSBudWxsIHx8IF90aGlzJGNvbmZpZ1BhcmFtczUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGNvbmZpZ1BhcmFtczUucmVhZE9ubHkpOwogICAgICB0aGlzLm1hcmtUZXh0RnVuKHRoaXMuY29kZXIsIChfdGhpcyRjb25maWdQYXJhbXM2ID0gdGhpcy5jb25maWdQYXJhbXMpID09PSBudWxsIHx8IF90aGlzJGNvbmZpZ1BhcmFtczYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGNvbmZpZ1BhcmFtczYubWFya1RleHQpOwogICAgICB0aGlzLmd1dHRlck1hcmtlckZ1bih0aGlzLmNvZGVyLCAoX3RoaXMkY29uZmlnUGFyYW1zNyA9IHRoaXMuY29uZmlnUGFyYW1zKSA9PT0gbnVsbCB8fCBfdGhpcyRjb25maWdQYXJhbXM3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRjb25maWdQYXJhbXM3Lmd1dHRlck1hcmtlcik7CiAgICAgIHRoaXMuc2V0U2VsZWN0aW9uRnVuKHRoaXMuY29kZXIsIChfdGhpcyRjb25maWdQYXJhbXM4ID0gdGhpcy5jb25maWdQYXJhbXMpID09PSBudWxsIHx8IF90aGlzJGNvbmZpZ1BhcmFtczggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGNvbmZpZ1BhcmFtczguc2VsZWN0aW9uTGluZSk7IC8vIHRoaXMuc2V0Q3Vyc29yRnVuKHRoaXMuY29kZXIsIHRoaXMuc2V0Q3Vyc29yTGluZSk7CiAgICAgIC8vIHRoaXMuc2Nyb2xsSW50b1ZpZXdGdW4odGhpcy5jb2Rlcix0aGlzLnNjcm9sbEludG9WaWV3KTsKICAgICAgLy8gdGhpcy5jb2Rlci5zY3JvbGxJbnRvVmlldyh7bGluZToyMCwgY2g6IDExfSk7CgogICAgICAvKiB0aGlzLmNvZGVyLnNldEd1dHRlck1hcmtlcig0LCAibm90ZS1ndXR0ZXIiLCB0aGlzLm1ha2VNYXJrZXIoJ29yYW5nZScsICc8aSBjbGFzcz0iaWNvbmZvbnQgaG9tZSI+PC9pPicpKTsKICAgICAgdGhpcy5jb2Rlci5zZXRHdXR0ZXJNYXJrZXIoNSwgIm5vdGUtZ3V0dGVyIiwgdGhpcy5tYWtlTWFya2VyKCdwaW5rJywgJzxpIGNsYXNzPSJpY29uZm9udCBub3RpZmljYXRpb24iPjwvaT4nKSk7Ki8KCiAgICAgIC8qIHRoaXMuY29kZXIubWFya1RleHQoe2xpbmU6IDAsIGNoOiAwfSwge2xpbmU6IDIsIGNoOiAwfSwge2NsYXNzTmFtZTogImVycm9ySGlnaGxpZ2h0In0pOwogICAgICB0aGlzLmNvZGVyLm1hcmtUZXh0KHtsaW5lOiAzLCBjaDogMH0sIHtsaW5lOiA2LCBjaDogMH0sIHtjbGFzc05hbWU6ICJlcnJvckhpZ2hsaWdodCJ9KTsKICAgICAgdGhpcy5jb2Rlci5tYXJrVGV4dCh7bGluZTogMTMsIGNoOiAwfSwge2xpbmU6IDE2LCBjaDogMH0sIHtjbGFzc05hbWU6ICJlcnJvckhpZ2hsaWdodDIifSk7CiAgICAgIHRoaXMuY29kZXIubWFya1RleHQoe2xpbmU6IDEwMCwgY2g6IDB9LCB7bGluZTogMTAxLCBjaDogMH0sIHtjbGFzc05hbWU6ICJlcnJvckhpZ2hsaWdodDIifSk7Ki8KICAgICAgLy8gdGhpcy5jb2Rlci5zY3JvbGxJbnRvVmlldyh7bGluZToxMDAsIGNoOiAxMX0pOwogICAgICAvLyB0aGlzLmNvZGVyLnNldEN1cnNvcigxMDAsNSk7CiAgICAgIC8vIHRoaXMuY29kZXIuZm9jdXMoKTsKICAgICAgLy8gdGhpcy5jb2Rlci5vcHRpb25zLmhpZ2hsaWdodFNlbGVjdGlvbk1hdGNoZXMgPSB7c2hvd1Rva2VuOiB0cnVlLCBhbm5vdGF0ZVNjcm9sbGJhcjogdHJ1ZX07CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudmFsdWUsIHRoaXMuY29kZSwgJzIyMjIyMjIyMicpCiAgICAgIC8vIOWwneivleS7jueItuWuueWZqOiOt+WPluivreazleexu+WeiwoKICAgICAgLyogaWYgKHRoaXMubGFuZ3VhZ2UpIHsKICAgICAgICAvLyDojrflj5blhbfkvZPnmoTor63ms5Xnsbvlnovlr7nosaEKICAgICAgICBsZXQgbW9kZU9iaiA9IHRoaXMuX2dldExhbmd1YWdlKHRoaXMubGFuZ3VhZ2UpOwogICAgICAgIC8vIOWIpOaWreeItuWuueWZqOS8oOWFpeeahOivreazleaYr+WQpuiiq+aUr+aMgQogICAgICAgIGlmIChtb2RlT2JqKSB7CiAgICAgICAgICB0aGlzLm1vZGUgPSBtb2RlT2JqLmxhYmVsOwogICAgICAgIH0KICAgICAgfSovCiAgICB9LAoKICAgIC8vIOiOt+WPluW9k+WJjeivreazleexu+WeiwogICAgX2dldExhbmd1YWdlKGxhbmd1YWdlKSB7CiAgICAgIC8vIOWcqOaUr+aMgeeahOivreazleexu+Wei+WIl+ihqOS4reWvu+aJvuS8oOWFpeeahOivreazleexu+WeiwogICAgICByZXR1cm4gdGhpcy5tb2Rlcy5maW5kKG1vZGUgPT4gewogICAgICAgIC8vIOaJgOacieeahOWAvOmDveW/veeVpeWkp+Wwj+WGme+8jOaWueS+v+avlOi+gwogICAgICAgIGxldCBjdXJyZW50TGFuZ3VhZ2UgPSBsYW5ndWFnZS50b0xvd2VyQ2FzZSgpOwogICAgICAgIGxldCBjdXJyZW50TGFiZWwgPSBtb2RlLmxhYmVsLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgbGV0IGN1cnJlbnRWYWx1ZSA9IG1vZGUudmFsdWUudG9Mb3dlckNhc2UoKTsgLy8gY29uc29sZS5sb2cobW9kZSwgbGFuZ3VhZ2UsICdfZ2V0TGFuZ3VhZ2UnKTsKICAgICAgICAvLyDnlLHkuo7nnJ/lrp7lgLzlj6/og73kuI3op4TojIPvvIzkvovlpoIgamF2YSDnmoTnnJ/lrp7lgLzmmK8geC1qYXZhIO+8jOaJgOS7peiusiB2YWx1ZSDlkowgbGFiZWwg5ZCM5pe25ZKM5Lyg5YWl6K+t5rOV6L+b6KGM5q+U6L6DCgogICAgICAgIHJldHVybiBjdXJyZW50TGFiZWwgPT09IGN1cnJlbnRMYW5ndWFnZSB8fCBjdXJyZW50VmFsdWUgPT09IGN1cnJlbnRMYW5ndWFnZTsKICAgICAgfSk7CiAgICB9CgogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;AAYA;AACA,qC,CACA;AACA;;AACA,wC,CACA;;AACA;AACA;AACA;AACA;AACA;AACA,0C,CACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+C,CACA;AACA;AACA;AAEA;;AACA,uC,CACA;AACA;AACA;;AACA,iC,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iD,CAAA;;AACA,gD,CAAA;AAEA;;AACA;AACA;AACA;AACA,wC,CACA;;AACA;AACA,8C,CACA;;AACA,kB,CAEA;;AACAA;AACAA;AACAA;AACAA;AACA;EACAC,cADA;EAEAC;IACAC;MACAC,sBADA;MAEAC;IAFA,CADA;IAKAC;MACAF,sBADA;MAEAC;IAFA,CALA;IASA;IACAE,aAVA;IAWAC;MACAJ,YADA;MAEAC;IAFA,CAXA;IAeAI;MACAL,YADA;MAEAC;IAFA,CAfA;IAmBAK;MACAN,aADA;MAEAC;IAFA,CAnBA;IAuBA;IACAM;MACAP,YADA;MAEAC;IAFA,CAxBA;IA4BA;IACAO;MACAR,YADA;MAEAC;IAFA,CA7BA;IAiCAQ;MACAT,aADA;MAEAC;IAFA,CAjCA;IAqCA;IACA;IACA;IACA;IACA;IACAS;MACAV,aADA;MAEAC;IAFA,CA1CA;IA8CA;IACAU;MACAX,YADA;;MAEAC;QACA;MACA;;IAJA,CA/CA;IAqDA;IACAW;MACAZ,YADA;;MAEAC;QACA;MACA;;IAJA,CAtDA;IA4DA;IACAY;MACAb,YADA;;MAEAC;QACA;MACA;;IAJA,CA7DA;IAmEA;IACAa;MACAd,WADA;;MAEAC;QACA;MACA;;IAJA,CApEA;IA0EA;IACAc;MACAf,WADA;;MAEAC;QACA;MACA;;IAJA,CA3EA;IAiFA;IACAe;MACAhB,WADA;;MAEAC;QACA;MACA;;IAJA,CAlFA;IAwFA;IACAgB;MACAjB,YADA;;MAEAC;QACA;MACA;;IAJA,CAzFA;IA+FA;IACAiB;MACAlB,YADA;;MAEAC;QACA;MACA;;IAJA;EAhGA,CAFA;;EAyGAkB;IACA;MACAC,eADA;MAEAC,YAFA;MAGA;MACAC,QAJA;MAKA;MACAC,WANA;MAOA;MACAC;QACA;QACA;QACA;QACAC,iBAJA;QAKAC,UALA;QAMAC,UANA;;QAOA;AACA;AACA;QACA;QACA;QACAC,qBAZA;QAaAC,gBAbA;QAcAC,qHAdA;QAeAC,kBAfA;QAeA;QACAC,gBAhBA;QAiBAC,mBAjBA;QAiBA;QACAC,uBAlBA;QAmBAC,kBAnBA,CAoBA;QACA;QACA;QACA;QACA;QACA;QACA;;MA1BA,CARA;MAoCAC,cApCA;MAqCAC;IArCA;EAuCA,CAjJA;;EAkJAC;IACAC;MACA;IACA,CAHA;;IAIAC;MACA;IACA,CANA;;IAOAC;MACA;IACA,CATA;;IAUAC;MACA;IACA;;EAZA,CAlJA;;EAgKAC;IACA;IACA;IACA;IACA;MAAA;;MACA;MACA;QAAA9C;QAAA+C;MAAA;IACA,CAPA,CAQA;;;IACA;MACA;MACA;MACA;MACA;IACA,CALA,MAKA;MACA;IACA;;IACA;IACA;IACA;EACA,CApLA;;EAqLAC;IACA;MACAC;QACA;QACA;MACA,CAJA;;MAKAC;IALA,CADA;IAQA;MACAD;QACA;QACA;MACA,CAJA;;MAKAC;IALA,CARA;IAeA;MACAD;QACA;QACA;MACA,CAJA;;MAKAC;IALA,CAfA;;IAsBA5C;MACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACA;QACA;MACA;IACA,CAlCA;;IAmCA;AACA;AACA;IACAC;MACA;QACA;MACA;MACA;AACA;AACA;AACA;AACA;AACA;AACA;;IACA,CAjDA;;IAkDAC;MACA;QACA;MACA;MACA;AACA;AACA;AACA;AACA;AACA;AACA;;IACA,CA7DA;;IA8DAG;MACA;IACA,CAhEA;;IAiEAD;MACA;MACA;IACA,CApEA;;IAqEAa;MACA;MACA;QAAA;;QACA;UAAA;;UACA;QACA;;QACA;UAAA;;UACA;QACA;;QACA;UAAA;;UACA;QACA;MACA,CAVA,MAUA;QACA;AACA;AACA;AACA;AACA;QACA;MACA,CAnBA,CAoBA;;IACA;;EA1FA,CArLA;EAiRA4B;IACAC;MACA;MACA;;MACA;QACA;MACA;IACA,CAPA;;IAQAC;MACA;;MACA;QACA;UAAA;;UACA3B;QACA,CAFA,MAEA;UAAA;;UACAA;QACA,CAFA,MAEA;UAAA;;UACAA;QACA;MACA,CARA,MAQA;QACAA;MACA;;MACA;IACA,CAtBA;;IAuBA4B;MACA;QACA;UACA;YACA;;YACA;cACA;YACA;;YACA;UACA,CANA,CAMA;YACA;UACA;QACA;;QACA;MACA;;MACA;IACA,CAvCA;;IAwCAC;MACA;IACA,CA1CA;;IA2CAC;MACA9B;MACA;AACA;AACA;AACA;AACA;IACA,CAlDA;;IAmDA+B,WACA;IACA,CArDA;;IAsDAC;MACA;QACA;MACA;;MACA;MACAC,sBALA,CAMA;;MACA;QACArD,YADA;QAEAiC,6CAFA;QAGAqB,2CAHA;QAIAC,eAJA;QAIA;QACAjC,iBALA;QAMAkC,2BANA;QAOA1B,mBAPA;QAOA;QACA;QACA;QACA,eAVA,CAWA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;MApBA,GAPA,CA6BA;;MACA;;MACA;QAAA;;QACA;QACA;QACA;QACA;QACA;MAEA;;MACA;QAAA;;QACA;QACA;QACA;QACA;QACA;MACA;;MACA;QAAA;;QACA;QACA;QACA;QACA;QACA;MACA,CApDA,CAqDA;;IACA,CA5GA;;IA6GA2B;MACArC;QACA;;QACA;UACA;QACA;MACA,CALA;IAMA,CApHA;;IAqHA;IACAsC;MACA;MACA;;MACA;QACAC;;QACA;UAAA;;UACA;UACA;UACA;QACA,CAJA,MAIA;UAAA;;UACA;QACA;MACA;IACA,CAnIA;;IAoIA;IACAC;MACA;MACA;;MACA;QACAD;;QACA;UAAA;;UACA;UACA;UACA;QACA,CAJA,MAIA;UAAA;;UACA;QACA;MACA;IACA,CAlJA;;IAmJA;IACAE;MACAzC;IACA,CAtJA;;IAuJA;IACA0C;MACA;MACA;QAAA;;QACA;QACA;QACA;QACA,sQAJA,CAKA;;QACA;UACAC;QACA;QACA;AACA;AACA;;MACA,CAZA,MAYA;QACA;MACA;IACA,CAzKA;;IA0KA;IACAC;MACA;QACA5C;MACA;IACA,CA/KA;;IAgLA;IACA6C;MACA;MACAC;MACAA,6BAHA,CAIA;MACA;;MACA;IACA,CAxLA;;IAyLA;IACAC;MACA;QACA/C;MACA;MACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IACA,CA9MA;;IA+MA;IACAgD;MACA;QACAhD;MACA;IACA,CApNA;;IAqNA;IACAiD;MACA;QACAjD;QACAA;MACA,CAJA,CAKA;MACA;;IACA,CA7NA;;IA8NA;IACAkD;MACA;QACAlD;MACA;IACA,CAnOA;;IAoOA;IACAmD;MAAA;;MACA;MACA;MACA,wEAHA,CAIA;;MACA,iDALA,CAMA;MACA;;MACA;QACA;;QACA;UACA;QACA;MACA,CALA,EARA,CAcA;;MACA;MACA;AACA;AACA;AACA;AACA;AACA;;MAEA;MACA;MACA;MACA,oKA1BA,CA2BA;MACA;MACA;;MAEA;AACA;;MACA;AACA;AACA;AACA;MACA;MACA;MACA;MACA;MAEA;MACA;;MACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACA,CAzRA;;IA0RA;IACAC;MACA;MACA;QACA;QACA;QACA;QACA,4CAJA,CAKA;QACA;;QACA;MACA,CARA;IASA;;EAtSA;AAjRA","names":["window","name","props","width","type","default","height","value","valueLeft","valueRight","jsonFormat","language","theme","disabled","diff","leftConfig","configParams","rightConfig","markText","selectionLine","gutterMarker","scrollIntoView","setCursorLine","data","changeStatus","mapArray","code","coder","options","lineNumbers","line","tabSize","styleActiveLine","foldgutter","gutters","lineWrapping","foldGutter","matchBrackets","autoCloseBrackets","textWrapping","origLeft","origRight","computed","tooltipId","jsonValue","jsonValueLeft","jsonValueRight","mounted","modeId","watch","handler","deep","methods","watchConfigFun","getCoder","getJsonValue","updated","changeStatusFun","getJson","initDiff","target","orig","cursorHeight","allowEditingOriginals","codeChange","themeChange","require","modeChange","readOnlyFun","sizeChange","mergeDom","markTextFun","makeMarker","marker","gutterMarkerFun","setSelectionFun","setCursorFun","scrollIntoViewFun","init","_getLanguage"],"sourceRoot":"packages/json/src","sources":["json.vue"],"sourcesContent":["<template>\n  <div class=\"dj-json-in-coder-panel\" :id=\"tooltipId\">\n    <div v-if=\"diff\" id=\"dj-json-view\"></div>\n    <textarea v-else ref=\"textarea\"></textarea>\n\n    <!--<div v-if=\"disabled\" class=\"maskBox\"></div>-->\n    <!--    <dj-button class=\"ml10\" size=\"small\" @click=\"getJson\">获取数据</dj-button>-->\n  </div>\n\n</template>\n\n<script type=\"text/ecmascript-6\">\n// 引入全局实例\nimport _CodeMirror from 'codemirror';\n// import './diff_match_patch'\n// import {codemirror} from 'vue-codemirror'\nimport 'codemirror/addon/search/search';\n// import 'codemirror/addon/search/annotatescrollbar'\nimport 'codemirror/addon/search/matchesonscrollbar';\nimport 'codemirror/addon/search/searchcursor';\nimport 'codemirror/addon/search/match-highlighter';\nimport 'codemirror/addon/dialog/dialog.css';\nimport 'codemirror/addon/merge/merge.js';\nimport 'codemirror/addon/merge/merge.css';\n// // 折叠\nimport 'codemirror/addon/fold/foldgutter.css';\nimport 'codemirror/addon/fold/foldcode.js';\nimport 'codemirror/addon/fold/foldgutter.js';\nimport 'codemirror/addon/fold/xml-fold.js';\nimport 'codemirror/addon/fold/indent-fold.js';\nimport 'codemirror/addon/fold/brace-fold';\nimport 'codemirror/addon/fold/markdown-fold.js';\nimport 'codemirror/addon/fold/comment-fold.js';\n// // import 'codemirror/addon/selection/active-line';\n// import 'codemirror/addon/edit/closebrackets';\n// import 'codemirror/addon/edit/matchbrackets';\n\n// 核心样式\nimport 'codemirror/lib/codemirror.css';\n// 需要引入具体的语法高亮库才会有对应的语法高亮效果\n// codemirror 官方其实支持通过 /addon/mode/loadmode.js 和 /mode/meta.js 来实现动态加载对应语法高亮库\n// 但 vue 貌似没有无法在实例初始化后再动态加载对应 JS ，所以此处才把对应的 JS 提前引入\nimport 'codemirror/mode/meta.js';\n// import 'codemirror/mode/javascript/javascript'\n// import 'codemirror/mode/clike/clike'\n// import 'codemirror/mode/go/go'\n// import 'codemirror/mode/htmlmixed/htmlmixed'\n// import 'codemirror/mode/http/http'\n// import 'codemirror/mode/php/php'\n// import 'codemirror/mode/python/python'\n// import 'codemirror/mode/http/http'\n// import 'codemirror/mode/sql/sql'\n// import 'codemirror/mode/vue/vue'\n// import 'codemirror/mode/xml/xml'\n// import 'codemirror/mode/css/css.js';\n// import 'codemirror/mode/markdown/markdown.js';\n// import 'codemirror/mode/r/r.js';\n// import 'codemirror/mode/shell/shell.js';\n// import 'codemirror/mode/swift/swift.js';\n// 引入主题后还需要在 options 中指定主题才会生效\n// import 'codemirror/theme/cobalt.css';\n// import \"codemirror/theme/ambiance.css\";  // 这里引入的是主题样式，根据设置的theme的主题引入，一定要引入！！\n// import 'codemirror/theme/eclipse.css';\n// import 'codemirror/theme/monokai.css'\n// import 'codemirror/theme/blackboard.css';\n\nimport 'codemirror/addon/display/fullscreen.css'; // 全屏显示编辑器\nimport 'codemirror/addon/display/fullscreen.js'; // 全屏显示编辑器\n\n// 引入代码自动提示插件\nimport 'codemirror/addon/hint/show-hint.css';\nimport 'codemirror/addon/hint/sql-hint';\nimport 'codemirror/addon/hint/show-hint';\nimport 'codemirror/addon/display/panel';\n// 尝试获取全局实例\nconst CodeMirror = window.CodeMirror || _CodeMirror;\nimport DiffMatchPatch from 'diff-match-patch';\n// import './codeMirrorModal/revised-search'\nimport './search';\n\n// eslint-disable-next-line camelcase\nwindow.diff_match_patch = DiffMatchPatch;\nwindow.DIFF_DELETE = -1;\nwindow.DIFF_INSERT = 1;\nwindow.DIFF_EQUAL = 0;\nexport default {\n  name: 'djJson',\n  props: {\n    width: {\n      type: String || Number,\n      default: ''\n    },\n    height: {\n      type: String || Number,\n      default: ''\n    },\n    // 外部传入的内容，用于实现双向绑定\n    value: String,\n    valueLeft: {\n      type: String,\n      default: null\n    },\n    valueRight: {\n      type: String,\n      default: null\n    },\n    jsonFormat: {\n      type: Boolean,\n      default: true\n    },\n    // 语言\n    language: {\n      type: String,\n      default: 'javascript'\n    },\n    // 主题\n    theme: {\n      type: String,\n      default: 'eclipse'\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    // changeStatus: {\n    //   type: Boolean,\n    //   default: false\n    // },\n    // 代码对比\n    diff: {\n      type: Boolean,\n      default: false\n    },\n    // 左侧配置\n    leftConfig: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    // 左侧配置\n    configParams: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    // 右侧配置\n    rightConfig: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    // 行高亮\n    markText: {\n      type: Array,\n      default() {\n        return [];\n      }\n    },\n    // 选中\n    selectionLine: {\n      type: Array,\n      default() {\n        return [];\n      }\n    },\n    // 行标记\n    gutterMarker: {\n      type: Array,\n      default() {\n        return [];\n      }\n    },\n    // 视图跳转到某行\n    scrollIntoView: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    // 焦点到某行\n    setCursorLine: {\n      type: Object,\n      default() {\n        return {};\n      }\n    }\n  },\n  data() {\n    return {\n      changeStatus: 0,\n      mapArray: [],\n      // 内部真实的内容\n      code: '',\n      // 编辑器实例\n      coder: null,\n      // 默认配置\n      options: {\n        // 缩进格式\n        // tabSize: 2,\n        // 显示行号\n        lineNumbers: true,\n        line: true,\n        tabSize: 4,\n        /* extraKeys: { // 触发按键\n           'Ctrl': 'autocomplete'\n         },*/\n        // mode: {name: 'javascript', json: true},\n        // theme: \"eclipse\",\n        styleActiveLine: true,\n        foldgutter: true,\n        gutters: ['CodeMirror-linenumbers', 'CodeMirror-foldgutter', 'CodeMirror-lint-markers', 'breakpoints', 'note-gutter'],\n        lineWrapping: true,// 代码折叠\n        foldGutter: true,\n        matchBrackets: true,// 括号匹配\n        autoCloseBrackets: true,\n        textWrapping: true\n        // highlightSelectionMatches: {showToken: true, annotateScrollbar: false}\n        // highlightSelectionMatches: {\n        //   minChars: 2,\n        //   showToken:/\\b(java)\\b/,\n        //   style:'matchhighlight',\n        //   annotateScrollbar: true\n        // }\n      },\n      origLeft: null,\n      origRight: null\n    };\n  },\n  computed: {\n    tooltipId() {\n      return `dj-json-${Math.floor(Math.random() * 10000)}`;\n    },\n    jsonValue() {\n      return this.getJsonValue(this.value);\n    },\n    jsonValueLeft() {\n      return this.getJsonValue(this.valueLeft);\n    },\n    jsonValueRight() {\n      return this.getJsonValue(this.valueRight);\n    }\n  },\n  mounted() {\n    // console.log(this.value, 'mounted code编辑器')\n    // 初始化\n    // console.log(window.CodeMirror,CodeMirror,CodeMirror?.modeInfo,'1111111');\n    for (let i = 0; i < CodeMirror?.modeInfo?.length; i++) {\n      let modeInfo = CodeMirror.modeInfo[i];\n      this.mapArray.push({name: modeInfo.name, modeId: modeInfo.mode});\n    }\n    // console.log(this.mapArray, 'mapArray');\n    if (this.diff) {\n      this.origLeft = this.jsonValueLeft;\n      this.code = this.jsonValue;\n      this.origRight = this.jsonValueRight;\n      this.initDiff(this.jsonValueLeft, this.jsonValue, this.jsonValueRight);\n    } else {\n      this.init();\n    }\n    this.themeChange();\n    this.modeChange();\n    this.sizeChange();\n  },\n  watch: {\n    'configParams.readOnly': {\n      handler(val, oldVal) {\n        // console.log(val, oldVal,'configParams11');\n        this.watchConfigFun(val, oldVal, 'configParams', 'readOnly');\n      },\n      deep: true\n    },\n    'leftConfig.readOnly': {\n      handler(val, oldVal) {\n        // console.log(val, oldVal,'leftConfig');\n        this.watchConfigFun(val, oldVal, 'leftConfig', 'readOnly');\n      },\n      deep: true\n    },\n    'rightConfig.readOnly': {\n      handler(val, oldVal) {\n        // console.log(val, oldVal,'rightConfig');\n        this.watchConfigFun(val, oldVal, 'rightConfig', 'rightConfig');\n      },\n      deep: true\n    },\n    value(val) {\n      /* console.log(this.valueLeft, val, 'value=====');\n      if (this.diff) {\n        if (this.coder?.edit) {\n          this.changeStatusFun(this.coder?.edit, true, this.value);\n        }\n      } else {\n        this.changeStatusFun(this.coder, true, this.value);\n      }*/\n      if (this.value != this.code) {\n        this.updated();\n      }\n    },\n    /* code(val) {\n     // console.log(val, 'code=====');\n    },*/\n    valueLeft(val) {\n      if (this.valueLeft != this.origLeft) {\n        this.updated();\n      }\n      /* console.log(val, 'valueLeft=====');\n      this.origLeft = val;\n      this.changeStatusFun(this.coder?.left?.orig, true, this.valueLeft);\n      // console.log(val, this.valueLeft, 'valueLeft');\n      // if (this.diff) {\n      //   this.initDiff(this.origLeft, this.value, this.origRight)\n      // }*/\n    },\n    valueRight(val) {\n      if (this.valueRight != this.origRight) {\n        this.updated();\n      }\n      /* this.origRight = val;\n      // if (this.diff) {\n      //   this.initDiff(this.origLeft, this.value, this.origRight)\n      // }\n      if (this.coder?.right?.orig) {\n        this.changeStatusFun(this.coder?.right?.orig, true, this.valueRight);\n      }*/\n    },\n    theme() {\n      this.themeChange();\n    },\n    language(val) {\n      // console.log(this.language, 'language');\n      this.modeChange();\n    },\n    changeStatus(val) {\n      // console.log(val,'changeStatus');\n      if (this.diff) {\n        if (this.coder?.left?.orig) {\n          this.changeStatusFun(this.coder?.left?.orig, val, this.jsonValueLeft);\n        }\n        if (this.coder?.edit) {\n          this.changeStatusFun(this.coder?.edit, val, this.jsonValue);\n        }\n        if (this.coder?.right?.orig) {\n          this.changeStatusFun(this.coder?.right?.orig, val, this.jsonValueRight);\n        }\n      } else {\n        /* if (val === false) {\n          this.coder.setValue('');\n        } else {\n          this.coder.setValue(this.value || '');\n        }*/\n        this.changeStatusFun(this.coder, val, this.jsonValue);\n      }\n      // console.log(val, this.value, 'changeStatus=====');\n    }\n  },\n  methods: {\n    watchConfigFun(val, oldVal, position, key) {\n      // console.log(val, oldVal);\n      let coder = this.getCoder(position);\n      if (val !== oldVal) {\n        this.readOnlyFun(coder, this[position][key]);\n      }\n    },\n    getCoder(key) {\n      let coder;\n      if (this.diff) {\n        if (key === 'leftConfig') {\n          coder = this.coder?.left?.orig;\n        } else if (key === 'rightConfig') {\n          coder = this.coder?.right?.orig;\n        } else {\n          coder = this.coder?.edit;\n        }\n      } else {\n        coder = this.coder;\n      }\n      return coder;\n    },\n    getJsonValue(val) {\n      if (this.jsonFormat) {\n        if (val && typeof val === 'string') {\n          try {\n            var obj = JSON.parse(val);\n            if (typeof obj === 'object' && obj) {\n              return JSON.stringify(obj, null, '\\t');\n            }\n            return val;\n          } catch (e) {\n            return val;\n          }\n        }\n        return val;\n      }\n      return val;\n    },\n    updated() {\n      this.changeStatus++;\n    },\n    changeStatusFun(coder, changeStatus, val) {\n      coder.setValue(val || '');\n      /* if (changeStatus === false) {\n        coder.setValue('');\n      } else {\n        coder.setValue(val || '');\n      }*/\n    },\n    getJson() {\n      // console.log(this.origLeft, '\\n', this.code, '\\n', this.origRight, 'getJson');\n    },\n    initDiff(origLeft, value, origRight) {\n      if (value === null) {\n        return;\n      }\n      let target = document.getElementById('dj-json-view');\n      target.innerHTML = '';\n      // eslint-disable-next-line new-cap\n      this.coder = CodeMirror.MergeView(target, {\n        value: value,\n        origLeft: origLeft !== null ? origLeft : null,\n        orig: origRight !== null ? origRight : null,\n        cursorHeight: 1, // 光标高度\n        lineNumbers: true,\n        allowEditingOriginals: true,\n        matchBrackets: true,// 匹配括号\n        // revertButtons: true, // 是否显示还原按钮\n        // searchbox: true\n        ...this.options\n        // highlightDifferences: \"highlight\",//有差异的地方是否高亮\n        // connect: null,\n        // revertButtons: false,//revert按钮设置为true可以回滚\n        // styleActiveLine: true,//光标所在的位置代码高亮\n        // smartIndent: true, // 智能缩进\n        // matchBrackets: true, // 括号匹配\n        // textWrapping: true,\n        // foldGutter:true,//代码折叠\n        // lineWrapping:true,//代码折叠\n        // gutters: [\"CodeMirror-linenumbers\", \"CodeMirror-foldgutter\"]\n      });\n      // console.log(this.coder, 'this.coder');\n      this.themeChange();\n      if (origLeft !== null) {\n        this.readOnlyFun(this.coder.left.orig, this.leftConfig?.readOnly);\n        this.markTextFun(this.coder.left.orig, this.leftConfig?.markText);\n        this.gutterMarkerFun(this.coder.left.orig, this.leftConfig?.gutterMarker);\n        this.setSelectionFun(this.coder.left.orig, this.leftConfig?.selectionLine);\n        this.codeChange(this.coder.left.orig, 'origLeft');\n\n      }\n      if (value !== null) {\n        this.readOnlyFun(this.coder.edit, this.configParams?.readOnly);\n        this.markTextFun(this.coder.edit, this.configParams?.markText);\n        this.gutterMarkerFun(this.coder.edit, this.configParams?.gutterMarker);\n        this.setSelectionFun(this.coder.edit, this.configParams?.selectionLine);\n        this.codeChange(this.coder.edit, 'code');\n      }\n      if (origRight !== null) {\n        this.readOnlyFun(this.coder.right.orig, this.rightConfig?.readOnly);\n        this.markTextFun(this.coder.right.orig, this.rightConfig?.markText);\n        this.gutterMarkerFun(this.coder.right.orig, this.rightConfig?.gutterMarker);\n        this.setSelectionFun(this.coder.right.orig, this.rightConfig?.selectionLine);\n        this.codeChange(this.coder.right.orig, 'origRight');\n      }\n      // this.coder.edit.scrollIntoView({line:100, ch: 11});\n    },\n    codeChange(coder, key) {\n      coder.on('change', (coder) => {\n        this[key] = coder.getValue();\n        if (this.$emit) {\n          this.$emit('codeChange', this.origLeft, this.code, this.origRight);\n        }\n      });\n    },\n    // 主题\n    themeChange() {\n      // console.log(this.theme, 'this.theme');\n      let theme = this.theme || 'eclipse';\n      if (theme) {\n        require('codemirror/theme/' + theme + '.css');\n        if (this.diff) {\n          this.coder?.edit?.setOption('theme', theme);\n          this.coder?.left?.orig?.setOption('theme', theme);\n          this.coder?.right?.orig?.setOption('theme', theme);\n        } else {\n          this.coder?.setOption('theme', theme);\n        }\n      }\n    },\n    // 语言\n    modeChange() {\n      // console.log(this.language, 'this.language');\n      let mode = this.language || 'javascript';\n      if (mode) {\n        require('codemirror/mode/' + mode + '/' + mode);\n        if (this.diff) {\n          this.coder?.edit?.setOption('mode', mode);\n          this.coder?.left?.orig?.setOption('mode', mode);\n          this.coder?.right?.orig?.setOption('mode', mode);\n        } else {\n          this.coder?.setOption('mode', mode);\n        }\n      }\n    },\n    // 行高亮\n    readOnlyFun(coder, readOnly) {\n      coder.setOption('readOnly', readOnly);\n    },\n    // 大小\n    sizeChange() {\n      // let sia=this.height;\n      if (this.diff) {\n        this.coder?.edit?.setSize(this.width, this.height);\n        this.coder?.left?.orig?.setSize(this.width, this.height);\n        this.coder?.right?.orig?.setSize(this.width, this.height);\n        let mergeDom = document?.getElementById(this.tooltipId)?.querySelector('.CodeMirror-merge');\n        // console.log(mergeDom, 'mergeDom');\n        if (mergeDom && this.height) {\n          mergeDom.style.height = this.height;\n        }\n        /* if (this.width) {\n          mergeDom.style.width = this.width;\n        }*/\n      } else {\n        this.coder.setSize(this.width, this.height);\n      }\n    },\n    // 行高亮\n    markTextFun(coder, markTextArr) {\n      for (let i in markTextArr) {\n        coder.markText(markTextArr[i].start, markTextArr[i].end, markTextArr[i].element);\n      }\n    },\n    // 标记\n    makeMarker(color, innerHTML) {\n      var marker = document.createElement('div');\n      marker.style.color = color;\n      marker.innerHTML = innerHTML;\n      // marker.appendChild(innerHTML);\n      // console.log(color, innerHTML, marker, 'makeMarker');\n      return marker;\n    },\n    // 行标记\n    gutterMarkerFun(coder, gutterMarkerArr) {\n      for (let j in gutterMarkerArr) {\n        coder.setGutterMarker(gutterMarkerArr[j].line, 'note-gutter', this.makeMarker(gutterMarkerArr[j].color, gutterMarkerArr[j].innerHTML));\n      }\n      /* console.log(coder,gutterMarkerArr);\n      if (!gutterMarkerArr) {\n        let mergeDom = document?.getElementById(this.tooltipId)?.querySelector('.note-gutter');\n        mergeDom.classList.add('width0');\n        /!* let noteDom = document?.querySelectorAll('#'+this.tooltipId+' .note-gutter');\n        console.log(document?.getElementById(this.tooltipId),noteDom, 'noteDom');\n        // noteDom.add('width0');\n        for (let i in noteDom) {\n          if (noteDom[i] && noteDom[i].style) {\n            console.log(noteDom[i] , 'noteDom[i] ');\n            // noteDom[i].style.width = '0';\n            noteDom[i].classList.add('width0');\n          }\n        }*!/\n        // coder.refresh();\n      }*/\n    },\n    // 选中行\n    setSelectionFun(coder, setSelectionArr) {\n      for (let i in setSelectionArr) {\n        coder.setSelection(setSelectionArr[i].start, setSelectionArr[i].end);\n      }\n    },\n    // 焦点到某行\n    setCursorFun(coder, setCursorLine) {\n      if (setCursorLine) {\n        coder.setCursor(setCursorLine.line, setCursorLine.ch);\n        coder.focus();\n      }\n      // this.coder.setCursor(100,5);\n      // this.coder.focus();\n    },\n    // 焦点到某行\n    scrollIntoViewFun(coder, scrollIntoView) {\n      if (scrollIntoView) {\n        coder.scrollIntoView(scrollIntoView);\n      }\n    },\n    // 初始化\n    init() {\n      // console.log('init');\n      // 初始化编辑器实例，传入需要被实例化的文本域对象和默认配置\n      this.coder = CodeMirror.fromTextArea(this.$refs.textarea, this.options);\n      // 编辑器赋值\n      this.coder.setValue(this.jsonValue || this.code);\n      // console.log(this.value, this.code, '111111111')\n      // 支持双向绑定\n      this.coder.on('change', (coder) => {\n        this.code = coder.getValue();\n        if (this.$emit) {\n          this.$emit('input', this.code);\n        }\n      });\n      // console.log(this.coder, 'this.coder000')\n      this.$emit('languageList', this.mapArray);\n      /* let self=this;\n      this.coder.on('gutterClick', function (cm, n) {\n        var info = self.coder.lineInfo(n);\n       // console.log(self.coder, n, '11')\n        self.coder.setGutterMarker(n, \" breakpoints\", info.gutterMarkers ? null : self.makeMarker('orange', '<i class=\"iconfont home\"></i>'))\n      });*/\n\n      this.readOnlyFun(this.coder, this.configParams?.readOnly);\n      this.markTextFun(this.coder, this.configParams?.markText);\n      this.gutterMarkerFun(this.coder, this.configParams?.gutterMarker);\n      this.setSelectionFun(this.coder, this.configParams?.selectionLine);\n      // this.setCursorFun(this.coder, this.setCursorLine);\n      // this.scrollIntoViewFun(this.coder,this.scrollIntoView);\n      // this.coder.scrollIntoView({line:20, ch: 11});\n\n      /* this.coder.setGutterMarker(4, \"note-gutter\", this.makeMarker('orange', '<i class=\"iconfont home\"></i>'));\n      this.coder.setGutterMarker(5, \"note-gutter\", this.makeMarker('pink', '<i class=\"iconfont notification\"></i>'));*/\n      /* this.coder.markText({line: 0, ch: 0}, {line: 2, ch: 0}, {className: \"errorHighlight\"});\n      this.coder.markText({line: 3, ch: 0}, {line: 6, ch: 0}, {className: \"errorHighlight\"});\n      this.coder.markText({line: 13, ch: 0}, {line: 16, ch: 0}, {className: \"errorHighlight2\"});\n      this.coder.markText({line: 100, ch: 0}, {line: 101, ch: 0}, {className: \"errorHighlight2\"});*/\n      // this.coder.scrollIntoView({line:100, ch: 11});\n      // this.coder.setCursor(100,5);\n      // this.coder.focus();\n      // this.coder.options.highlightSelectionMatches = {showToken: true, annotateScrollbar: true};\n\n      // console.log(this.value, this.code, '222222222')\n      // 尝试从父容器获取语法类型\n      /* if (this.language) {\n        // 获取具体的语法类型对象\n        let modeObj = this._getLanguage(this.language);\n        // 判断父容器传入的语法是否被支持\n        if (modeObj) {\n          this.mode = modeObj.label;\n        }\n      }*/\n    },\n    // 获取当前语法类型\n    _getLanguage(language) {\n      // 在支持的语法类型列表中寻找传入的语法类型\n      return this.modes.find((mode) => {\n        // 所有的值都忽略大小写，方便比较\n        let currentLanguage = language.toLowerCase();\n        let currentLabel = mode.label.toLowerCase();\n        let currentValue = mode.value.toLowerCase();\n        // console.log(mode, language, '_getLanguage');\n        // 由于真实值可能不规范，例如 java 的真实值是 x-java ，所以讲 value 和 label 同时和传入语法进行比较\n        return currentLabel === currentLanguage || currentValue === currentLanguage;\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"less\">\n</style>\n"]}]}
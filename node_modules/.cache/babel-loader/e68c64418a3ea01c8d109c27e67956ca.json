{"remainingRequest":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js!/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangjunxia/work-github/dj-design/packages/image/src/image.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangjunxia/work-github/dj-design/packages/image/src/image.vue","mtime":1673509764327},{"path":"/Users/wangjunxia/work-github/dj-design/babel.config.js","mtime":1660011372032},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8g5bCGTm9kZUxpc3TovazmjaLmiJBBcnJheQpmdW5jdGlvbiB0cmFuc2Zvcm1MaXN0KGxpc3QpIHsKICB2YXIgYXJyID0gW107CgogIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewogICAgYXJyLnB1c2gobGlzdFtpXSk7CiAgfQoKICByZXR1cm4gYXJyOwp9IC8vIOafpeaJvuS4gOS4queItuiKgueCueS4i+aMh+Wumuexu+WQjeeahOWtkOiKgueCuQoKCmZ1bmN0aW9uIGdldFBhcmVudGRFbGVtZW50KHBhcmVudE5vZGUsIGNoaWxkTmFtZSkgewogIC8vIOWmguaenOeItuiKgueCuXBhcmVudE5vZGXlkKvmnInmjIflrprnsbvlkI1jaGlsZE5hbWXvvIzov5nkuKroioLngrnlsLHmmK/nm67moIfoioLngrkKICBpZiAocGFyZW50Tm9kZS5jbGFzc05hbWUuc2VhcmNoKGNoaWxkTmFtZSkgIT09IC0xKSB7CiAgICAvLyBjb25zb2xlLmxvZygnaWYtLS0tLS0nKTsKICAgIC8vIGNvbnNvbGUubG9nKHBhcmVudE5vZGUpOwogICAgcmV0dXJuIHBhcmVudE5vZGU7CiAgfSAvLyDniLboioLngrnkuI3lkKvmnInmjIflrprnsbvlkI1jaGlsZE5hbWXvvIzpgJLlvZLmn6Xmib7lroPnmoTlrZDoioLngrnjgIIKCgogIHZhciBub2RlcyA9IHBhcmVudE5vZGUuY2hpbGROb2RlczsgLy8g5bCG5a2Q6IqC54K555qEbGlzdOi9rOaNouaIkOagh+WHhuaVsOe7hOW5tuS4lOi/h+a7pOaOiVRleHTlhYPntKAKCiAgbm9kZXMgPSB0cmFuc2Zvcm1MaXN0KG5vZGVzKS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIGlmIChpdGVtLm5vZGVUeXBlICE9PSAzKSB7CiAgICAgIHJldHVybiBpdGVtOwogICAgfQogIH0pOyAvLyDlpoLmnpzlrZDoioLngrnmlbDnu4TkuK3mnInlgLzvvIzliJnpgJLlvZLmn6Xmib4KCiAgaWYgKG5vZGVzLmxlbmd0aCkgewogICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICBnZXRQYXJlbnRkRWxlbWVudChpdGVtLCBjaGlsZE5hbWUpOwogICAgfSk7CiAgfSAvLyBjb25zb2xlLmxvZygnZWxzZS0tLS0tLScpOwogIC8vIGNvbnNvbGUubG9nKG5vZGVzLCAnbm9kZXMnKTsKCgogIHJldHVybiBub2RlczsKfQoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdkakltYWdlJywKICBwcm9wczogewogICAgbGF6eTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIHNyYzogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAogICAgZml0OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2ZpbGwnCiAgICB9LAogICAgcHJldmlld1NyY0xpc3Q6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6ICgpID0+IFtdCiAgICB9LAogICAgLy8g5piv5ZCm5pi+56S65LiL6L29CiAgICBkb3dubG9hZFN0YXR1czogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgYm9yZGVyOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgLy8gIOaYr+WQpuaYvuekuua1ruWxggogICAgc2hvd01hc2s6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIC8vICDmmK/lkKbngrnlh7vpga7nvanlsYLlsLHlj6/mn6XnnIvlpKflm74KICAgIG1hc2tQcmV2aWV3OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgcHJldmlldygpIHsKICAgICAgY29uc3QgewogICAgICAgIHByZXZpZXdTcmNMaXN0CiAgICAgIH0gPSB0aGlzOwogICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShwcmV2aWV3U3JjTGlzdCkgJiYgcHJldmlld1NyY0xpc3QubGVuZ3RoID4gMDsKICAgIH0sCgogICAgdG9vbHRpcElkKCkgewogICAgICByZXR1cm4gYGRqLWltYWdlLSR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDApfWA7CiAgICB9LAoKICAgIGltYWdlSW5kZXgoKSB7CiAgICAgIGxldCBwcmV2aWV3SW5kZXggPSAwOwogICAgICBjb25zdCBzcmNJbmRleCA9IHRoaXMucHJldmlld1NyY0xpc3QuaW5kZXhPZih0aGlzLnNyYyk7CgogICAgICBpZiAoc3JjSW5kZXggPj0gMCkgewogICAgICAgIHByZXZpZXdJbmRleCA9IHNyY0luZGV4OwogICAgICB9CgogICAgICByZXR1cm4gcHJldmlld0luZGV4OwogICAgfQoKICB9LAogIHdhdGNoOiB7CiAgICBzcmModmFsKSB7CiAgICAgIHRoaXMuc2hvdyAmJiB0aGlzLmxvYWRJbWFnZSgpOwogICAgfSwKCiAgICBzaG93KHZhbCkgewogICAgICB2YWwgJiYgdGhpcy5sb2FkSW1hZ2UoKTsKICAgIH0KCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIGVycm9yOiBmYWxzZSwKICAgICAgc2hvd1ZpZXdlcjogZmFsc2UsCiAgICAgIHNjcm9sbENvbnRhaW5lcjogbnVsbCwKICAgICAgc2hvdzogIXRoaXMubGF6eQogICAgfTsKICB9LAoKICBtb3VudGVkKCkgewogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVtcHR5CiAgICBpZiAodGhpcy5sYXp5KSB7CiAgICAgIHRoaXMubGF6eUZ1bigpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5sb2FkSW1hZ2UoKTsKICAgIH0KICB9LAoKICBtZXRob2RzOiB7CiAgICBoYW5kbGVBY3Rpb25zKGFjdGlvbikgewogICAgICB0aGlzLiRlbWl0KCdoYW5kbGVBY3Rpb25zJywgYWN0aW9uKTsKICAgIH0sCgogICAgZG93bmxvYWQoKSB7CiAgICAgIHZhciBfdGhpcyQkbGlzdGVuZXJzOwoKICAgICAgLy8gY29uc29sZS5sb2codGhpcywgJ3RoaXMnKTsKICAgICAgLy8gY29uc29sZS5sb2codGhpcy4kbGlzdGVuZXJzLCAnJGxpc3RlbmVycycpOwogICAgICAvLyB0aGlzLiRlbWl0KCdkb3dubG9hZCcpOwogICAgICBpZiAoKF90aGlzJCRsaXN0ZW5lcnMgPSB0aGlzLiRsaXN0ZW5lcnMpICE9PSBudWxsICYmIF90aGlzJCRsaXN0ZW5lcnMgIT09IHZvaWQgMCAmJiBfdGhpcyQkbGlzdGVuZXJzLmRvd25sb2FkKSB7CiAgICAgICAgLy8gdGhpcy5jdXN0b21Eb3dubG9hZAogICAgICAgIHRoaXMuJGVtaXQoJ2Rvd25sb2FkJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIGNvbnNvbGUubG9nKCfniLbnuqflhoXnva7kuIvovb0nKTsKICAgICAgLy8gcmV0dXJuOwogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5yZWFjaGFibGUKCgogICAgICB0aGlzLiRyZWZzLmRqSW1nUHJldmlldy5kb3dubG9hZEZ1bigpOwogICAgfSwKCiAgICAvLyDojrflj5blhYPntKDmnIDnu4jmoLflvI/vvIzljIXmi6zkuoblhoXogZTmoLflvI/jgIHltYzlhaXmoLflvI/lkozlpJbpg6jmoLflvI8KICAgIGdldFN0eWxlQ29tcHV0ZWRQcm9wZXJ0eShlbGVtZW50LCBwcm9wZXJ0eSkgewogICAgICAvLyBOT1RFOiAxIERPTSBhY2Nlc3MgaGVyZQogICAgICB2YXIgcm9vdCA9IHdpbmRvdzsKICAgICAgdmFyIGNzcyA9IHJvb3QuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50LCBudWxsKTsKICAgICAgcmV0dXJuIGNzc1twcm9wZXJ0eV07CiAgICB9LAoKICAgIC8vIOiOt+WPlua7muWKqOeItue6pwogICAgZ2V0U2Nyb2xsUGFyZW50KGVsZW1lbnQpIHsKICAgICAgdmFyIHJvb3QgPSB3aW5kb3c7CiAgICAgIHZhciBwYXJlbnQgPSBlbGVtZW50ID09PSBudWxsIHx8IGVsZW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVsZW1lbnQucGFyZW50Tm9kZTsgLy8gY29uc29sZS5sb2coZWxlbWVudCxwYXJlbnQsJ2dldFNjcm9sbFBhcmVudCcpCgogICAgICBpZiAoIXBhcmVudCkgewogICAgICAgIHJldHVybiBlbGVtZW50OwogICAgICB9CgogICAgICBpZiAocGFyZW50ID09PSByb290LmRvY3VtZW50KSB7CiAgICAgICAgLy8gRmlyZWZveCBwdXRzIHRoZSBzY3JvbGxUT3AgdmFsdWUgb24gYGRvY3VtZW50RWxlbWVudGAgaW5zdGVhZCBvZiBgYm9keWAsIHdlIHRoZW4gY2hlY2sgd2hpY2ggb2YgdGhlbSBpcwogICAgICAgIC8vIGdyZWF0ZXIgdGhhbiAwIGFuZCByZXR1cm4gdGhlIHByb3BlciBlbGVtZW50CiAgICAgICAgaWYgKHJvb3QuZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgfHwgcm9vdC5kb2N1bWVudC5ib2R5LnNjcm9sbExlZnQpIHsKICAgICAgICAgIHJldHVybiByb290LmRvY3VtZW50LmJvZHk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcm9vdC5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CiAgICAgIH0gLy8gRmlyZWZveCB3YW50IHVzIHRvIGNoZWNrIGAteGAgYW5kIGAteWAgdmFyaWF0aW9ucyBhcyB3ZWxsCgoKICAgICAgaWYgKFsnc2Nyb2xsJywgJ2F1dG8nXS5pbmRleE9mKHRoaXMuZ2V0U3R5bGVDb21wdXRlZFByb3BlcnR5KHBhcmVudCwgJ292ZXJmbG93JykpICE9PSAtMSB8fCBbJ3Njcm9sbCcsICdhdXRvJ10uaW5kZXhPZih0aGlzLmdldFN0eWxlQ29tcHV0ZWRQcm9wZXJ0eShwYXJlbnQsICdvdmVyZmxvdy14JykpICE9PSAtMSB8fCBbJ3Njcm9sbCcsICdhdXRvJ10uaW5kZXhPZih0aGlzLmdldFN0eWxlQ29tcHV0ZWRQcm9wZXJ0eShwYXJlbnQsICdvdmVyZmxvdy15JykpICE9PSAtMSkgewogICAgICAgIC8vIElmIHRoZSBkZXRlY3RlZCBzY3JvbGxQYXJlbnQgaXMgYm9keSwgd2UgcGVyZm9ybSBhbiBhZGRpdGlvbmFsIGNoZWNrIG9uIGl0cyBwYXJlbnROb2RlCiAgICAgICAgLy8gaW4gdGhpcyB3YXkgd2UnbGwgZ2V0IGJvZHkgaWYgdGhlIGJyb3dzZXIgaXMgQ2hyb21lLWlzaCwgb3IgZG9jdW1lbnRFbGVtZW50IG90aGVyd2lzZQogICAgICAgIC8vIGZpeGVzIGlzc3VlICM2NQogICAgICAgIHJldHVybiBwYXJlbnQ7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLmdldFNjcm9sbFBhcmVudChlbGVtZW50LnBhcmVudE5vZGUpOwogICAgfSwKCiAgICAvLyDnlKjkuo7ojrflj5bmn5DkuKrlhYPntKDnm7jlr7nkuo5wYXJlbnTnmoTkvY3nva7pm4blkIgKICAgIC8vIOeUqOS6juiOt+WPluafkOS4quWFg+e0oOebuOWvueS6juinhueql+eahOS9jee9rumbhuWQiAogICAgZ2V0Qm91bmRpbmdDbGllbnRSZWN0MihlbGVtZW50KSB7CiAgICAgIGxldCByZWN0ID0gZWxlbWVudCA9PT0gbnVsbCB8fCBlbGVtZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOyAvLyBjb25zb2xlLmxvZyhlbGVtZW50LCByZWN0LCAncmVjdCcpOwogICAgICAvLyB3aGV0aGVyIHRoZSBJRSB2ZXJzaW9uIGlzIGxvd2VyIHRoYW4gMTEKCiAgICAgIGxldCBpc0lFID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdNU0lFJykgIT0gLTE7IC8vIGZpeCBpZSBkb2N1bWVudCBib3VuZGluZyB0b3AgYWx3YXlzIDAgYnVnCgogICAgICBsZXQgcmVjdFRvcCA9IGlzSUUgJiYgKGVsZW1lbnQgPT09IG51bGwgfHwgZWxlbWVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZWxlbWVudC50YWdOYW1lKSA9PT0gJ0hUTUwnID8gLShlbGVtZW50ID09PSBudWxsIHx8IGVsZW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVsZW1lbnQuc2Nyb2xsVG9wKSA6IHJlY3QgPT09IG51bGwgfHwgcmVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVjdC50b3A7CiAgICAgIGxldCBwYXJhbSA9IHsKICAgICAgICBsZWZ0OiByZWN0ID09PSBudWxsIHx8IHJlY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlY3QubGVmdCwKICAgICAgICB0b3A6IHJlY3RUb3AsCiAgICAgICAgcmlnaHQ6IHJlY3QgPT09IG51bGwgfHwgcmVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVjdC5yaWdodCwKICAgICAgICBib3R0b206IHJlY3QgPT09IG51bGwgfHwgcmVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVjdC5ib3R0b20sCiAgICAgICAgd2lkdGg6IChyZWN0ID09PSBudWxsIHx8IHJlY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlY3QucmlnaHQpIC0gKHJlY3QgPT09IG51bGwgfHwgcmVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVjdC5sZWZ0KSwKICAgICAgICBoZWlnaHQ6IChyZWN0ID09PSBudWxsIHx8IHJlY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlY3QuYm90dG9tKSAtIHJlY3RUb3AKICAgICAgfTsgLy8gY29uc29sZS5sb2cocGFyYW0sICdnZXRCb3VuZGluZ0NsaWVudFJlY3QnKTsKICAgICAgLy8gY29uc29sZS5sb2coZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LCB3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0LCAnZ2V0Qm91bmRpbmdDbGllbnRSZWN0Jyk7CgogICAgICByZXR1cm4gcGFyYW07CiAgICB9LAoKICAgIGxhenlGdW4oKSB7CiAgICAgIHZhciBfdGhpcyQkZWw7CgogICAgICAvLyBsZXQgY29udGFpbmVyUmVjdD10aGlzLnNjcm9sbENvbnRhaW5lcj8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgIC8vIC8vIGxldCBlbFJlY3QxPXRoaXMuJGVsPy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgLy8gbGV0IGVsUmVjdD10aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdDIodGhpcy4kZWwpOwogICAgICAvLyAvLyDlj6/op4bljLrln5/pq5jluqYKICAgICAgLy8gdmFyIGggPSB0aGlzLnNjcm9sbENvbnRhaW5lci5zY3JvbGxIZWlnaHQ7CiAgICAgIC8vIC8vIOa7muWKqOWMuuWfn+mrmOW6pgogICAgICAvLyB2YXIgcyA9IHRoaXMuc2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcDsKICAgICAgLy8gY29uc29sZS5sb2coY29udGFpbmVyUmVjdCxlbFJlY3QsJ3JlY3QnKTsKICAgICAgLy8gY29uc29sZS5sb2coaCxzLHRoaXMuJGVsLm9mZnNldFRvcCwnbGF6eUZ1bicpOwogICAgICB0aGlzLnNjcm9sbENvbnRhaW5lciA9IHRoaXMuZ2V0U2Nyb2xsUGFyZW50KHRoaXMuJGVsKTsgLy8gY29uc29sZS5sb2codGhpcy5zY3JvbGxDb250YWluZXIsIHRoaXMuc2Nyb2xsQ29udGFpbmVyPy50YWdOYW1lLCAnPT09PSBtb3VudGVkJyk7CgogICAgICB0aGlzLm9uKHRoaXMuc2Nyb2xsQ29udGFpbmVyLCAnc2Nyb2xsJywgdGhpcy5zY3JvbGxGdW4pOwogICAgICBsZXQgUGFyZW50RWxlbWVudCA9IGdldFBhcmVudGRFbGVtZW50KChfdGhpcyQkZWwgPSB0aGlzLiRlbCkgPT09IG51bGwgfHwgX3RoaXMkJGVsID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyQkZWwucGFyZW50Tm9kZSwgJ2RqLWltYWdlJykgfHwgW107IC8vIGNvbnNvbGUubG9nKFBhcmVudEVsZW1lbnQsICdQYXJlbnRFbGVtZW50Jyk7CgogICAgICBsZXQgaWRBcnIgPSAoUGFyZW50RWxlbWVudCA9PT0gbnVsbCB8fCBQYXJlbnRFbGVtZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBQYXJlbnRFbGVtZW50Lm1hcChpdGVtID0+IHsKICAgICAgICByZXR1cm4gaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpdGVtLmlkOwogICAgICB9KSkgfHwgW107CgogICAgICBpZiAoaWRBcnIuaW5kZXhPZih0aGlzLnRvb2x0aXBJZCkgPT09IDApIHsKICAgICAgICB0aGlzLnNob3cgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaGFuZGxlTGF6eUxvYWQoKTsKICAgICAgfQogICAgfSwKCiAgICBpc0luQ29udGFpbmVyKGVsLCBjb250YWluZXIpIHsKICAgICAgaWYgKCFlbCB8fCAhY29udGFpbmVyKSByZXR1cm4gZmFsc2U7CiAgICAgIGNvbnN0IGVsUmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICBsZXQgY29udGFpbmVyUmVjdDsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmaW5lZAoKICAgICAgaWYgKFt3aW5kb3csIGRvY3VtZW50LCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIG51bGwsIHVuZGVmaW5lZF0uaW5jbHVkZXMoY29udGFpbmVyKSkgewogICAgICAgIC8vIGNvbnNvbGUubG9nKDExMSk7CiAgICAgICAgY29udGFpbmVyUmVjdCA9IHsKICAgICAgICAgIHRvcDogMCwKICAgICAgICAgIHJpZ2h0OiB3aW5kb3cuaW5uZXJXaWR0aCwKICAgICAgICAgIGJvdHRvbTogd2luZG93LmlubmVySGVpZ2h0LAogICAgICAgICAgbGVmdDogMAogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gY29uc29sZS5sb2coMjIyKTsKICAgICAgICBjb250YWluZXJSZWN0ID0gY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICB9CgogICAgICBsZXQgYSA9IGVsUmVjdC50b3AgPCBjb250YWluZXJSZWN0LmJvdHRvbSAmJiBlbFJlY3QuYm90dG9tID4gY29udGFpbmVyUmVjdC50b3AgJiYgZWxSZWN0LnJpZ2h0ID4gY29udGFpbmVyUmVjdC5sZWZ0ICYmIGVsUmVjdC5sZWZ0IDwgY29udGFpbmVyUmVjdC5yaWdodDsgLy8gY29uc29sZS5sb2coY29udGFpbmVyUmVjdCwgZWxSZWN0LCBhLCB0aGlzLiRlbCwgJ2lzSW5Db250YWluZXInKTsKICAgICAgLy8gY29uc29sZS5sb2coZWxSZWN0LnRvcCA8IGNvbnRhaW5lclJlY3QuYm90dG9tLCBlbFJlY3QuYm90dG9tID4gY29udGFpbmVyUmVjdC50b3AsIGVsUmVjdC5yaWdodCA+IGNvbnRhaW5lclJlY3QubGVmdCwgZWxSZWN0LmxlZnQgPCBjb250YWluZXJSZWN0LnJpZ2h0LCAnaXNJbkNvbnRhaW5lcicpOwogICAgICAvLyBpZiAoZWxSZWN0LnRvcCA9PT0gZWxSZWN0LmJvdHRvbSB8fCBlbFJlY3QubGVmdCA9PT0gZWxSZWN0LnJpZ2h0KSB7CiAgICAgIC8vICAgcmV0dXJuIGZhbHNlOwogICAgICAvLyB9CgogICAgICByZXR1cm4gYTsKICAgIH0sCgogICAgc2Nyb2xsRnVuKCkgewogICAgICAvLyBjb25zb2xlLmxvZygn5rua5Yqo5LqGJyk7CiAgICAgIC8vIGxldCBjb250YWluZXJSZWN0PXRoaXMuc2Nyb2xsQ29udGFpbmVyPy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgLy8gbGV0IGVsUmVjdD10aGlzLiRlbD8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgIC8vIGNvbnNvbGUubG9nKGNvbnRhaW5lclJlY3QsZWxSZWN0LCdyZWN0Jyk7CiAgICAgIHRoaXMuaGFuZGxlTGF6eUxvYWQoKTsKICAgIH0sCgogICAgaGFuZGxlTGF6eUxvYWQoKSB7CiAgICAgIGlmICh0aGlzLmlzSW5Db250YWluZXIodGhpcy4kZWwsIHRoaXMuc2Nyb2xsQ29udGFpbmVyKSkgewogICAgICAgIHRoaXMuc2hvdyA9IHRydWU7IC8vIHRoaXMubG9hZEltYWdlKCk7CgogICAgICAgIHRoaXMub2ZmKHRoaXMuc2Nyb2xsQ29udGFpbmVyLCAnc2Nyb2xsJywgdGhpcy5zY3JvbGxGdW4pOwogICAgICB9CiAgICB9LAoKICAgIGxvYWRJbWFnZSgpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ2xvYWRJbWFnZScpOwogICAgICAvLyByZXNldCBzdGF0dXMKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy5lcnJvciA9IGZhbHNlOwogICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTsKCiAgICAgIGltZy5vbmxvYWQgPSBlID0+IHRoaXMuaGFuZGxlTG9hZChlLCBpbWcpOwoKICAgICAgaW1nLm9uZXJyb3IgPSB0aGlzLmhhbmRsZUVycm9yLmJpbmQodGhpcyk7CiAgICAgIGltZy5zcmMgPSB0aGlzLnNyYzsKICAgIH0sCgogICAgaGFuZGxlTG9hZCgpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ+WKoOi9veS6hicpOwogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgIH0sCgogICAgaGFuZGxlRXJyb3IoZSkgewogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgdGhpcy5lcnJvciA9IHRydWU7IC8vIGNvbnNvbGUubG9nKGUsICfliqDovb3lpLHotKUnKTsKCiAgICAgIHRoaXMuJGVtaXQoJ29uRXJyb3InLCBlKTsKICAgIH0sCgogICAgaW1hZ2VQcmV2aWV3RnVuKCkgewogICAgICB0aGlzLmltZ0NsaWNrKCk7CiAgICB9LAoKICAgIGltZ0NsaWNrKCkgewogICAgICBpZiAodGhpcy5wcmV2aWV3KSB7CiAgICAgICAgdGhpcy5zaG93Vmlld2VyID0gdHJ1ZTsKICAgICAgfQogICAgfSwKCiAgICBjbG9zZVByZXZpZXcoKSB7CiAgICAgIHRoaXMuc2hvd1ZpZXdlciA9IGZhbHNlOwogICAgfSwKCiAgICBvZmYoZWxlbWVudCwgZXZlbnQsIGhhbmRsZXIpIHsKICAgICAgLy8gY29uc29sZS5sb2coZWxlbWVudCwgZXZlbnQsICdvZmYnKTsKICAgICAgaWYgKGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIpIHsKICAgICAgICBpZiAoZWxlbWVudCAmJiBldmVudCkgewogICAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBmYWxzZSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LmRldGFjaEV2ZW50KSB7CiAgICAgICAgaWYgKGVsZW1lbnQgJiYgZXZlbnQpIHsKICAgICAgICAgIGVsZW1lbnQuZGV0YWNoRXZlbnQoJ29uJyArIGV2ZW50LCBoYW5kbGVyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgb24oZWxlbWVudCwgZXZlbnQsIGhhbmRsZXIpIHsKICAgICAgLy8gY29uc29sZS5sb2coZWxlbWVudCwgZXZlbnQsIGhhbmRsZXIsICdvbicpOwogICAgICAvLyBjb25zb2xlLmxvZyhkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyLCAnb24nKTsKICAgICAgaWYgKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHsKICAgICAgICAvLyBmaXJlZm94CiAgICAgICAgLy8gY29uc29sZS5sb2coJzExMScpOwogICAgICAgIGlmIChlbGVtZW50ICYmIGV2ZW50ICYmIGhhbmRsZXIpIHsKICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgZmFsc2UpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChkb2N1bWVudC5hdHRhY2hFdmVudCkgewogICAgICAgIC8vIGNvbnNvbGUubG9nKCcyMjInKTsKICAgICAgICBpZiAoZWxlbWVudCAmJiBldmVudCAmJiBoYW5kbGVyKSB7CiAgICAgICAgICBlbGVtZW50LmF0dGFjaEV2ZW50KCdvbicgKyBldmVudCwgaGFuZGxlcik7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogIH0sCgogIGJlZm9yZURlc3Ryb3koKSB7CiAgICAvLyBjb25zb2xlLmxvZygnYmVmb3JlRGVzdHJveScpOwogICAgdGhpcy5sYXp5ICYmIHRoaXMub2ZmKHRoaXMuc2Nyb2xsQ29udGFpbmVyLCAnc2Nyb2xsJywgdGhpcy5zY3JvbGxGdW4pOwogIH0KCn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;EACA;;EACA;IACAA;EACA;;EACA;AACA,C,CAEA;;;AACA;EACA;EACA;IACA;IACA;IACA;EACA,CANA,CAOA;;;EACA,kCARA,CASA;;EACAC;IACA;MACA;IACA;EACA,CAJA,EAVA,CAeA;;EACA;IACAA;MACAC;IACA,CAFA;EAGA,CApBA,CAqBA;EACA;;;EACA;AACA;;AAEA;EACAC,eADA;EAEAC;IACAC;MACAC,aADA;MAEAC;IAFA,CADA;IAKAC;MACAF,YADA;MAEAC;IAFA,CALA;IASAE;MACAH,YADA;MAEAC;IAFA,CATA;IAaAG;MACAJ,WADA;MAEAC;IAFA,CAbA;IAiBA;IACAI;MACAL,aADA;MAEAC;IAFA,CAlBA;IAsBAK;MACAN,aADA;MAEAC;IAFA,CAtBA;IA0BA;IACAM;MACAP,aADA;MAEAC;IAFA,CA3BA;IA+BA;IACAO;MACAR,aADA;MAEAC;IAFA;EAhCA,CAFA;EAuCAQ;IACAC;MACA;QAAAN;MAAA;MACA;IACA,CAJA;;IAKAO;MACA;IACA,CAPA;;IAQAC;MACA;MACA;;MACA;QACAC;MACA;;MACA;IACA;;EAfA,CAvCA;EAwDAC;IACAZ;MACA;IACA,CAHA;;IAIAa;MACAC;IACA;;EANA,CAxDA;;EAgEAC;IACA;MACAC,aADA;MAEAC,YAFA;MAGAC,iBAHA;MAIAC,qBAJA;MAKAN;IALA;EAOA,CAxEA;;EAyEAO;IACA;IACA;MACA;IACA,CAFA,MAEA;MACA;IACA;EACA,CAhFA;;EAiFAC;IACAC;MACA;IACA,CAHA;;IAIAC;MAAA;;MACA;MACA;MACA;MACA;QAAA;QACA;QACA;MACA,CAPA,CAQA;MACA;MACA;;;MACA;IACA,CAhBA;;IAiBA;IACAC;MACA;MACA;MACA;MACA;IACA,CAvBA;;IAwBA;IACAC;MACA;MACA,kFAFA,CAGA;;MAEA;QACA;MACA;;MAEA;QACA;QACA;QACA;UACA;QACA;;QACA;MACA,CAhBA,CAkBA;;;MACA,IACA,wFACA,sFADA,IAEA,sFAHA,EAIA;QACA;QACA;QACA;QACA;MACA;;MACA;IACA,CAvDA;;IAuDA;IACA;IACAC;MACA,6FADA,CAEA;MACA;;MACA,qDAJA,CAMA;;MACA;MAEA;QACAC,2DADA;QAEAC,YAFA;QAGAC,6DAHA;QAIAC,+DAJA;QAKAC,yHALA;QAMAC;MANA,EATA,CAiBA;MACA;;MACA;IACA,CA7EA;;IA8EAC;MAAA;;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA,sDAVA,CAWA;;MACA;MACA,iJAbA,CAcA;;MACA;QACA;MACA,CAFA,MAEA,EAFA;;MAGA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA,CArGA;;IAsGAC;MACA;MAEA;MACA,kBAJA,CAMA;;MACA;QACA;QACAC;UACAP,MADA;UAEAC,wBAFA;UAGAC,0BAHA;UAIAH;QAJA;MAMA,CARA,MAQA;QACA;QACAQ;MACA;;MACA,6CACAC,iCADA,IAEAA,iCAFA,IAGAA,iCAHA,CAnBA,CAuBA;MACA;MACA;MACA;MACA;;MACA;IACA,CAnIA;;IAoIAC;MACA;MACA;MACA;MACA;MACA;IACA,CA1IA;;IA2IAC;MACA;QACA,iBADA,CAEA;;QACA;MACA;IACA,CAjJA;;IAkJAC;MACA;MACA;MACA;MACA;MACA;;MACAC;;MACAA;MACAA;IACA,CA3JA;;IA4JAC;MACA;MACA;IACA,CA/JA;;IAgKAC;MACA;MACA,kBAFA,CAGA;;MACA;IACA,CArKA;;IAsKAC;MACA;IACA,CAxKA;;IAyKAC;MACA;QACA;MACA;IACA,CA7KA;;IA8KAC;MACA;IACA,CAhLA;;IAiLAC;MACA;MACA;QACA;UACAC;QACA;MACA,CAJA,MAIA;QACA;UACAA;QACA;MACA;IACA,CA5LA;;IA6LAC;MACA;MACA;MACA;QAAA;QACA;QACA;UACAD;QACA;MACA,CALA,MAKA;QACA;QACA;UACAA;QACA;MACA;IACA;;EA3MA,CAjFA;;EA8RAE;IACA;IACA;EACA;;AAjSA","names":["arr","nodes","getParentdElement","name","props","lazy","type","default","src","fit","previewSrcList","downloadStatus","border","showMask","maskPreview","computed","preview","tooltipId","imageIndex","previewIndex","watch","show","val","data","loading","error","showViewer","scrollContainer","mounted","methods","handleActions","download","getStyleComputedProperty","getScrollParent","getBoundingClientRect2","left","top","right","bottom","width","height","lazyFun","isInContainer","containerRect","elRect","scrollFun","handleLazyLoad","loadImage","img","handleLoad","handleError","imagePreviewFun","imgClick","closePreview","off","element","on","beforeDestroy"],"sourceRoot":"packages/image/src","sources":["image.vue"],"sourcesContent":["<template>\n  <div :id=\"tooltipId\"\n       :class=\"[\n        'dj-image',\n        {'dj-image-border': border},\n        {'dj-image-preview': preview && !showMask}\n        ]\">\n    <slot v-if=\"loading\" name=\"placeholder\">\n      <div class=\"dj-image-placeholder\"></div>\n    </slot>\n    <slot v-else-if=\"error\" name=\"error\">\n      <div class=\"dj-image-error\">\n        <!--<dj-icon icon=\"picture\"/>-->\n        <img\n          src=\"data:image/png;base64,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\"\n          alt=\"\">\n      </div>\n    </slot>\n    <img v-else class=\"dj-image-img\" :src=\"src\" alt=\"\" :style=\"'object-fit:'+fit\"\n         @click=\"showMask ? '' : imgClick()\">\n    <slot v-if=\"showMask\">\n      <dj-image-mask v-if=\"preview\" @imagePreviewFun=\"imagePreviewFun\" :maskPreview=\"maskPreview\"></dj-image-mask>\n    </slot>\n    <template v-if=\"preview\">\n      <dj-image-preview ref=\"djImgPreview\" :previewSrcList=\"previewSrcList\" :showViewer=\"showViewer\"\n                        :initialIndex=\"imageIndex\" :downloadStatus=\"downloadStatus\"\n                        @download=\"download\" @onClose=\"closePreview\" @handleActions=\"handleActions\"/>\n    </template>\n  </div>\n</template>\n\n<script>\n// 将NodeList转换成Array\nfunction transformList(list) {\n  var arr = [];\n  for (var i = 0; i < list.length; i++) {\n    arr.push(list[i]);\n  }\n  return arr;\n}\n\n// 查找一个父节点下指定类名的子节点\nfunction getParentdElement(parentNode, childName) {\n  // 如果父节点parentNode含有指定类名childName，这个节点就是目标节点\n  if (parentNode.className.search(childName) !== -1) {\n    // console.log('if------');\n    // console.log(parentNode);\n    return parentNode;\n  }\n  // 父节点不含有指定类名childName，递归查找它的子节点。\n  var nodes = parentNode.childNodes;\n  // 将子节点的list转换成标准数组并且过滤掉Text元素\n  nodes = transformList(nodes).filter(function(item) {\n    if (item.nodeType !== 3) {\n      return item;\n    }\n  });\n  // 如果子节点数组中有值，则递归查找\n  if (nodes.length) {\n    nodes.forEach(function(item) {\n      getParentdElement(item, childName);\n    });\n  }\n  // console.log('else------');\n  // console.log(nodes, 'nodes');\n  return nodes;\n}\n\nexport default {\n  name: 'djImage',\n  props: {\n    lazy: {\n      type: Boolean,\n      default: false\n    },\n    src: {\n      type: String,\n      default: ''\n    },\n    fit: {\n      type: String,\n      default: 'fill'\n    },\n    previewSrcList: {\n      type: Array,\n      default: () => []\n    },\n    // 是否显示下载\n    downloadStatus: {\n      type: Boolean,\n      default: true\n    },\n    border: {\n      type: Boolean,\n      default: false\n    },\n    //  是否显示浮层\n    showMask: {\n      type: Boolean,\n      default: true\n    },\n    //  是否点击遮罩层就可查看大图\n    maskPreview: {\n      type: Boolean,\n      default: false\n    }\n  },\n  computed: {\n    preview() {\n      const {previewSrcList} = this;\n      return Array.isArray(previewSrcList) && previewSrcList.length > 0;\n    },\n    tooltipId() {\n      return `dj-image-${Math.floor(Math.random() * 10000)}`;\n    },\n    imageIndex() {\n      let previewIndex = 0;\n      const srcIndex = this.previewSrcList.indexOf(this.src);\n      if (srcIndex >= 0) {\n        previewIndex = srcIndex;\n      }\n      return previewIndex;\n    }\n  },\n  watch: {\n    src(val) {\n      this.show && this.loadImage();\n    },\n    show(val) {\n      val && this.loadImage();\n    }\n  },\n  data() {\n    return {\n      loading: true,\n      error: false,\n      showViewer: false,\n      scrollContainer: null,\n      show: !this.lazy\n    };\n  },\n  mounted() {\n    // eslint-disable-next-line no-empty\n    if (this.lazy) {\n      this.lazyFun();\n    } else {\n      this.loadImage();\n    }\n  },\n  methods: {\n    handleActions(action) {\n      this.$emit('handleActions', action);\n    },\n    download() {\n      // console.log(this, 'this');\n      // console.log(this.$listeners, '$listeners');\n      // this.$emit('download');\n      if (this.$listeners?.download) {// this.customDownload\n        this.$emit('download');\n        return;\n      }\n      // console.log('父级内置下载');\n      // return;\n      // eslint-disable-next-line no-unreachable\n      this.$refs.djImgPreview.downloadFun();\n    },\n    // 获取元素最终样式，包括了内联样式、嵌入样式和外部样式\n    getStyleComputedProperty(element, property) {\n      // NOTE: 1 DOM access here\n      var root = window;\n      var css = root.getComputedStyle(element, null);\n      return css[property];\n    },\n    // 获取滚动父级\n    getScrollParent(element) {\n      var root = window;\n      var parent = element?.parentNode;\n      // console.log(element,parent,'getScrollParent')\n\n      if (!parent) {\n        return element;\n      }\n\n      if (parent === root.document) {\n        // Firefox puts the scrollTOp value on `documentElement` instead of `body`, we then check which of them is\n        // greater than 0 and return the proper element\n        if (root.document.body.scrollTop || root.document.body.scrollLeft) {\n          return root.document.body;\n        }\n        return root.document.documentElement;\n      }\n\n      // Firefox want us to check `-x` and `-y` variations as well\n      if (\n        ['scroll', 'auto'].indexOf(this.getStyleComputedProperty(parent, 'overflow')) !== -1 ||\n        ['scroll', 'auto'].indexOf(this.getStyleComputedProperty(parent, 'overflow-x')) !== -1 ||\n        ['scroll', 'auto'].indexOf(this.getStyleComputedProperty(parent, 'overflow-y')) !== -1\n      ) {\n        // If the detected scrollParent is body, we perform an additional check on its parentNode\n        // in this way we'll get body if the browser is Chrome-ish, or documentElement otherwise\n        // fixes issue #65\n        return parent;\n      }\n      return this.getScrollParent(element.parentNode);\n    },// 用于获取某个元素相对于parent的位置集合\n    // 用于获取某个元素相对于视窗的位置集合\n    getBoundingClientRect2(element) {\n      let rect = element?.getBoundingClientRect();\n      // console.log(element, rect, 'rect');\n      // whether the IE version is lower than 11\n      let isIE = navigator.userAgent.indexOf('MSIE') != -1;\n\n      // fix ie document bounding top always 0 bug\n      let rectTop = isIE && element?.tagName === 'HTML' ? -element?.scrollTop : rect?.top;\n\n      let param = {\n        left: rect?.left,\n        top: rectTop,\n        right: rect?.right,\n        bottom: rect?.bottom,\n        width: rect?.right - rect?.left,\n        height: rect?.bottom - rectTop\n      };\n      // console.log(param, 'getBoundingClientRect');\n      // console.log(document.documentElement.clientWidth, document.documentElement.clientHeight, window.innerWidth, window.innerHeight, 'getBoundingClientRect');\n      return param;\n    },\n    lazyFun() {\n      // let containerRect=this.scrollContainer?.getBoundingClientRect();\n      // // let elRect1=this.$el?.getBoundingClientRect();\n      // let elRect=this.getBoundingClientRect2(this.$el);\n      // // 可视区域高度\n      // var h = this.scrollContainer.scrollHeight;\n      // // 滚动区域高度\n      // var s = this.scrollContainer.scrollTop;\n      // console.log(containerRect,elRect,'rect');\n      // console.log(h,s,this.$el.offsetTop,'lazyFun');\n      this.scrollContainer = this.getScrollParent(this.$el);\n      // console.log(this.scrollContainer, this.scrollContainer?.tagName, '==== mounted');\n      this.on(this.scrollContainer, 'scroll', this.scrollFun);\n      let ParentElement = getParentdElement(this.$el?.parentNode, 'dj-image') || [];\n      // console.log(ParentElement, 'ParentElement');\n      let idArr = ParentElement?.map(item => {\n        return item?.id;\n      }) || [];\n      if (idArr.indexOf(this.tooltipId) === 0) {\n        this.show = true;\n      } else {\n        this.handleLazyLoad();\n      }\n    },\n    isInContainer(el, container) {\n      if (!el || !container) return false;\n\n      const elRect = el.getBoundingClientRect();\n      let containerRect;\n\n      // eslint-disable-next-line no-undefined\n      if ([window, document, document.documentElement, null, undefined].includes(container)) {\n        // console.log(111);\n        containerRect = {\n          top: 0,\n          right: window.innerWidth,\n          bottom: window.innerHeight,\n          left: 0\n        };\n      } else {\n        // console.log(222);\n        containerRect = container.getBoundingClientRect();\n      }\n      let a = elRect.top < containerRect.bottom &&\n        elRect.bottom > containerRect.top &&\n        elRect.right > containerRect.left &&\n        elRect.left < containerRect.right;\n      // console.log(containerRect, elRect, a, this.$el, 'isInContainer');\n      // console.log(elRect.top < containerRect.bottom, elRect.bottom > containerRect.top, elRect.right > containerRect.left, elRect.left < containerRect.right, 'isInContainer');\n      // if (elRect.top === elRect.bottom || elRect.left === elRect.right) {\n      //   return false;\n      // }\n      return a;\n    },\n    scrollFun() {\n      // console.log('滚动了');\n      // let containerRect=this.scrollContainer?.getBoundingClientRect();\n      // let elRect=this.$el?.getBoundingClientRect();\n      // console.log(containerRect,elRect,'rect');\n      this.handleLazyLoad();\n    },\n    handleLazyLoad() {\n      if (this.isInContainer(this.$el, this.scrollContainer)) {\n        this.show = true;\n        // this.loadImage();\n        this.off(this.scrollContainer, 'scroll', this.scrollFun);\n      }\n    },\n    loadImage() {\n      // console.log('loadImage');\n      // reset status\n      this.loading = true;\n      this.error = false;\n      const img = new Image();\n      img.onload = e => this.handleLoad(e, img);\n      img.onerror = this.handleError.bind(this);\n      img.src = this.src;\n    },\n    handleLoad() {\n      // console.log('加载了');\n      this.loading = false;\n    },\n    handleError(e) {\n      this.loading = false;\n      this.error = true;\n      // console.log(e, '加载失败');\n      this.$emit('onError', e);\n    },\n    imagePreviewFun() {\n      this.imgClick();\n    },\n    imgClick() {\n      if (this.preview) {\n        this.showViewer = true;\n      }\n    },\n    closePreview() {\n      this.showViewer = false;\n    },\n    off(element, event, handler) {\n      // console.log(element, event, 'off');\n      if (document.removeEventListener) {\n        if (element && event) {\n          element.removeEventListener(event, handler, false);\n        }\n      } else if (document.detachEvent) {\n        if (element && event) {\n          element.detachEvent('on' + event, handler);\n        }\n      }\n    },\n    on(element, event, handler) {\n      // console.log(element, event, handler, 'on');\n      // console.log(document.addEventListener, 'on');\n      if (document.addEventListener) {// firefox\n        // console.log('111');\n        if (element && event && handler) {\n          element.addEventListener(event, handler, false);\n        }\n      } else if (document.attachEvent) {\n        // console.log('222');\n        if (element && event && handler) {\n          element.attachEvent('on' + event, handler);\n        }\n      }\n    }\n  },\n  beforeDestroy() {\n    // console.log('beforeDestroy');\n    this.lazy && this.off(this.scrollContainer, 'scroll', this.scrollFun);\n  }\n};\n</script>\n\n<style scoped lang=\"less\">\n</style>\n"]}]}
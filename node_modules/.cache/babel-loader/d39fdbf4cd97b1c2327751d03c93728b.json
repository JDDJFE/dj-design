{"remainingRequest":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js!/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangjunxia/work-github/dj-design/packages/pagination/src/pagination.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangjunxia/work-github/dj-design/packages/pagination/src/pagination.vue","mtime":1673509764343},{"path":"/Users/wangjunxia/work-github/dj-design/babel.config.js","mtime":1660011372032},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdkalBhZ2luYXRpb24nLAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdDogW10sCiAgICAgIG51bTogMSwKICAgICAgY3VyTnVtOiAnJywKICAgICAgaG93bWFueTogJycsCiAgICAgIGlzZ3Q3OiBmYWxzZSwKICAgICAgaXNRaWFuOiBmYWxzZSwKICAgICAgaXNIb3U6IHRydWUsCiAgICAgIFNQYWdpbmF0aW9uVmFsdWU6IDEKICAgIH07CiAgfSwKCiAgcHJvcHM6IHsKICAgIGJvcmRlcjogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIHBhZ2VTaXplOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlcl0sCiAgICAgIGRlZmF1bHQ6IDEwCiAgICB9LAogICAgdG90YWw6IHsKICAgICAgdHlwZTogW1N0cmluZywgTnVtYmVyXSwKICAgICAgZGVmYXVsdDogMAogICAgfSwKICAgIGN1cnJlbnRQYWdlOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlcl0sCiAgICAgIGRlZmF1bHQ6IDEKICAgIH0sCiAgICBwYWdlU2l6ZXM6IHsKICAgICAgdHlwZTogQXJyYXksCgogICAgICBkZWZhdWx0KCkge30KCiAgICB9LAogICAgc2l6ZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdub3JtYWwnCiAgICB9CiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0VG90YWwodGhpcy5wYWdlU2l6ZSk7CiAgICB0aGlzLmNob29zZVBhZ2luYXRpb24odGhpcy5jdXJyZW50UGFnZSwgLTEpOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIGNob29zZUl0ZW0odmFsKSB7CiAgICAgIHRoaXMuZ2V0VG90YWwoTnVtYmVyKHZhbCkpOwogICAgICB0aGlzLmNob29zZVBhZ2luYXRpb24oMSwgLTIpOwogICAgICB0aGlzLiRlbWl0KCdzaXplLWNoYW5nZScsIHZhbCk7CiAgICB9LAoKICAgIGJsdXJTUGFnaW5hdGlvbigpIHsKICAgICAgaWYgKHRoaXMuU1BhZ2luYXRpb25WYWx1ZSAhPSAnJykgewogICAgICAgIGxldCBzcCA9IE51bWJlcih0aGlzLlNQYWdpbmF0aW9uVmFsdWUpOwoKICAgICAgICBpZiAoc3AgPiB0aGlzLm51bSkgewogICAgICAgICAgdGhpcy5jaG9vc2VQYWdpbmF0aW9uKHRoaXMubnVtKTsKICAgICAgICB9IGVsc2UgaWYgKHNwIDwgMSkgewogICAgICAgICAgdGhpcy5jaG9vc2VQYWdpbmF0aW9uKDEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmNob29zZVBhZ2luYXRpb24oc3ApOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICB2ZXJJbnB1dChzdHIpIHsKICAgICAgaWYgKHN0ciAmJiBzdHIgIT0gJycpIHsKICAgICAgICBsZXQgbnVtID0gc3RyLnJlcGxhY2UoL1teMC05XS9pZywgJycpOwoKICAgICAgICBpZiAoc3RyLmxlbmd0aCA+IDEpIHsKICAgICAgICAgIHJldHVybiBudW0ucmVwbGFjZSgvXGIoMCspL2dpLCAnJyk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gbnVtOwogICAgICB9CgogICAgICByZXR1cm4gJyc7CiAgICB9LAoKICAgIHJlZHVjZU4oKSB7CiAgICAgIGxldCBuID0gdGhpcy5jdXJOdW07CiAgICAgIG4tLTsKCiAgICAgIGlmIChuID4gMCkgewogICAgICAgIHRoaXMuY2hvb3NlUGFnaW5hdGlvbihuKTsKICAgICAgfQogICAgfSwKCiAgICBwbHVzTigpIHsKICAgICAgbGV0IG4gPSB0aGlzLmN1ck51bTsKICAgICAgbisrOwoKICAgICAgaWYgKG4gPD0gdGhpcy5udW0pIHsKICAgICAgICB0aGlzLmNob29zZVBhZ2luYXRpb24obik7CiAgICAgIH0KICAgIH0sCgogICAgY2hvb3NlUGFnaW5hdGlvbihuLCBibykgewogICAgICBpZiAobiA9PT0gJy4uLicpIHJldHVybiBmYWxzZTsKICAgICAgdGhpcy5pc0hvdSA9IHRydWU7CiAgICAgIHRoaXMuaXNRaWFuID0gdHJ1ZTsKICAgICAgbGV0IGFyciA9IFtuIC0gNSwgbiAtIDQsIG4gLSAzLCBuIC0gMiwgbiAtIDEsIG4sIG4gKyAxLCBuICsgMiwgbiArIDMsIG4gKyA0LCBuICsgNV0sCiAgICAgICAgICBpbmRleCA9IDEsCiAgICAgICAgICBsZW50ID0gYXJyLmxlbmd0aDsgLy8g5LyY5YyWCgogICAgICBpZiAodGhpcy5udW0gPiA3KSB7CiAgICAgICAgaWYgKG4gPj0gNSAmJiB0aGlzLmlzZ3Q3KSB7CiAgICAgICAgICBpZiAobiA8PSB0aGlzLm51bSAtIDEpIHsKICAgICAgICAgICAgaW5kZXggPSA0OwoKICAgICAgICAgICAgaWYgKG4gPT0gdGhpcy5udW0gLSAzKSB7CiAgICAgICAgICAgICAgdGhpcy5pc0hvdSA9IGZhbHNlOwogICAgICAgICAgICB9IGVsc2UgaWYgKG4gPT0gdGhpcy5udW0gLSAyKSB7CiAgICAgICAgICAgICAgaW5kZXggPSA1OwogICAgICAgICAgICAgIHRoaXMuaXNIb3UgPSBmYWxzZTsKICAgICAgICAgICAgfSBlbHNlIGlmIChuID09IHRoaXMubnVtIC0gMSkgewogICAgICAgICAgICAgIGluZGV4ID0gNjsKICAgICAgICAgICAgICB0aGlzLmlzSG91ID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGluZGV4ID0gNzsKICAgICAgICAgICAgdGhpcy5pc0hvdSA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAobiA8IDUgJiYgdGhpcy5pc2d0NykgewogICAgICAgICAgdGhpcy5pc1FpYW4gPSBmYWxzZTsKICAgICAgICAgIGluZGV4ID0gbjsKICAgICAgICB9CgogICAgICAgIHRoaXMubGlzdCA9IFsxLCAnLi4uJywgLi4uYXJyLnNsaWNlKGxlbnQgLSAoNSArIChpbmRleCAtIDEpKSwgbGVudCAtIChpbmRleCAtIDEpKSwgJy4uLicsIHRoaXMubnVtXTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmxpc3QgPSBbXTsKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm51bTsgaSsrKSB7CiAgICAgICAgICB0aGlzLmxpc3QucHVzaChpICsgMSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoYm8gPT0gLTIgfHwgYm8gIT0gLTEgJiYgdGhpcy5jdXJOdW0gIT09IG4pIHsKICAgICAgICB0aGlzLiRlbWl0KCdjdXJyZW50LWNoYW5nZScsIG4sIHRoaXMuaG93bWFueSk7CiAgICAgIH0KCiAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTpjdXJyZW50UGFnZScsIG4pOwogICAgICBpZiAobiAhPSAnLi4uJykgdGhpcy5jdXJOdW0gPSBuOwogICAgfSwKCiAgICBnZXRUb3RhbChwYWdlU2l6ZSkgewogICAgICB0aGlzLmhvd21hbnkgPSBwYWdlU2l6ZTsKICAgICAgdGhpcy5udW0gPSBNYXRoLmNlaWwodGhpcy50b3RhbCAvIHBhZ2VTaXplKTsKICAgICAgdGhpcy5pc2d0NyA9IHRoaXMubnVtID4gNzsKICAgIH0KCiAgfSwKICB3YXRjaDogewogICAgY3VycmVudFBhZ2UodmFsKSB7CiAgICAgIHRoaXMuY2hvb3NlUGFnaW5hdGlvbih0aGlzLmN1cnJlbnRQYWdlKTsKICAgIH0sCgogICAgdG90YWwoKSB7CiAgICAgIHRoaXMuZ2V0VG90YWwodGhpcy5wYWdlU2l6ZSk7CiAgICAgIHRoaXMuY2hvb3NlUGFnaW5hdGlvbih0aGlzLmN1cnJlbnRQYWdlLCAtMSk7CiAgICB9CgogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;EACAA,oBADA;;EAEAC;IACA;MACAC,QADA;MAEAC,MAFA;MAGAC,UAHA;MAIAC,WAJA;MAKAC,YALA;MAMAC,aANA;MAOAC,WAPA;MAQAC;IARA;EAUA,CAbA;;EAcAC;IACAC;MACAC,aADA;MAEAC;IAFA,CADA;IAKAC;MACAF,sBADA;MAEAC;IAFA,CALA;IASAE;MACAH,sBADA;MAEAC;IAFA,CATA;IAaAG;MACAJ,sBADA;MAEAC;IAFA,CAbA;IAiBAI;MACAL,WADA;;MAEAC;;IAFA,CAjBA;IAqBAK;MACAN,YADA;MAEAC;IAFA;EArBA,CAdA;;EAwCAM;IACA;IACA;EACA,CA3CA;;EA4CAC;IACAC;MACA;MACA;MACA;IACA,CALA;;IAMAC;MACA;QACA;;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA;IACA,CAjBA;;IAkBAC;MACA;QACA;;QACA;UACA;QACA;;QACA;MACA;;MACA;IACA,CA3BA;;IA4BAC;MACA;MACAC;;MACA;QACA;MACA;IACA,CAlCA;;IAmCAC;MACA;MACAD;;MACA;QACA;MACA;IACA,CAzCA;;IA0CAE;MACA;MACA;MACA;MACA;MAAA,IACAC,SADA;MAAA,IAEAC,iBAFA,CAJA,CAOA;;MACA;QACA;UACA;YACAD;;YACA;cACA;YACA,CAFA,MAEA;cACAA;cACA;YACA,CAHA,MAGA;cACAA;cACA;YACA;UACA,CAXA,MAWA;YACAA;YACA;UACA;QACA,CAhBA,MAgBA;UACA;UACAA;QACA;;QACA;MACA,CAtBA,MAsBA;QACA;;QACA;UACA;QACA;MACA;;MACA;QACA;MACA;;MACA;MACA;IACA,CAnFA;;IAoFAE;MACA;MACA;MACA;IACA;;EAxFA,CA5CA;EAsIAC;IACAf;MACA;IACA,CAHA;;IAIAD;MACA;MACA;IACA;;EAPA;AAtIA","names":["name","data","list","num","curNum","howmany","isgt7","isQian","isHou","SPaginationValue","props","border","type","default","pageSize","total","currentPage","pageSizes","size","created","methods","chooseItem","blurSPagination","verInput","reduceN","n","plusN","choosePagination","index","lent","getTotal","watch"],"sourceRoot":"packages/pagination/src","sources":["pagination.vue"],"sourcesContent":["<template>\n    <div class=\"dj-pagination\" :class=\"[border && 'dj-paginationB', size == 'small' && 'dj-pagination-small']\">\n        <span :style=\"{padding:  '10px'}\">共 {{total}}  条</span>\n        <ul class=\"dj-pagination-box\" >\n          <li class=\"dj-pagination-left\" @click=\"reduceN\"><dj-icon icon=\"arrow-left\"></dj-icon></li>\n          <li class=\"dj-pagination-num\"\n          :class=\"{'is-active':curNum==item}\"\n          :style=\"[(isQian&&index==1)||(isHou&&index==list.length-2) ? {border: 'none'} : {}]\"\n            @click=\"choosePagination(item,index)\"\n            v-for=\"(item,index) in list\"\n            :key=\"index\"\n            v-if=\"item!='...'||(isQian&&index==1)||(isHou&&index==list.length-2)\"\n            >{{item}}</li>\n          <li class=\"dj-pagination-left\" @click=\"plusN\"><dj-icon icon=\"arrow-right\"></dj-icon></li>\n        </ul>\n        <span class=\"dj-pagination-ye\">\n          <span v-if=\"!border\">前往 </span>\n          <span :class=\"border && 'dj-page-inner'\">\n            <input\n              type=\"text\"\n              class=\"dj-pagination-ye-input\"\n              v-model=\"SPaginationValue\"\n              @blur=\"blurSPagination\"\n              @keydown.enter.prevent=\"blurSPagination\"\n              @input=\"SPaginationValue=verInput(SPaginationValue)\">\n            <i v-if=\"border\" class=\"iconfont search2\"/>\n            <span v-if=\"!border\"> 页</span>\n          </span>\n          <dj-select v-model=\"howmany\" class=\"lt dj-pagination-page-size\" @change=\"chooseItem\" v-if=\"pageSizes && pageSizes.length\" :style=\"`width: ${size == 'small' ? '90px' : '100px'}`\" :height=\"`${size == 'small' ? '22px' : '30px'}`\">\n            <dj-option :value=\"item\" :label=\"item+' 条/页'\" v-for=\"(item,index) in pageSizes\" :key=\"index\"></dj-option>\n          </dj-select>\n        </span>\n    </div>\n</template>\n<script>\nexport default {\n  name: 'djPagination',\n  data(){\n    return {\n      list: [],\n      num: 1,\n      curNum: '',\n      howmany: '',\n      isgt7: false,\n      isQian: false,\n      isHou: true,\n      SPaginationValue: 1\n    };\n  },\n  props: {\n    border: {\n      type: Boolean,\n      default: false\n    },\n    pageSize: {\n      type: [String,Number],\n      default: 10\n    },\n    total: {\n      type: [String,Number],\n      default: 0\n    },\n    currentPage: {\n      type: [String,Number],\n      default: 1\n    },\n    pageSizes: {\n      type: Array,\n      default() {}\n    },\n    size: {\n      type: String,\n      default: 'normal'\n    }\n  },\n  created(){\n    this.getTotal(this.pageSize);\n    this.choosePagination(this.currentPage, -1);\n  },\n  methods: {\n    chooseItem(val){\n      this.getTotal(Number(val));\n      this.choosePagination(1, -2);\n      this.$emit('size-change',val);\n    },\n    blurSPagination(){\n      if (this.SPaginationValue!=''){\n        let sp = Number(this.SPaginationValue);\n        if (sp> this.num){\n          this.choosePagination(this.num);\n        } else if (sp < 1){\n          this.choosePagination(1);\n        } else {\n          this.choosePagination(sp);\n        }\n      }\n    },\n    verInput(str){\n      if (str&&str!=''){\n        let num= str.replace(/[^0-9]/ig,'');\n        if (str.length>1){\n          return num.replace(/\\b(0+)/gi,'');\n        }\n        return num;\n      }\n      return '';\n    },\n    reduceN(){\n      let n=this.curNum;\n      n--;\n      if (n>0){\n        this.choosePagination(n);\n      }\n    },\n    plusN(){\n      let n=this.curNum;\n      n++;\n      if (n<=this.num){\n        this.choosePagination(n);\n      }\n    },\n    choosePagination(n, bo){\n      if (n === '...') return false;\n      this.isHou=true;\n      this.isQian=true;\n      let arr = [n-5, n-4, n-3, n-2, n-1, n, n+1, n+2, n+3, n+4, n+5],\n        index = 1,\n        lent = arr.length;\n        // 优化\n      if (this.num>7) {\n        if (n>=5&&this.isgt7){\n          if (n<=this.num-1){\n            index = 4;\n            if (n==this.num-3){\n              this.isHou=false;\n            } else if (n==this.num-2){\n              index = 5;\n              this.isHou=false;\n            } else if (n==this.num-1){\n              index = 6;\n              this.isHou=false;\n            }\n          } else {\n            index = 7;\n            this.isHou=false;\n          }\n        } else if (n<5&&this.isgt7){\n          this.isQian=false;\n          index = n;\n        }\n        this.list = [1, '...', ...arr.slice(lent-(5+(index-1)), lent-(index-1)), '...', this.num];\n      } else {\n        this.list=[];\n        for (let i=0; i<this.num;i++ ){\n          this.list.push(i+1);\n        }\n      }\n      if (bo == -2 || bo != -1 && this.curNum!==n) {\n        this.$emit('current-change',n, this.howmany);\n      }\n      this.$emit('update:currentPage', n);\n      if (n!='...') this.curNum=n;\n    },\n    getTotal(pageSize){\n      this.howmany=pageSize;\n      this.num=Math.ceil(this.total/pageSize);\n      this.isgt7 = this.num>7;\n    }\n  },\n  watch: {\n    currentPage(val){\n      this.choosePagination(this.currentPage);\n    },\n    total(){\n      this.getTotal(this.pageSize);\n      this.choosePagination(this.currentPage, -1);\n    }\n  }\n};\n</script>\n"]}]}
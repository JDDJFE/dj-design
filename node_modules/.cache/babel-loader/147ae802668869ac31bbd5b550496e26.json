{"remainingRequest":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js!/Users/wangjunxia/work-github/dj-design/node_modules/eslint-loader/index.js??ref--14-0!/Users/wangjunxia/work-github/dj-design/src/utils/theme/setting.js","dependencies":[{"path":"/Users/wangjunxia/work-github/dj-design/src/utils/theme/setting.js","mtime":1676537858403},{"path":"/Users/wangjunxia/work-github/dj-design/babel.config.js","mtime":1660011372032},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:bGV0IHRoZW1lTGlzdCA9IHJlcXVpcmUoJy4vdGhlbWUuanNvbicpOwoKbGV0IGxlc3NOb2Rlc0FwcGVuZGVkOwoKZnVuY3Rpb24gaW5qZWN0VGhlbWUobGlzdCkgewogIHRoZW1lTGlzdCA9IFsuLi50aGVtZUxpc3QsIC4uLmxpc3RdOwogIHJldHVybiB0aGlzOwp9Cgpjb25zdCB1cGRhdGVUaGVtZSA9IHRoZW1lID0+IHsKICAvLyBEb24ndCBjb21waWxlIGxlc3MgaW4gcHJvZHVjdGlvbiEKCiAgLyogaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHsKICAgIHJldHVybjsKICB9ICovCiAgY29uc3QgbWF0Y2hlZEl0ZW0gPSB0aGVtZUxpc3QuZmluZChhID0+IGEua2V5ID09PSB0aGVtZSk7CgogIGZ1bmN0aW9uIGJ1aWxkSXQoKSB7CiAgICAvLyDmraPnoa7nmoTliKTlrppsZXNz5piv5ZCm5bey57uP5Yqg6L29bGVzcy5tb2RpZnlWYXJz5Y+v55SoCiAgICBpZiAoIXdpbmRvdy5sZXNzIHx8ICF3aW5kb3cubGVzcy5tb2RpZnlWYXJzKSB7CiAgICAgIHJldHVybjsKICAgIH0gLy8gbGVzcy5tb2RpZnlWYXJz5Y+v55SoCgoKICAgIGlmIChtYXRjaGVkSXRlbSAhPT0gbnVsbCAmJiBtYXRjaGVkSXRlbSAhPT0gdm9pZCAwICYmIG1hdGNoZWRJdGVtLm1vZGlmeVZhcnMpIHsKICAgICAgd2luZG93Lmxlc3MubW9kaWZ5VmFycyhtYXRjaGVkSXRlbSA9PT0gbnVsbCB8fCBtYXRjaGVkSXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWF0Y2hlZEl0ZW0ubW9kaWZ5VmFycykudGhlbigoKSA9PiB7fSkuY2F0Y2goKCkgPT4gey8vIGhpZGVNZXNzYWdlKCk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgaWYgKCFtYXRjaGVkSXRlbSkgewogICAgbGV0IGxlc3NOb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbG9yJyk7CiAgICBsZXQgc3R5bGVOb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc3R5bGVbaWQ9Imxlc3M6Y29sb3IiXScpOwoKICAgIGlmIChsZXNzTm9kZSkgewogICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxlc3NOb2RlKTsKICAgIH0KCiAgICBpZiAoc3R5bGVOb2RlKSB7CiAgICAgIHN0eWxlTm9kZS5yZW1vdmUoKTsKICAgIH0KICB9CgogIGlmICghbGVzc05vZGVzQXBwZW5kZWQpIHsKICAgIC8vIGluc2VydCBsZXNzLmpzIGFuZCBjb2xvci5sZXNzCiAgICBjb25zdCBsZXNzU3R5bGVOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpOwogICAgY29uc3QgbGVzc0NvbmZpZ05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKICAgIGNvbnN0IGxlc3NTY3JpcHROb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7CiAgICBsZXNzU3R5bGVOb2RlLnNldEF0dHJpYnV0ZSgncmVsJywgJ3N0eWxlc2hlZXQvbGVzcycpOwogICAgbGVzc1N0eWxlTm9kZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCAnL2NvbG9yLmxlc3MnKTsKICAgIGxlc3NTdHlsZU5vZGUuc2V0QXR0cmlidXRlKCdpZCcsICdjb2xvcicpOwogICAgbGVzc0NvbmZpZ05vZGUuaW5uZXJIVE1MID0gYAogICAgICB3aW5kb3cubGVzcyA9IHsKICAgICAgICBhc3luYzogdHJ1ZSwKICAgICAgICBlbnY6ICdwcm9kdWN0aW9uJywKICAgICAgICBqYXZhc2NyaXB0RW5hYmxlZDogdHJ1ZQogICAgICB9OwogICAgYDsKICAgIGxlc3NTY3JpcHROb2RlLnNyYyA9ICdodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlc3NANCc7CiAgICBsZXNzU2NyaXB0Tm9kZS5hc3luYyA9IHRydWU7CgogICAgbGVzc1NjcmlwdE5vZGUub25sb2FkID0gKCkgPT4gewogICAgICBidWlsZEl0KCk7CiAgICAgIGxlc3NTY3JpcHROb2RlLm9ubG9hZCA9IG51bGw7CiAgICB9OwoKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGVzc1N0eWxlTm9kZSk7CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxlc3NDb25maWdOb2RlKTsKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGVzc1NjcmlwdE5vZGUpOwogICAgbGVzc05vZGVzQXBwZW5kZWQgPSB0cnVlOwogIH0gZWxzZSB7CiAgICBidWlsZEl0KCk7CiAgfQp9OwoKZXhwb3J0IHsgdXBkYXRlVGhlbWUsIHRoZW1lTGlzdCwgaW5qZWN0VGhlbWUgfTs="},{"version":3,"names":["themeList","require","lessNodesAppended","injectTheme","list","updateTheme","theme","matchedItem","find","a","key","buildIt","window","less","modifyVars","then","catch","lessNode","document","getElementById","styleNode","querySelector","body","removeChild","remove","lessStyleNode","createElement","lessConfigNode","lessScriptNode","setAttribute","innerHTML","src","async","onload","appendChild"],"sources":["/Users/wangjunxia/work-github/dj-design/src/utils/theme/setting.js"],"sourcesContent":["let themeList = require('./theme.json');\nlet lessNodesAppended;\n\nfunction injectTheme(list) {\n  themeList = [...themeList, ...list];\n  return this;\n}\n\nconst updateTheme = (theme) => {\n  // Don't compile less in production!\n  /* if (process.env.NODE_ENV === 'production') {\n    return;\n  } */\n  const matchedItem = themeList.find((a) => a.key === theme);\n  function buildIt() {\n    // 正确的判定less是否已经加载less.modifyVars可用\n    if (!window.less || !window.less.modifyVars) {\n      return;\n    }\n    // less.modifyVars可用\n    if (matchedItem?.modifyVars) {\n      window.less\n        .modifyVars(matchedItem?.modifyVars)\n        .then(() => {})\n        .catch(() => {\n          // hideMessage();\n        });\n    }\n  }\n  if (!matchedItem) {\n    let lessNode = document.getElementById('color');\n    let styleNode = document.querySelector('style[id=\"less:color\"]');\n    if (lessNode) {\n      document.body.removeChild(lessNode);\n    }\n    if (styleNode) {\n      styleNode.remove();\n    }\n  }\n  if (!lessNodesAppended) {\n    // insert less.js and color.less\n    const lessStyleNode = document.createElement('link');\n    const lessConfigNode = document.createElement('script');\n    const lessScriptNode = document.createElement('script');\n    lessStyleNode.setAttribute('rel', 'stylesheet/less');\n    lessStyleNode.setAttribute('href', '/color.less');\n    lessStyleNode.setAttribute('id', 'color');\n    lessConfigNode.innerHTML = `\n      window.less = {\n        async: true,\n        env: 'production',\n        javascriptEnabled: true\n      };\n    `;\n    lessScriptNode.src = 'https://cdn.jsdelivr.net/npm/less@4';\n    lessScriptNode.async = true;\n    lessScriptNode.onload = () => {\n      buildIt();\n      lessScriptNode.onload = null;\n    };\n    document.body.appendChild(lessStyleNode);\n    document.body.appendChild(lessConfigNode);\n    document.body.appendChild(lessScriptNode);\n    lessNodesAppended = true;\n  } else {\n    buildIt();\n  }\n};\n\nexport { updateTheme, themeList, injectTheme };\n"],"mappings":"AAAA,IAAIA,SAAS,GAAGC,OAAO,CAAC,cAAD,CAAvB;;AACA,IAAIC,iBAAJ;;AAEA,SAASC,WAAT,CAAqBC,IAArB,EAA2B;EACzBJ,SAAS,GAAG,CAAC,GAAGA,SAAJ,EAAe,GAAGI,IAAlB,CAAZ;EACA,OAAO,IAAP;AACD;;AAED,MAAMC,WAAW,GAAIC,KAAD,IAAW;EAC7B;;EACA;AACF;AACA;EACE,MAAMC,WAAW,GAAGP,SAAS,CAACQ,IAAV,CAAgBC,CAAD,IAAOA,CAAC,CAACC,GAAF,KAAUJ,KAAhC,CAApB;;EACA,SAASK,OAAT,GAAmB;IACjB;IACA,IAAI,CAACC,MAAM,CAACC,IAAR,IAAgB,CAACD,MAAM,CAACC,IAAP,CAAYC,UAAjC,EAA6C;MAC3C;IACD,CAJgB,CAKjB;;;IACA,IAAIP,WAAJ,aAAIA,WAAJ,eAAIA,WAAW,CAAEO,UAAjB,EAA6B;MAC3BF,MAAM,CAACC,IAAP,CACGC,UADH,CACcP,WADd,aACcA,WADd,uBACcA,WAAW,CAAEO,UAD3B,EAEGC,IAFH,CAEQ,MAAM,CAAE,CAFhB,EAGGC,KAHH,CAGS,MAAM,CACX;MACD,CALH;IAMD;EACF;;EACD,IAAI,CAACT,WAAL,EAAkB;IAChB,IAAIU,QAAQ,GAAGC,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAf;IACA,IAAIC,SAAS,GAAGF,QAAQ,CAACG,aAAT,CAAuB,wBAAvB,CAAhB;;IACA,IAAIJ,QAAJ,EAAc;MACZC,QAAQ,CAACI,IAAT,CAAcC,WAAd,CAA0BN,QAA1B;IACD;;IACD,IAAIG,SAAJ,EAAe;MACbA,SAAS,CAACI,MAAV;IACD;EACF;;EACD,IAAI,CAACtB,iBAAL,EAAwB;IACtB;IACA,MAAMuB,aAAa,GAAGP,QAAQ,CAACQ,aAAT,CAAuB,MAAvB,CAAtB;IACA,MAAMC,cAAc,GAAGT,QAAQ,CAACQ,aAAT,CAAuB,QAAvB,CAAvB;IACA,MAAME,cAAc,GAAGV,QAAQ,CAACQ,aAAT,CAAuB,QAAvB,CAAvB;IACAD,aAAa,CAACI,YAAd,CAA2B,KAA3B,EAAkC,iBAAlC;IACAJ,aAAa,CAACI,YAAd,CAA2B,MAA3B,EAAmC,aAAnC;IACAJ,aAAa,CAACI,YAAd,CAA2B,IAA3B,EAAiC,OAAjC;IACAF,cAAc,CAACG,SAAf,GAA4B;AAChC;AACA;AACA;AACA;AACA;AACA,KANI;IAOAF,cAAc,CAACG,GAAf,GAAqB,qCAArB;IACAH,cAAc,CAACI,KAAf,GAAuB,IAAvB;;IACAJ,cAAc,CAACK,MAAf,GAAwB,MAAM;MAC5BtB,OAAO;MACPiB,cAAc,CAACK,MAAf,GAAwB,IAAxB;IACD,CAHD;;IAIAf,QAAQ,CAACI,IAAT,CAAcY,WAAd,CAA0BT,aAA1B;IACAP,QAAQ,CAACI,IAAT,CAAcY,WAAd,CAA0BP,cAA1B;IACAT,QAAQ,CAACI,IAAT,CAAcY,WAAd,CAA0BN,cAA1B;IACA1B,iBAAiB,GAAG,IAApB;EACD,CAzBD,MAyBO;IACLS,OAAO;EACR;AACF,CA3DD;;AA6DA,SAASN,WAAT,EAAsBL,SAAtB,EAAiCG,WAAjC"}]}
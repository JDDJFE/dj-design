{"remainingRequest":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js!/Users/wangjunxia/work-github/dj-design/node_modules/eslint-loader/index.js??ref--14-0!/Users/wangjunxia/work-github/dj-design/packages/table/src/mixins/check.js","dependencies":[{"path":"/Users/wangjunxia/work-github/dj-design/packages/table/src/mixins/check.js","mtime":1673509764351},{"path":"/Users/wangjunxia/work-github/dj-design/babel.config.js","mtime":1660011372032},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc0NoZWNrQWxsOiBmYWxzZSwKICAgICAgaXNJbmRldGVybWluYXRlOiBmYWxzZSwKICAgICAgY2hlY2tMaXN0OiBbXQogICAgfTsKICB9LAoKICB3YXRjaDogewogICAgdmFsdWU6IHsKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuc2V0SXNDaGVja0FsbCgpOwogICAgICB9CiAgICB9LAogICAgZGF0YTogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5zZXRJc0NoZWNrQWxsKCk7CiAgICAgIH0KICAgIH0sCiAgICBjaGVja0xpc3Q6IHsKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuc2V0SXNDaGVja0FsbCgpOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBjaGVja0FsbCgpIHsKICAgICAgLy8gdGhpcy5jaGVja0xpc3QgPSBbXTsKICAgICAgbGV0IGRhdGEgPSB0aGlzLnZhbHVlIHx8IHRoaXMuZGF0YTsKCiAgICAgIGlmICh0aGlzLmlzQ2hlY2tBbGwpIHsKICAgICAgICAvLyB0aGlzLmNoZWNrTGlzdCA9IFsuLi5kYXRhXTsKICAgICAgICBkYXRhLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICBpZiAoIXRoaXMuaXNDaGVjayhpdGVtKSkgewogICAgICAgICAgICB0aGlzLmNoZWNrTGlzdC5wdXNoKGl0ZW0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGRhdGEuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgIGlmICh0aGlzLmlzQ2hlY2soaXRlbSkpIHsKICAgICAgICAgICAgdGhpcy4kcmVtb3ZlKHRoaXMuY2hlY2tMaXN0LCBpdGVtKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdGhpcy5jaGVja0NoYW5nZSgpOwogICAgfSwKCiAgICBvbkNoZWNrKGl0ZW0pIHsKICAgICAgaWYgKHRoaXMuaXNDaGVjayhpdGVtKSkgewogICAgICAgIHRoaXMuJHJlbW92ZSh0aGlzLmNoZWNrTGlzdCwgaXRlbSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uQ291bnQgPT0gMSkgewogICAgICAgICAgdGhpcy5jaGVja0xpc3QgPSBbXTsKICAgICAgICB9CgogICAgICAgIHRoaXMuY2hlY2tMaXN0LnB1c2goaXRlbSk7CiAgICAgIH0KCiAgICAgIHRoaXMuY2hlY2tDaGFuZ2UoKTsKICAgIH0sCgogICAgc2V0SXNDaGVja0FsbCgpIHsKICAgICAgbGV0IGRhdGEgPSB0aGlzLnZhbHVlIHx8IHRoaXMuZGF0YTsKICAgICAgdGhpcy5pc0luZGV0ZXJtaW5hdGUgPSBmYWxzZTsKICAgICAgbGV0IGNoZWNrID0gZmFsc2U7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAoIXRoaXMuaXNDaGVjayhkYXRhW2ldKSkgewogICAgICAgICAgdGhpcy5pc0NoZWNrQWxsID0gZmFsc2U7CiAgICAgICAgICBjaGVjayA9IHRydWU7CgogICAgICAgICAgaWYgKHRoaXMuaXNJbmRldGVybWluYXRlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5pc0luZGV0ZXJtaW5hdGUgPSB0cnVlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKGNoZWNrKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICB0aGlzLmlzSW5kZXRlcm1pbmF0ZSA9IGZhbHNlOwogICAgICB0aGlzLmlzQ2hlY2tBbGwgPSB0cnVlOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0sCgogICAgaXNDaGVjayhpdGVtKSB7CiAgICAgIHJldHVybiB0aGlzLmNoZWNrTGlzdC5maW5kKGNoZWNrSXRlbSA9PiBjaGVja0l0ZW0gPT0gaXRlbSB8fCBKU09OLnN0cmluZ2lmeShjaGVja0l0ZW0pID09IEpTT04uc3RyaW5naWZ5KGl0ZW0pKSAmJiB0cnVlIHx8IGZhbHNlOwogICAgfSwKCiAgICBpc0NoZWNrV0pYKGl0ZW0pIHsKICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uRGlzYWJsZWQgJiYgdGhpcy5zZWxlY3Rpb25EaXNhYmxlZChpdGVtKTsKICAgIH0sCgogICAgc2V0Q2hlY2tMaXN0KGNoZWNrTGlzdCkgewogICAgICB0aGlzLmNoZWNrTGlzdCA9IGNoZWNrTGlzdDsKICAgIH0sCgogICAgZ2V0Q2hlY2tMaXN0KCkgewogICAgICByZXR1cm4gWy4uLnRoaXMuY2hlY2tMaXN0XTsKICAgIH0sCgogICAgY2hlY2tDaGFuZ2UoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2NoZWNrQ2hhbmdlJywgdGhpcy5nZXRDaGVja0xpc3QoKSk7CiAgICB9LAoKICAgIGNsZWFyQ2hlY2tMaXN0KCkgewogICAgICB0aGlzLmlzQ2hlY2tBbGwgPSBmYWxzZTsKICAgICAgdGhpcy5jaGVja0xpc3QgPSBbXTsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"names":["data","isCheckAll","isIndeterminate","checkList","watch","value","handler","setIsCheckAll","methods","checkAll","forEach","item","isCheck","push","$remove","checkChange","onCheck","selectionCount","check","i","length","find","checkItem","JSON","stringify","isCheckWJX","selectionDisabled","setCheckList","getCheckList","$emit","clearCheckList"],"sources":["/Users/wangjunxia/work-github/dj-design/packages/table/src/mixins/check.js"],"sourcesContent":["export default {\n  data() {\n    return {\n      isCheckAll: false,\n      isIndeterminate: false,\n      checkList: []\n    };\n  },\n  watch: {\n    value: {\n      handler: function() {\n        this.setIsCheckAll();\n      }\n    },\n    data: {\n      handler: function() {\n        this.setIsCheckAll();\n      }\n    },\n    checkList: {\n      handler: function() {\n        this.setIsCheckAll();\n      }\n    }\n  },\n  methods: {\n    checkAll() {\n      // this.checkList = [];\n      let data = this.value || this.data;\n      if (this.isCheckAll) {\n        // this.checkList = [...data];\n        data.forEach(item => {\n          if (!this.isCheck(item)) {\n            this.checkList.push(item);\n          }\n        });\n      } else {\n        data.forEach(item => {\n          if (this.isCheck(item)) {\n            this.$remove(this.checkList, item);\n          }\n        });\n      }\n      this.checkChange();\n    },\n    onCheck(item) {\n      if (this.isCheck(item)) {\n        this.$remove(this.checkList, item);\n      } else {\n        if (this.selectionCount == 1) {\n          this.checkList = [];\n        }\n        this.checkList.push(item);\n      }\n      this.checkChange();\n    },\n    setIsCheckAll() {\n      let data = this.value || this.data;\n      this.isIndeterminate = false;\n      let check = false;\n      for (let i = 0; i < data.length; i++) {\n        if (!this.isCheck(data[i])) {\n          this.isCheckAll = false;\n          check = true;\n          if (this.isIndeterminate) {\n            return false;\n          }\n        } else {\n          this.isIndeterminate = true;\n        }\n      }\n      if (check) {\n        return false;\n      }\n      this.isIndeterminate = false;\n      this.isCheckAll = true;\n      return true;\n    },\n    isCheck(item) {\n      return this.checkList.find(checkItem => checkItem == item || JSON.stringify(checkItem) == JSON.stringify(item)) && true || false;\n    },\n    isCheckWJX(item) {\n      return this.selectionDisabled && this.selectionDisabled(item);\n    },\n    setCheckList(checkList) {\n      this.checkList = checkList;\n    },\n    getCheckList() {\n      return [...this.checkList];\n    },\n    checkChange() {\n      this.$emit('checkChange', this.getCheckList());\n    },\n    clearCheckList() {\n      this.isCheckAll = false;\n      this.checkList = [];\n    }\n  }\n};\n"],"mappings":"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"}]}
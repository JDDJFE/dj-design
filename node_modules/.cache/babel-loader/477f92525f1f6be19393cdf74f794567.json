{"remainingRequest":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js!/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangjunxia/work-github/dj-design/packages/steps/src/step.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangjunxia/work-github/dj-design/packages/steps/src/step.vue","mtime":1673509764349},{"path":"/Users/wangjunxia/work-github/dj-design/babel.config.js","mtime":1660011372032},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdkalN0ZXAnLAogIHByb3BzOiB7CiAgICBkaXJlY3Rpb246IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnaG9yaXpvbnRhbCcKICAgIH0sCiAgICB0aXRsZTogU3RyaW5nLAogICAgc3ViVGl0bGU6IFN0cmluZywKICAgIGRlc2NyaXB0aW9uOiBTdHJpbmcsCiAgICBzdGF0dXM6IFN0cmluZywKICAgIGljb246IFN0cmluZwogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbmRleDogLTEsCiAgICAgIGludGVybmFsU3RhdHVzOiAnJwogICAgfTsKICB9LAoKICBjb21wdXRlZDogewogICAgaXNTaW1wbGUoKSB7CiAgICAgIHJldHVybiB0aGlzLiRwYXJlbnQuc2ltcGxlOwogICAgfSwKCiAgICBjdXJyZW50U3RhdHVzKCkgewogICAgICByZXR1cm4gdGhpcy5zdGF0dXMgfHwgdGhpcy5pbnRlcm5hbFN0YXR1czsKICAgIH0sCgogICAgcHJldlN0YXR1cygpIHsKICAgICAgY29uc3QgcHJldlN0ZXAgPSB0aGlzLiRwYXJlbnQuc3RlcHNbdGhpcy5pbmRleCAtIDFdOwogICAgICByZXR1cm4gcHJldlN0ZXAgPyBwcmV2U3RlcC5jdXJyZW50U3RhdHVzIDogJ3dhaXQnOwogICAgfQoKICB9LAoKICBiZWZvcmVDcmVhdGUoKSB7CiAgICB0aGlzLiRwYXJlbnQuc3RlcHMucHVzaCh0aGlzKTsKICB9LAoKICBiZWZvcmVEZXN0cm95KCkgewogICAgY29uc3Qgc3RlcHMgPSB0aGlzLiRwYXJlbnQuc3RlcHM7IC8vIGNvbnNvbGUubG9nKHN0ZXBzLCdzdGVwcycpOwoKICAgIGNvbnN0IGluZGV4ID0gc3RlcHMuaW5kZXhPZih0aGlzKTsKCiAgICBpZiAoaW5kZXggPj0gMCkgewogICAgICBzdGVwcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgfQogIH0sCgogIG1vdW50ZWQoKSB7CiAgICBjb25zdCB1bndhdGNoID0gdGhpcy4kd2F0Y2goJ2luZGV4JywgdmFsID0+IHsKICAgICAgdGhpcy4kd2F0Y2goJyRwYXJlbnQuYWN0aXZlJywgdGhpcy51cGRhdGVTdGF0dXMsIHsKICAgICAgICBpbW1lZGlhdGU6IHRydWUKICAgICAgfSk7CiAgICAgIHRoaXMuJHdhdGNoKCckcGFyZW50LnByb2Nlc3NTdGF0dXMnLCAoKSA9PiB7CiAgICAgICAgY29uc3QgYWN0aXZlSW5kZXggPSB0aGlzLiRwYXJlbnQuYWN0aXZlOwogICAgICAgIHRoaXMudXBkYXRlU3RhdHVzKGFjdGl2ZUluZGV4KTsKICAgICAgfSwgewogICAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgICB9KTsKICAgICAgdW53YXRjaCgpOwogICAgfSk7CiAgfSwKCiAgbWV0aG9kczogewogICAgdXBkYXRlU3RhdHVzKHZhbCkgewogICAgICAvLyBjb25zdCBwcmV2Q2hpbGQgPSB0aGlzLiRwYXJlbnQuJGNoaWxkcmVuW3RoaXMuaW5kZXggLSAxXTsKICAgICAgaWYgKHZhbCA+IHRoaXMuaW5kZXgpIHsKICAgICAgICB0aGlzLmludGVybmFsU3RhdHVzID0gdGhpcy4kcGFyZW50LmZpbmlzaFN0YXR1czsKICAgICAgfSBlbHNlIGlmICh2YWwgPT09IHRoaXMuaW5kZXggJiYgdGhpcy5wcmV2U3RhdHVzICE9PSAnZXJyb3InKSB7CiAgICAgICAgdGhpcy5pbnRlcm5hbFN0YXR1cyA9IHRoaXMuJHBhcmVudC5wcm9jZXNzU3RhdHVzOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaW50ZXJuYWxTdGF0dXMgPSAnd2FpdCc7CiAgICAgIH0gLy8gY29uc29sZS5sb2codGhpcy5pbnRlcm5hbFN0YXR1cywgdGhpcy5pbmRleCwgdGhpcy5jdXJyZW50U3RhdHVzLCAndXBkYXRlU3RhdHVzJyk7CiAgICAgIC8vIGlmIChwcmV2Q2hpbGQpIHByZXZDaGlsZC5jYWxjUHJvZ3Jlc3ModGhpcy5pbnRlcm5hbFN0YXR1cyk7CgogICAgfQoKICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;EACAA,cADA;EAEAC;IACAC;MACAC,YADA;MAEAC;IAFA,CADA;IAKAC,aALA;IAMAC,gBANA;IAOAC,mBAPA;IAQAC,cARA;IASAC;EATA,CAFA;;EAaAC;IACA;MACAC,SADA;MAEAC;IAFA;EAIA,CAlBA;;EAmBAC;IACAC;MACA;IACA,CAHA;;IAIAC;MACA;IACA,CANA;;IAOAC;MACA;MACA;IACA;;EAVA,CAnBA;;EA+BAC;IACA;EACA,CAjCA;;EAkCAC;IACA,iCADA,CAEA;;IACA;;IACA;MACAC;IACA;EACA,CAzCA;;EA0CAC;IACA;MACA;QAAAC;MAAA;MACA;QACA;QACA;MACA,CAHA,EAGA;QAAAA;MAAA,CAHA;MAIAC;IACA,CAPA;EAQA,CAnDA;;EAoDAC;IACAC;MACA;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CARA,CASA;MACA;;IACA;;EAZA;AApDA","names":["name","props","direction","type","default","title","subTitle","description","status","icon","data","index","internalStatus","computed","isSimple","currentStatus","prevStatus","beforeCreate","beforeDestroy","steps","mounted","immediate","unwatch","methods","updateStatus"],"sourceRoot":"packages/steps/src","sources":["step.vue"],"sourcesContent":["<template>\n  <div\n    class=\"dj-step-item\"\n    :class=\"[\n      `is-${$parent.direction}`,\n      isSimple && 'is-simple',\n      `is-${currentStatus}`,\n      icon && 'dj-step-item-custom'\n      // isLast && !space && !isCenter && 'is-flex',\n      // isCenter && !isVertical && !isSimple && 'is-center'\n     ]\">\n    <div class=\"dj-step-item-container\">\n      <div class=\"dj-step-item-tail\"></div>\n      <div class=\"dj-step-item-icon\">\n        <slot\n          v-if=\"(currentStatus !== 'success' && currentStatus !== 'finish' && currentStatus !== 'error') || icon\"\n          name=\"icon\">\n          <i v-if=\"icon && !isSimple\" class=\"iconfont\" :class=\"[icon]\"></i>\n          <div class=\"dj-step-icon\" v-if=\"!icon && !isSimple\">{{ index + 1 }}</div>\n        </slot>\n        <i\n          v-else-if=\"!isSimple\"\n          :class=\"[((currentStatus === 'success'||currentStatus === 'finish') ? 'check' : 'close')]\"\n          class=\"iconfont is-status\"\n        ></i>\n        <span v-if=\"isSimple\" class=\"dj-step-icon-dot\"></span>\n      </div>\n      <div class=\"dj-step-item-content\">\n        <div class=\"dj-step-item-title\">\n          {{title}}\n          <div v-if=\"subTitle\" :title=\"subTitle\" class=\"dj-step-item-subtitle\">{{subTitle}}</div>\n        </div>\n        <div class=\"dj-step-item-des\">{{description}}</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'djStep',\n  props: {\n    direction: {\n      type: String,\n      default: 'horizontal'\n    },\n    title: String,\n    subTitle: String,\n    description: String,\n    status: String,\n    icon: String\n  },\n  data() {\n    return {\n      index: -1,\n      internalStatus: ''\n    };\n  },\n  computed: {\n    isSimple() {\n      return this.$parent.simple;\n    },\n    currentStatus() {\n      return this.status || this.internalStatus;\n    },\n    prevStatus() {\n      const prevStep = this.$parent.steps[this.index - 1];\n      return prevStep ? prevStep.currentStatus : 'wait';\n    }\n  },\n  beforeCreate() {\n    this.$parent.steps.push(this);\n  },\n  beforeDestroy() {\n    const steps = this.$parent.steps;\n    // console.log(steps,'steps');\n    const index = steps.indexOf(this);\n    if (index >= 0) {\n      steps.splice(index, 1);\n    }\n  },\n  mounted() {\n    const unwatch = this.$watch('index', val => {\n      this.$watch('$parent.active', this.updateStatus, {immediate: true});\n      this.$watch('$parent.processStatus', () => {\n        const activeIndex = this.$parent.active;\n        this.updateStatus(activeIndex);\n      }, {immediate: true});\n      unwatch();\n    });\n  },\n  methods: {\n    updateStatus(val) {\n      // const prevChild = this.$parent.$children[this.index - 1];\n      if (val > this.index) {\n        this.internalStatus = this.$parent.finishStatus;\n      } else if (val === this.index && this.prevStatus !== 'error') {\n        this.internalStatus = this.$parent.processStatus;\n      } else {\n        this.internalStatus = 'wait';\n      }\n      // console.log(this.internalStatus, this.index, this.currentStatus, 'updateStatus');\n      // if (prevChild) prevChild.calcProgress(this.internalStatus);\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n</style>\n"]}]}
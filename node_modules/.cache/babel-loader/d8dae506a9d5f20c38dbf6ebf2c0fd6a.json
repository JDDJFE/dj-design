{"remainingRequest":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js!/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangjunxia/work-github/dj-design/packages/input/src/options.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangjunxia/work-github/dj-design/packages/input/src/options.vue","mtime":1673509764332},{"path":"/Users/wangjunxia/work-github/dj-design/babel.config.js","mtime":1660011372032},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangjunxia/work-github/dj-design/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8gaW1wb3J0ICdAL2RpcmVjdGl2ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnZGpPcHRpb25zJywKICBwcm9wczogewogICAgdmFsdWU6IFtTdHJpbmcsIE51bWJlciwgQXJyYXldLAogICAgdmFsdWVLZXk6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAndmFsdWUnCiAgICB9LAogICAgZnVucXVlcnk6IEZ1bmN0aW9uLAogICAgc2VhcmNoOiBCb29sZWFuLAogICAgbXVsdGlwbGU6IEJvb2xlYW4sCiAgICBub2RhdGE6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAn5pyq5Yy56YWN5Yiw5pWw5o2uJwogICAgfSwKICAgIHBsYWNlaG9sZGVyOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVhZnVsdDogJ3NlYXJjaC4uLicKICAgIH0KICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAga2V5d29yZDogJycsCiAgICAgIGl0ZW1zOiBbXSwKICAgICAgdGltZW91dDogbnVsbCwKICAgICAgb2xkVmFsdWU6ICcnCiAgICB9OwogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBnZXRJdGVtcygpIHsKICAgICAgaWYgKCF0aGlzLmtleXdvcmQpIHsKICAgICAgICByZXR1cm4gdGhpcy5pdGVtczsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuaXRlbXMuZmlsdGVyKGl0ZW0gPT4gaXRlbVt0aGlzLnZhbHVlS2V5XS5zZWFyY2godGhpcy5rZXl3b3JkKSA+IC0xKTsKICAgIH0KCiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIHRoaXMub25RdWVyeSgpOwogIH0sCgogIHdhdGNoOiB7Ly8gdmFsdWU6IGZ1bmN0aW9uKG8sIG4pIHsKICAgIC8vICAgdGhpcy5vblF1ZXJ5KCk7CiAgICAvLyB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBvblF1ZXJ5KCkgewogICAgICBpZiAodGhpcy52YWx1ZSAmJiB0aGlzLnZhbHVlID09IHRoaXMub2xkVmFsdWUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnRpbWVvdXQpIHsKICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KTsKICAgICAgICB0aGlzLnRpbWVvdXQgPSBudWxsOwogICAgICB9CgogICAgICB0aGlzLnRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLmZ1bnF1ZXJ5ICYmIHRoaXMuZnVucXVlcnkodGhpcy52YWx1ZSwgbGlzdCA9PiB7CiAgICAgICAgICB0aGlzLm9sZFZhbHVlID0gdGhpcy52YWx1ZTsKICAgICAgICAgIHRoaXMuaXRlbXMgPSBsaXN0OwogICAgICAgIH0pOwogICAgICB9LCAzMDApOwogICAgfSwKCiAgICBvblNlbGVjdChpdGVtKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgaXRlbVt0aGlzLnZhbHVlS2V5XSk7CiAgICAgIHRoaXMuJGVtaXQoJ3NlbGVjdCcsIGl0ZW1bdGhpcy52YWx1ZUtleV0sIGl0ZW0pOwogICAgfQoKICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;AAoBA;AACA;EACAA,iBADA;EAEAC;IACAC,8BADA;IAEAC;MACAC,YADA;MAEAC;IAFA,CAFA;IAMAC,kBANA;IAOAC,eAPA;IAQAC,iBARA;IASAC;MACAL,YADA;MAEAC;IAFA,CATA;IAaAK;MACAN,YADA;MAEAO;IAFA;EAbA,CAFA;;EAoBAC;IACA;MACAC,WADA;MAEAC,SAFA;MAGAC,aAHA;MAIAC;IAJA;EAMA,CA3BA;;EA4BAC;IACAC;MACA;QACA;MACA;;MACA;IACA;;EANA,CA5BA;;EAoCAC;IACA;EACA,CAtCA;;EAuCAC,QACA;IACA;IACA;EAHA,CAvCA;EA4CAC;IACAC;MACA;QACA;MACA;;MACA;QACAC;QACA;MACA;;MACA;QACA;UACA;UACA;QACA,CAHA;MAIA,CALA,EAKA,GALA;IAMA,CAfA;;IAgBAC;MACA;MACA;IACA;;EAnBA;AA5CA","names":["name","props","value","valueKey","type","default","funquery","search","multiple","nodata","placeholder","deafult","data","keyword","items","timeout","oldValue","computed","getItems","mounted","watch","methods","onQuery","clearTimeout","onSelect"],"sourceRoot":"packages/input/src","sources":["options.vue"],"sourcesContent":["<template>\n  <div class=\"dj-options\">\n    <div class=\"menu-panel\">\n      <div v-if=\"search\" class=\"item-search\">\n        <dj-input v-model=\"keyword\" :placeholder=\"placeholder\" style=\"width: 100%\" icon=\"search2\"/>\n      </div>\n      <ul v-if=\"getItems && getItems.length\">\n        <li v-for=\"(item, index) in getItems\" :key=\"index\" @click=\"onSelect(item)\">\n          <slot name=\"option\" v-bind=\"item\">\n            {{ item[valueKey] }}\n          </slot>\n        </li>\n      </ul>\n      <div v-else class=\"empty-panel\">{{nodata}}</div>\n      <div class=\"arrow\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\n// import '@/directive';\nexport default {\n  name: 'djOptions',\n  props: {\n    value: [String, Number, Array],\n    valueKey: {\n      type: String,\n      default: 'value'\n    },\n    funquery: Function,\n    search: Boolean,\n    multiple: Boolean,\n    nodata: {\n      type: String,\n      default: '未匹配到数据'\n    },\n    placeholder: {\n      type: String,\n      deafult: 'search...'\n    }\n  },\n  data() {\n    return {\n      keyword: '',\n      items: [],\n      timeout: null,\n      oldValue: ''\n    };\n  },\n  computed: {\n    getItems() {\n      if (!this.keyword) {\n        return this.items;\n      }\n      return this.items.filter(item => item[this.valueKey].search(this.keyword) > -1);\n    }\n  },\n  mounted() {\n    this.onQuery();\n  },\n  watch: {\n    // value: function(o, n) {\n    //   this.onQuery();\n    // }\n  },\n  methods: {\n    onQuery() {\n      if (this.value && this.value == this.oldValue) {\n        return;\n      }\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n        this.timeout = null;\n      }\n      this.timeout = setTimeout(() => {\n        this.funquery && this.funquery(this.value, (list) => {\n          this.oldValue = this.value;\n          this.items = list;\n        });\n      }, 300);\n    },\n    onSelect(item) {\n      this.$emit('input', item[this.valueKey]);\n      this.$emit('select', item[this.valueKey], item);\n    }\n  }\n};\n</script>\n\n"]}]}